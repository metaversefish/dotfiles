var SIH=function(t){function e(o){if(r[o])return r[o].exports;var i=r[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=37)}({0:function(t,e,r){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){t=decodeURI(t);var e=t.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return e&&{href:t,protocol:e[1],host:e[2],hostname:e[3],port:e[4],pathname:e[5],search:e[6],hash:e[7]}}function s(t){return new Promise(function(e){chrome.runtime.sendMessage(SIHID,{type:"GET_PRICE_FROM_STEAM",data:t},e)})}function a(){var t=i(window.location.href);if(t.pathname.indexOf("market/listings/")>-1){var e=t.pathname.split("/");return{appId:e[3],marketHashName:e[4],location:t}}return{}}function n(t){return(+t.toFixed(2)).toLocaleString("ru").replace(",",".")}Object.defineProperty(e,"__esModule",{value:!0}),e.getLocation=i,e.getPriceFromSteam=s,e.getPageParams=a,r.d(e,"localStorageJSON",function(){return _}),r.d(e,"App",function(){return l}),e.formatNumber=n,r.d(e,"Currency",function(){return c});var _={set:function(t,e){try{e=e||"",localStorage.setItem(t,JSON.stringify(e))}catch(t){}},get:function(t){try{var e=localStorage.getItem(t)||null;return JSON.parse(e)}catch(t){return null}}},l={getManifest:function(){return new Promise(function(t){chrome.runtime.sendMessage(SIHID,{type:"GET_MANIFEST_APP",data:{}},t)}).then(function(t){return t.data})}},c=function(){function t(){o(this,t)}return t.getPriceFromCurrency=function(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t.getCurrency(+r),s=t.getCurrency(+o),a=ExchangeRates._rates[i.strCode],n=ExchangeRates._rates[s.strCode];return"USD"===s.strCode?"USD"!=i.strCode&&(e*=a):s.strCode!=i.strCode&&(e=e/n*a),{price:e,code:i.strCode,symbol:i.strSymbol,text:(i.bSymbolIsPrefix?""+i.strSymbol+i.strSymbolAndNumberSeparator:"")+e.toFixed(2)+(i.bSymbolIsPrefix?"":""+i.strSymbolAndNumberSeparator+i.strSymbol),template:(i.bSymbolIsPrefix?""+i.strSymbol+i.strSymbolAndNumberSeparator:"")+"$price"+(i.bSymbolIsPrefix?"":""+i.strSymbolAndNumberSeparator+i.strSymbol)}},t.getCurrency=function(t){var e=null;t=t||"undefined"!=typeof g_rgWalletInfo&&g_rgWalletInfo.wallet_currency||1;for(var r in g_rgCurrencyData)if(g_rgCurrencyData[r].eCurrencyCode===+t){e=g_rgCurrencyData[r];break}return e},t.getCurrencyCodeSteam=function(){return"undefined"!=typeof g_rgWalletInfo&&g_rgWalletInfo.wallet_currency||1},t}()},23:function(module,__webpack_exports__,__webpack_require__){"use strict";function selectTabMarket(){$J("#myMarketTabs").find(".market_tab_well_tabs a").on("click",function(){"tabMyMarketHistory"===(g_sihSelectTabMarket=$J(this).attr("id"))||$J("#BG_bottom").find(".my_market_history_filtration").remove()})}function marketMyHistoryRequestBefore(t,e){spinnerFilterMarketHistory(!0);var r=getLocalStorage();e.parameters.count=r.isVisibleSlots?500:window.historypagesize}function marketMyHistoryRequestOnFailureBefore(){spinnerFilterMarketHistory(!1)}function marketMyHistoryRequestOnSuccessBefore(){g_sihSelectTabMarket=$J("#myMarketTabs .market_tab_well_tabs a.market_tab_well_tab_active").attr("id"),"tabMyMarketHistory"===g_sihSelectTabMarket?loadCheckboxHistoryFiltration():$J("#BG_bottom").find(".my_market_history_filtration").remove()}function marketMyHistoryRequestOnSuccessAfter(t,e,r){if($J(".sih.my_market_history_filtration .switcher_history_filtration").hasClass("selected")){if(e.start||$J("#tabContentsMyMarketHistoryRows .market_listing_row.market_recent_listing_row").hide(),0===$J("#tabContentsMyMarketHistory").find(".market_listing_table_showmore").length){var o=$J("#tabContentsMyMarketHistory_ctn");o.hide();for(var i='<a class="sih_button sih_pre_shadow_button collapse_my_history" href="javascript:void(0);">'+SIHLang.collapseHistoryMarket+"</a>",s=[10,25,50,100],a=0;a<4;a++){var n=s[a];i+='<a class="sih_button sih_pre_shadow_button upload_my_history" data-number="'+n+'" href="javascript:void(0);">'+SIHLang.uploadHistoryMarket.replace("$1",n)+"</a>"}o.after('<div class="market_listing_table_showmore upload_my_history_buttons sih" style="display: flex">'+i+"</div>"),$J("#tabContentsMyMarketHistory").find(".upload_my_history").click(function(){viewFilterMarketHistory(!0,$J(this).data("number")),colorMarketHistory()}),$J("#tabContentsMyMarketHistory").find(".collapse_my_history").click(function(){$J("body, html").animate({scrollTop:240},800),setTimeout(function(){g_sihSettingFiltration={},uploadMarketHistory()},800)})}g_sihSettingFiltration.start=r.responseJSON.start+r.responseJSON.pagesize,g_sihSettingFiltration.totalCount=r.responseJSON.total_count,viewFilterMarketHistory(),spinnerFilterMarketHistory(!1)}else ImprovedMyMarketHistoryNav.init();colorMarketHistory()}function getLocalStorage(){var t=__WEBPACK_IMPORTED_MODULE_1__common__.a.get();return t||(t={isSlotPlacedHistoryTran:!1,isSlotRemovedHistoryTran:!1,isSlotPurchasedHistoryTran:!0,isSlotSoldHistoryTran:!0,isVisibleSlots:!1},__WEBPACK_IMPORTED_MODULE_1__common__.a.set(t)),t}function loadCheckboxHistoryFiltration(){if(0===$J("#BG_bottom").find(".my_market_history_filtration").length){$J("#myMarketTabs").after('\n                     <div class="sih my_market_history_filtration">\n                      <div class="switch_history_filtration">\n                          <a class="sih_button sih_pre_shadow_button switcher_history_filtration" href="javascript:void(0);">'+SIHLang.filtrationHistoryMarketName+"</a>\n\n                      </div>\n\n                    </div>\n\n");var t=getLocalStorage();t.isVisibleSlots&&$J(".sih.my_market_history_filtration .switcher_history_filtration").addClass("selected"),loadSlots(t),$J(".sih.my_market_history_filtration .switcher_history_filtration").click(function(){var t=getLocalStorage(),e=$J(this);e.hasClass("selected")?(e.removeClass("selected"),t.isVisibleSlots=!1):(e.addClass("selected"),t.isVisibleSlots=!0),__WEBPACK_IMPORTED_MODULE_1__common__.a.set(t),loadSlots(t)})}}function loadSlots(t){$J("#new_tab_contents_my_market_history_table").remove();var e=$J(".my_market_history_filtration");t.isVisibleSlots?($J("#BG_bottom").append('<div id="new_tab_contents_my_market_history_table" style="display: none"></div>'),g_sihSettingFiltration={},e.append('  <div class="slots_history_tran">\n\n                           <div class="slot_history_tran">\n                              <label for="slot_placed_history_tran" class="sih_checkbox">'+SIHLang.historySaleSlotPlaced+'</label>\n                              <input type="checkbox" data-id="isSlotPlacedHistoryTran" '+(t.isSlotPlacedHistoryTran?"checked":"")+' id="slot_placed_history_tran">\n                          </div>\n\n                          <div class="slot_history_tran">\n                              <label for="slot_removed_history_tran" class="sih_checkbox">'+SIHLang.historySaleSlotRemoved+'</label>\n                              <input type="checkbox" data-id="isSlotRemovedHistoryTran" '+(t.isSlotRemovedHistoryTran?"checked":"")+' id="slot_removed_history_tran" >\n                          </div>\n\n                          <div class="slot_history_tran">\n                              <label for="slot_purchased_history_tran" class="sih_checkbox">'+SIHLang.historySaleSlotPurchased+'</label>\n                              <input type="checkbox" data-id="isSlotPurchasedHistoryTran" '+(t.isSlotPurchasedHistoryTran?"checked":"")+' id="slot_purchased_history_tran">\n                          </div>\n\n                          <div class="slot_history_tran">\n                              <label for="slot_sold_history_tran" class="sih_checkbox">'+SIHLang.historySaleSlotSold+'</label>\n                              <input type="checkbox" data-id="isSlotSoldHistoryTran" '+(t.isSlotSoldHistoryTran?"checked":"")+' id="slot_sold_history_tran">\n                          </div>\n\n                      </div>'),$J("#slot_removed_history_tran, #slot_placed_history_tran, #slot_purchased_history_tran, #slot_sold_history_tran").checkboxradio(),e.find("input").change(function(){var t=$J(this);if(e.find("input:checked").length){var r=getLocalStorage();r[t.data("id")]=t.prop("checked"),__WEBPACK_IMPORTED_MODULE_1__common__.a.set(r),g_sihSettingFiltration={},LoadMarketHistory()}else t.prop("checked",!0).checkboxradio("refresh")})):e.find(".slots_history_tran").remove(),LoadMarketHistory()}function performFilterMarketHistory(){var t=0,e=!1;return $J("#tabContentsMyMarketHistoryRows .market_listing_row.market_recent_listing_row").each(function(r,o){var i=!1;g_sihSettingFiltration.totalCountView<=t&&(i=!0);var s=getLocalStorage();if(s.isSlotRemovedHistoryTran&&$J(o).attr("id").indexOf("_event_2")>-1&&(i?e=!0:(t++,$J(o).addClass("new_history_row_market"))),s.isSlotPlacedHistoryTran&&$J(o).attr("id").indexOf("_event_1")>-1&&(i?e=!0:(t++,$J(o).addClass("new_history_row_market"))),s.isSlotPurchasedHistoryTran){$J(o).find(".market_listing_left_cell.market_listing_gainorloss").text().indexOf("+")>-1&&(i?e=!0:(t++,$J(o).addClass("new_history_row_market")))}if(s.isSlotSoldHistoryTran){$J(o).find(".market_listing_left_cell.market_listing_gainorloss").text().indexOf("-")>-1&&(i?e=!0:(t++,$J(o).addClass("new_history_row_market")))}if(i&&e)return!1}),e}function uploadMarketHistory(){new Ajax.Request("https://steamcommunity.com/market/myhistory",{method:"get",parameters:{start:g_sihSettingFiltration.start},onSuccess:function onSuccess(transport){if(transport.responseJSON){var response=transport.responseJSON,$newTable=$J("#new_tab_contents_my_market_history_table");$newTable.append(response.results_html),$newTable.find(".market_listing_row.market_recent_listing_row").hide(),$J("#tabContentsMyMarketHistoryRows").append($newTable.find(".market_listing_row.market_recent_listing_row")),$newTable.empty(),MergeWithAssetArray(response.assets),eval(response.hovers)}}})}function viewFilterMarketHistory(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;void 0===g_sihSettingFiltration.totalCountView?g_sihSettingFiltration.totalCountView=e:t&&(g_sihSettingFiltration.totalCountView+=e);var r=performFilterMarketHistory(),o=function(t){t||$J(".market_listing_table_showmore.upload_my_history_buttons").remove(),s.each(function(t,e){$J(e).removeClass("new_history_row_market").show()})},i=$J("#tabContentsMyMarketHistoryRows .market_listing_row.market_recent_listing_row"),s=$J("#tabContentsMyMarketHistoryRows .market_listing_row.market_recent_listing_row.new_history_row_market");g_sihSettingFiltration.totalCountView>s.length&&g_sihSettingFiltration.totalCount>i.length?setTimeout(function(){uploadMarketHistory()},3e3):o(r)}function spinnerFilterMarketHistory(t){t?($J("#upload_my_history").addClass("sih-disabled"),$J(".spinner_upload_my_history").css({display:"inline-block"})):($J(".spinner_upload_my_history").css({display:"none"}),$J("#upload_my_history").removeClass("sih-disabled"))}function colorMarketHistory(){$J("#tabContentsMyMarketHistoryRows .market_listing_row.market_recent_listing_row:visible").each(function(t,e){$J(e).find(".sih_market_listing_left_cell_color").length||($J(e).find(".market_listing_gainorloss").before('\n      <div class="market_listing_left_cell sih_market_listing_left_cell_color"></div>\n    '),$J(e).find(".sih_market_listing_left_cell_color").append($J(e).find(".market_listing_gainorloss")).append('<div class="color_background"></div>').append($J(e).find(".market_listing_item_img")));var r=$J(e).find(".market_listing_left_cell.market_listing_gainorloss").text();if(r.indexOf("+")>-1){var o=$J(e).find(".market_listing_price").text();o.includes("-")||$J(e).find(".market_listing_price").html("-"+o.trim())}if(r.indexOf("-")>-1){var i=$J(e).find(".market_listing_price").text();i.includes("+")||$J(e).find(".market_listing_price").html("+"+i.trim())}if(window.color_slot_removed_history_tran_show&&$J(e).attr("id").indexOf("_event_2")>-1&&$J(e).find(".sih_market_listing_left_cell_color").css({"background-color":window.color_slot_removed_history_tran}),window.color_slot_placed_history_tran_show&&$J(e).attr("id").indexOf("_event_1")>-1&&$J(e).find(".sih_market_listing_left_cell_color").css({"background-color":window.color_slot_placed_history_tran}),window.color_slot_purchased_history_tran_show){$J(e).find(".market_listing_left_cell.market_listing_gainorloss").text().indexOf("+")>-1&&$J(e).find(".sih_market_listing_left_cell_color").css({"background-color":window.color_slot_purchased_history_tran})}if(window.color_slot_sold_history_tran_show){$J(e).find(".market_listing_left_cell.market_listing_gainorloss").text().indexOf("-")>-1&&$J(e).find(".sih_market_listing_left_cell_color").css({"background-color":window.color_slot_sold_history_tran})}})}Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),__webpack_exports__.selectTabMarket=selectTabMarket,__webpack_exports__.marketMyHistoryRequestBefore=marketMyHistoryRequestBefore,__webpack_exports__.marketMyHistoryRequestOnFailureBefore=marketMyHistoryRequestOnFailureBefore,__webpack_exports__.marketMyHistoryRequestOnSuccessBefore=marketMyHistoryRequestOnSuccessBefore,__webpack_exports__.marketMyHistoryRequestOnSuccessAfter=marketMyHistoryRequestOnSuccessAfter;var __WEBPACK_IMPORTED_MODULE_0__main_scss__=__webpack_require__(48),__WEBPACK_IMPORTED_MODULE_0__main_scss___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__main_scss__),__WEBPACK_IMPORTED_MODULE_1__common__=__webpack_require__(36),g_sihSelectTabMarket="",g_sihSettingFiltration={}},36:function(t,e,r){"use strict";r.d(e,"a",function(){return i});var o=r(0),i={_name:"SIH_FILTER_MARKET_HISTORY",get:function(){return o.localStorageJSON.get(this._name)},set:function(t){o.localStorageJSON.set(this._name,t)}}},37:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(23);r.d(e,"filterMarketHistory",function(){return o})},48:function(t,e){}});