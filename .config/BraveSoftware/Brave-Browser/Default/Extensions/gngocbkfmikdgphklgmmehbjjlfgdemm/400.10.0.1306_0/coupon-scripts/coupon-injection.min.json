{"6":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying 1-800 contacts specific coupons\");var $,self=this,elementIds={couponRemoveId:'a[data-selenium-id=\"lnkRemoveCouponCode\"]',couponApplyId:'input[data-selenium-id=\"txtCouponCode\"]',couponApplyButtonId:'button[data-selenium-id=\"btnApplyCouponCode\"]',bagTotalId:'span[data-selenium-id=\"cartTotal\"]',errorMessageId:\"div.input-error\",openPromoId:'a[data-selenium-id=\"spanLnkHaveOrderCode\"]',doNotApplyCouponsId:\"div.empty-cart\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponRemoveId).length&&$(elementIds.openPromoId)[0].click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=(0==$(elementIds.couponApplyId).length&&$(elementIds.openPromoId)[0].click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","12":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying 1-800 PetMeds coupons\");var $,self=this,elementIds={applyFormId:'form[name=\"promo-code-form\"]',couponApplyId:\"input#couponCode\",couponApplyButtonId:'form[name=\"promo-code-form\"] button[type=\"submit\"]',bagTotalId:\"div#maincontent p.grand-total\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.get(form[0].action+\"?\"+form.serialize(),function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),console.log($(elementIds.bagTotalId,dom).text()),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","38":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying 4 Wheel Parts specific coupons\");var $,self=this,elementIds={applyFormId:\"#applyCouponForm\",removeFormId:\"#removeCouponForm\",couponApplyId:\"input#cartPromoCode\",couponApplyButtonId:\"input#cartPromoCodeSubmit\",bagTotalId:\"td#price_orderTotal\",couponRemoveId:\"form#promoCouponForm a\",removeCouponVal:\"input.removeCouponVal\",removeCouponSub:\"input.removeCouponSub\",claimcouponCode:\"#claimcouponCode\",applyCouponSub:\"input.applyCouponSub\",doNotApplyCouponsId:\"div.empty-cart-column\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var code,d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?(code=$(elementIds.couponRemoveId,dom).attr(\"data-removecouponval\"),$(elementIds.removeCouponVal,dom).val(code),$(elementIds.removeCouponSub,dom).val(\"true\"),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.removeCouponSub,dom)[0].name+\"=\"+$(elementIds.removeCouponSub,dom)[0].value,function(data){data=$(data);d.resolve(data)})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$(elementIds.claimcouponCode,dom).val(code),$(elementIds.applyCouponSub,dom).val(\"true\"),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.applyCouponSub,dom)[0].name+\"=\"+$(elementIds.applyCouponSub,dom)[0].value,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","81":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Adidas specific coupons\");var $,self=this,elementIds={couponRemoveId:'button[data-auto-id=\"glass-coupon-button-delete\"]',couponApplyId:\"#coupon\",couponApplyButtonId:'div#app button[type=\"submit\"]',bagTotalId:'[data-auto-id=\"glass-cart-summary-price-value\"]',errorMessageId:'div[data-auto-id=\"cart-coupon-error\"]'};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0===$(elementIds.couponApplyButtonId).length&&0===$(elementIds.couponRemoveId).length&&((input=$(elementIds.couponApplyId)).val(\"abc\"),self.triggerEvent(input.get(0),\"change\"));var input,elButton;return input=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,0<$(elementIds.couponRemoveId).length||input&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},calculateTotal:calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","85":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Adorama's specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div#giftCouponContainer span > a\",couponApplyId:\"input#couponInput\",couponApplyButtonId:'form.addCouponForm button[type=\"submit\"]',bagTotalId:\"span#grand-total-val\",errorMessageId:\"div#giftCouponContainer p\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","93":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying aeropostale specific coupons\");var $,elementIds={couponApplyId:\"#dwfrm_billing_couponCode\",couponApplyButtonId:\"#add-coupon\",bagTotalId:\"div#secondary td.order-value.bfx-price.bfx-total-grandtotal\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve($(document)),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),dom=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),\"https://www.aeropostale.com/on/demandware.store/Sites-aeropostale-Site/default/Cart-AddCouponJson?couponCode=\"+code+\"&format=ajax\");return $.get(dom,function(jsonResp){d.resolve(jsonResp)}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),dom=dom&&\"APPLIED\"==dom.status?dom.baskettotal||0:(dom=$(document),$(elementIds.bagTotalId,dom).text()),total=-1;return dom&&(dom=$.trim(dom).replace(/\\$|,/g,\"\"),total=parseFloat(dom)),d.resolve({total:total}),d.promise()},onReady:this.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","120":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying alibris specific coupons\");var $,self=this,elementIds={applyFormId:\"form#saleCartCouponForm\",removeFormId:\"form#saleCartCouponForm\",couponApplyId:\"input#coupon-purchase\",couponApplyButtonId:\"a#saleCartCouponButton\",bagTotalId:\"span.subtotal-price\",couponRemoveId:\"a#saleCartRemoveCouponButton\",doNotApplyCouponsId:\"div.cart-empty\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return $(elementIds.couponRemoveId,dom).length?$.post(form[0].action,form.serialize(),function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize(),function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","122":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying aliexpress canada specific coupons\");var $,self=this,elementIds={couponRemoveId:'div#price-overview button[type=\"button\"]',couponApplyId:\"#code\",couponApplyButtonId:'div#price-overview button[type=\"button\"]',bagTotalId:\"div.total-price dd\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),setTimeout(function(){d.resolve()},1e3),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),setTimeout(function(){d.resolve()},1e3),d.promise()},calculateTotal:function(el){var el=el||$(elementIds.bagTotalId),total=-1;return 0<el.length&&(el=$.trim(el.text()).replace(/,/g,\"\"),el=1==(el=$.trim(el).match(/\\d+[\\.\\d{0,3}]/g)).length?el[0]:el[0]+el[1],total=parseFloat(el)),total},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","155":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying American Girl specific coupons\");var $,self=this,elementIds={couponRemoveId:\"#promotion_1\",couponApplyId:\"#promoCode\",couponApplyButtonId:\"a#WC_PromotionCodeDisplay_links_1\",bagTotalId:\"#WC_SingleShipmentOrderTotalsSummary_td_13\",errorMessageId:\"div.show.error.ch-error\",openPromo:\"div#my-order-reward div.accordion-heading > a\",doNotApplyCouponsId:\"#WC_EmptyShopCartDisplayf_div_1\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1250)}).catch(function(error){0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),d.resolve()}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),setTimeout(function(){self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId)[0].click()},750),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}).catch(function(error){d.resolve()}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","173":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Anthropologie's specific coupons\");var $,logInfo,self=this,elementIds={couponRemoveId:\"ul#promoCodes span.spanCheckbox\",couponApplyId:\"input#promo-code\",couponApplyButtonId:\"button.c-cart-add-promo__button\",bagTotalId:\"td.c-cart-totals__td.c-cart-totals__td--total.js-cart-totals__total.ng-binding\",errorMessageId:\".o-column.o-extra-small--12.c-form__field.c-cart-add-promo__error.has-error p\",addPromoButton:\".toggle.o-column.o-extra-small--2.c-cart-add-promo__icon-outer.ng-scope\"};function isRemoveFinished(){var index=1<$(elementIds.couponRemoveId).length?1:0;return!$($(elementIds.couponRemoveId)[index]).is(\":visible\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var links=$(elementIds.couponRemoveId),index=1<links.length?1:0;try{links[index].click(),logInfo(\"apply remove\")}catch(x){}return self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){return $(elementIds.addPromoButton)[0].click(),$(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId)[0].click(),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,logInfo=fnLogInfo}}});","187":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Aquasana specific coupons\");var $,self=this,elementIds={couponApplyId:'input[name=\"discountcode\"]',couponApplyButtonId:\"table#cart-list a:nth-child(2)\",bagTotalId:\"table#cart-list tr.cart-subtotal > td:nth-child(3)\",updateButtonId:\"table#cart-list tr.cart-options input\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),code=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),$(elementIds.couponApplyId,dom)[0].name+\"=\"+code+\"&\"+$(elementIds.updateButtonId,dom)[0].name+\"=\"+$(elementIds.updateButtonId,dom)[0].value);return $.ajax({type:\"POST\",url:\"https://www.aquasana.com/cart.php\",data:code,success:function(data){data=$(data);d.resolve(data)},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","240":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying AutoZone's specific coupons\");var $,self=this,elementIds={applyFormId:\"#promoCode\",removeFormId:\"#removeCouponForm\",couponApplyId:\"#promoCodeInput\",couponApplyButtonId:\"\",bagTotalId:\".subtotal-price\",couponRemoveId:\".remove-coupon\",appliedCouponId:\".savings-applied.grid-24\",promoId:'input[name=\"/atg/commerce/promotion/CouponFormHandler.promotionId\"]'};return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){return!0},getMissingElements:function(){return\"\"}}),{removeCoupon:function(dom){var onclick,d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?(onclick=(onclick=(onclick=$(elementIds.couponRemoveId,dom).attr(\"onclick\")).substring(onclick.indexOf(\"'\")+1)).substring(0,onclick.indexOf(\"'\")),$(elementIds.couponRemoveId,dom).val(onclick),$(elementIds.promoId,dom).val(onclick),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,dom)[0].name+\"=\"+$(elementIds.couponRemoveId,dom)[0].value,function(data){data=$(data);d.resolve(data)})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom)),couponApplyButton=$(elementIds.applyFormId,dom).find(\"a.button\")[0];return $(elementIds.couponApplyId,dom).val(code),$.get(form[0].action+\"?\"+form.serialize()+\"&\"+couponApplyButton.name+\"=\"+couponApplyButton.value,form.serialize()+\"&\"+couponApplyButton.name+\"=\"+couponApplyButton.value,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","241":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Aveda specific coupons\");var $,self=this,elementIds={couponApplyId:\"#form--offer_code--field--OFFER_CODE\",couponApplyButtonId:\"form#offer_code div.form-item.offer-code-content__form-submit > input\",bagTotalId:\"div.total.value.order-summary-content__value.order-summary-content__value--total\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),data=(dom=dom||$(document),[{method:\"logic.checkout--viewcart\",params:[{_SUBMIT:\"offer_code\",OFFER_CODE:code}]}]),data=\"JSONRPC=\"+encodeURI(JSON.stringify(data));return $(elementIds.couponApplyId,dom).val(code),$.post(\"https://www.aveda.com/rpc/jsonrpc.tmpl?dbgmethod=logic.checkout--viewcart\",data,function(jsonResp){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","243":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying avenue specific coupons\");var $,self=this,elementIds={applyFormId:\"#cart-items-form\",removeFormId:\"#cart-items-form\",couponApplyId:\"#dwfrm_cart_couponCode\",couponApplyButtonId:\"#add-coupon\",bagTotalId:\"div#primary tfoot > tr > td.order-totals-value > ins\",couponRemoveId:\"div#primary div > input.item-user-actions-remove\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return $(elementIds.couponRemoveId,dom).length?$.post(form[0].action,\"dwfrm_cart_updateCart=dwfrm_cart_updateCart&\"+$(elementIds.couponRemoveId,dom)[0].name+\"=\"+$(elementIds.couponRemoveId,dom)[0].value,function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,\"dwfrm_cart_updateCart=dwfrm_cart_updateCart&\"+$(elementIds.couponApplyId,dom)[0].name+\"=\"+$(elementIds.couponApplyId,dom)[0].value+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","262":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Backcountry specific coupons\");var $,self=this,elementIds={openPromo:\"#coupon-redemption-link\",cancelPromo:\"li > a.coupon-cancel-btn.js-coupon-cancel-btn\",couponRemoveId:\"\",couponApplyId:\"#promo-code\",couponApplyButtonId:\"#redeem-code\",bagTotalId:\"#order-total\",errorMessageId:\"#coupon-container-form > ul.messaging > li\"};function isApplyFinished(){return $(\"#saved-total\").text()||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return d.resolve(),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return setTimeout(function(){$(elementIds.openPromo)[0].click()},500),$(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId)[0].click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){$(elementIds.cancelPromo)[0].click(),d.resolve()},2e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","276":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Barnes & Noble's specific coupons\");var $,self=this,elementIds={applyFormId:\"#frmApplyCoupon\",removeFormId:\"#removeCoupon\",couponApplyId:\"#code\",couponApplyButtonId:\"#frmApplyCoupon .apply-coupon-code\",bagTotalId:\"#order_summary_table .order-summary-table__row:last-child .order-summary-table__row__column:last-child\",couponRemoveId:\"#removeCoupon .remove-offer\",doNotApplyCouponsId:\"#emptyCartMessage\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,dom)[0].name+\"=\"+$(elementIds.couponRemoveId,dom)[0].value,function(data){data=$(data);d.resolve(data)}).catch(function(error){$.get(document.location.href,function(data){d.resolve($(data))})}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=JSON.parse(data);data&&data.success&&data.redirect?$.get(data.redirect,function(newDom){d.resolve($(newDom))}):d.resolve(dom)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","284":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Bass Pro Shop's specific coupons\");var $,logInfo,self=this,elementIds={couponRemoveId:\"div#promotionApplied p a.apply\",couponApplyId:\"input#promoCode\",couponApplyButtonId:\"#PromotionCodeForm a.apply\",bagTotalId:\"h3.order.total span.charge.amount\",errorMessageId:\"div#promotionBlankError font\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var links=$(elementIds.couponRemoveId),index=1<links.length?1:0;try{links[index].click(),logInfo(\"apply remove\")}catch(x){}return self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){return $(elementIds.couponApplyId).val(code),$(\"#PromotionCodeForm\").find(\"a.apply\")[0].click(),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:function(callback){var interval=setInterval(function(){$(\"div#billing-address1.popups.billing-address\").is(\":visible\")||(clearInterval(interval),callback())},500)},scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,logInfo=fnLogInfo}}});","341":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying better world books specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div#cartOrderSummary td.text-success > a\",couponApplyId:\"div#cartOrderSummary input\",couponApplyButtonId:'div#cartOrderSummary button[type=\"button\"]',bagTotalId:\"#cartOrderSummary table tr:last-child td:last-child strong\",errorMessageId:\"div.alert-dismissible\",doNotApplyCouponsId:\"div#cartApp div.text-center > h3\"};function isRemoveFinished(){return!0}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).is(\":visible\")&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1200)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),setTimeout(function(){d.resolve()},1500),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","397":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying bodenusa specific coupons\");var $,self=this,elementIds={couponApplyId:\"#code\",couponApplyButtonId:\"#btnApplyCode\",bagTotalId:\"#shoppingBagTotalPrice\",errorMessageId:\"div#coOfferCode span\"};function applyPromoCode(code,origTotal,dom){var d=$.Deferred(),dom=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),\"https://checkout.bodenusa.com/en-US/Offer-Code?code=\"+code+\"&emptyCodeInvalid=true&_=\"+(new Date).getTime());return $.get(dom,function(data){$.get(\"https://checkout.bodenusa.com/en-US/ShoppingBag/Index?_=\"+(new Date).getTime(),function(data){data=$(data);d.resolve(data)})}),d.promise()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return applyPromoCode(\"\").then(function(result){d.resolve(result)}),d.promise()},applyPromoCode:applyPromoCode,calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","417":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying BooksAMillion's specific coupons\");var $,self=this,elementIds={applyFormId:\"#checkout\",removeFormId:\"#checkout\",couponRemoveId:'input[name=\"coupon_remove\"]',couponApplyId:'input[name=\"cpncode\"]',couponApplyButtonId:'input[name=\"apply_coupon\"]',bagTotalId:\"form#checkout td:nth-child(3) > span > strong\",errorMessageId:\"ul#error_message_content > li\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,dom)[0].name+\"=Remove+Coupon\",function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=Apply+Coupon\",function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","428":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Bowflex's specific coupons\");var $,self=this,elementIds={applyFormId:\"#cart-items-form\",removeFormId:\"#cart-items-form\",couponApplyId:\"#dwfrm_cart_couponCode\",couponApplyButtonId:\"#add-coupon\",bagTotalId:\".order-totals-table .white-space-nowrap\",couponRemoveId:'button[name=\"dwfrm_cart_coupons_i0_deleteCoupon\"]',appliedCouponId:\".bonus-item\",doNotApplyCouponsId:\"div.cart-empty\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){function removeCoupons(code,newDom){var form=$(elementIds.removeFormId,newDom);$(elementIds.couponRemoveId,newDom).val(code),form.length&&$(elementIds.couponRemoveId,newDom).length?$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,newDom)[0].name+\"=\"+$(elementIds.couponRemoveId,newDom)[0].value,function(data){data=$(data);$(elementIds.appliedCouponId,data).length?removeCoupons($(elementIds.appliedCouponId,data),data):d.resolve(data)}):d.resolve(newDom)}var d=$.Deferred();return dom=dom||$(document),$(elementIds.appliedCouponId,dom).length?removeCoupons($(elementIds.appliedCouponId,dom)):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","441":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying brookstone specific coupons\");var $,self=this,elementIds={applyFormId:\"div.cart-coupon-code form\",removeFormId:\"div.cart-coupon-code form\",couponApplyId:\"#dwfrm_cart_couponCode\",couponApplyButtonId:\"#add-coupon\",bagTotalId:\"div.order-totals-row.order-total > span.order-totals-value\",couponRemoveId:'form[name=\"dwfrm_cart\"] div > button[name=\"dwfrm_cart_coupons_i0_deleteCoupon\"]'};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,dom)[0].name+\"=\"+$(elementIds.couponRemoveId,dom)[0].value,function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","479":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Cabela's specific coupons\");var $,self=this,elementIds={couponRemoveId:\"#promoDiv .removePromoLink\",couponApplyId:\"#promoDiv #promoCode\",couponApplyButtonId:\"#promoDiv #applyPromoButton\",bagTotalId:\"#totalsTable .totalClass .total:visible\",errorMessageId:\"#promoDiv .snap-to-this.msg-error:visible\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return $(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){return $(elementIds.errorMessageId).length&&$(elementIds.errorMessageId).hide(),$(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","486":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying CafePress specific coupons\");var $,self=this,elementIds={couponApplyId:'div#stickyArea input[name=\"promoGiftCard\"]',couponApplyButtonId:\"#promoClear\",bagTotalId:\"div#stickyArea p.right-float > strong\",errorMessageId:\"div#stickyArea div.invalid-promo-code > span\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return d.resolve(),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),setTimeout(function(){d.resolve()},1500),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","489":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Calendars.com specific coupons\");var $,self=this,elementIds={applyFormId:\"div#singleColumn > form\",couponApplyId:\"input#cartCouponCodeBox\",couponApplyButtonId:\"#applyCode\",bagTotalId:\"div#cartSubTotalBox td:nth-child(3) > div#orderSummaryTotal\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom)),code=($(elementIds.couponApplyId,dom).val(code),form.serialize()+\"&/atg/commerce/promotion/CouponFormHandler.claimCoupon.x=24&/atg/commerce/promotion/CouponFormHandler.claimCoupon.y=11\"),form=form[0].action;return $.ajax({type:\"POST\",url:form,data:code,success:function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","521":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying cardpool specific coupons..\");var $,self=this,elementIds={couponRemoveId:'form[name=\"paymentForm\"] div.added-promo-code.ng-scope > button[type=\"button\"]',couponApplyId:'input[name=\"promoCode\"]',couponApplyButtonId:'div#cp-promo-code-0 > button[type=\"button\"]',bagTotalId:\"div.section.total > span.right-column.number.ng-binding\",errorMessageId:\"div#ctrl-promocode > label\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return check1=0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},500)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},2e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","528":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Carson's specific coupons\");var $,logInfo,self=this,elementIds={couponRemoveId:\"a#WC_OrderSubmitForm_PromoCode_Link\",couponApplyId:\"input#promoCode\",couponApplyButtonId:\"a#applyPromo\",bagTotalId:\".orderTotal\",errorMessageId:\"div.ui-tooltip-content span.tooltipInfoNormal\"};function isRemoveFinished(){var index=1<$(elementIds.couponRemoveId).length?1:0;return!$($(elementIds.couponRemoveId)[index]).is(\":visible\")}function triggerClick(){$(elementIds.couponApplyButtonId).trigger(\"click\")}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var links=$(elementIds.couponRemoveId),index=1<links.length?1:0;try{links[index].click(),logInfo(\"apply remove\")}catch(x){}return self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){d=$.Deferred();var event=new CustomEvent(\"change\");return $(elementIds.couponApplyId).off(\"change\",triggerClick),$(elementIds.couponApplyId).on(\"change\",triggerClick),$(elementIds.couponApplyId).val(code),document.querySelector(elementIds.couponApplyId).dispatchEvent(event),$(elementIds.couponApplyButtonId)[0].click(),setTimeout(function(){d.resolve()},3e3),d.promise()},calculateTotal:calculateTotal=function(){var totalDiv=$(elementIds.bagTotalId),total=-1;return 0<totalDiv.length&&(totalDiv=$.trim(totalDiv.text()).match(/\\d+(,\\d{1,2})?/)[0],total=parseFloat(totalDiv)),total},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,logInfo=fnLogInfo}}});","530":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Carter's specific coupons\");var $,self=this,elementIds={applyFormId:\"#applyPromos\",removeFormId:\"#removePromos\",couponRemoveId:\"input.removeCoupon.secondary-btn\",couponApplyId:\"input#dwfrm_cart_couponCode\",couponApplyButtonId:\"button#add-coupon\",bagTotalId:\"span#orderTotal\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var removeIds,d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length?(removeIds=\"\",$(elementIds.couponRemoveId,dom).each(function(){removeIds+=\"&\"+this.name+\"=\"+this.value}),$.post(form[0].action,form.serialize()+removeIds,function(data){data=$(data);d.resolve(data)})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","558":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Champs Sports specific coupons\");var $,self=this,elementIds={couponRemoveId:\"button.Link.remove\",couponApplyId:\"#input_voucherId\",couponApplyButtonId:\"form#PromoCode li:last-child > button\",bagTotalId:\"main#main div:nth-child(4) > dd\",errorMessageId:\"#PromoCodeErrors\",promoCover:\"main#main div.Toggle.Toggle--gutters.open > button\",csrfToken:\"\",doNotApplyCouponsId:\"p.empty-cart\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponApplyId).length&&$(elementIds.promoCover).click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length||0<$(elementIds.couponApplyButtonSelector).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(dom){var d=$.Deferred(),rem=(dom=dom||$(document),$(elementIds.couponRemoveId));return rem.length?(rem[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve(dom)},2500)})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),APIEndPoint=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),\"https://www.champssports.com/api/users/carts/current/vouchers?timestamp=\"+(new Date).getTime());return $.ajax({url:APIEndPoint,type:\"POST\",data:JSON.stringify({voucherId:code}),headers:{\"x-csrf-token\":elementIds.csrfToken,\"x-fl-request-id\":\"\"},contentType:\"application/json\",success:function(jsonResponse){$.ajax({type:\"GET\",url:\"https://www.champssports.com/api/users/carts/current?checkInventory=true&checkPriceVariation=true&timestamp=\"+(new Date).getTime(),success:function(jsonResp){d.resolve(jsonResp)},error:function(error){d.resolve(dom)}})},error:function(data){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),dom=dom&&dom.totalPrice?dom.totalPrice.formattedValue:(dom=$(document),$(elementIds.bagTotalId,dom).text()),total=-1;return dom&&(dom=$.trim(dom).replace(/\\$|,/g,\"\"),total=parseFloat(dom)),d.resolve({total:total}),d.promise()},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){($=jq).get(\"https://www.champssports.com/api/session?timestamp=\"+(new Date).getTime(),function(resp){elementIds.csrfToken=resp.data.csrfToken})}}});","565":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Cheapcaribbean specific coupons\");var $,self=this,elementIds={couponRemoveId:\"\",couponApplyId:\"#promoCodeInput\",couponApplyButtonId:\"#applyBtn\",bagTotalId:\"#totalValue\",errorMessageId:\"#errorDiv\",promoDiscountField:\"td#discountValue\",promoCover:\"a#changePromoA\"};function isApplyFinished(){return $(elementIds.promoDiscountField).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return d.resolve(),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.promoCover).is(\":visible\")&&$(elementIds.promoCover).click(),$(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","571":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Checks Unlimited specific coupons\");var $,self=this,elementIds={couponApplyId:'input[name=\"offerCode\"]',couponApplyButtonId:'input[value=\"APPLY\"]',bagTotalId:\" div.pull-right > div.h3\",couponRemoveId:\"div > p:nth-child(4) > a\",promoCoverId:\"span span.caret\",errorMessageId:\"div.offer-code-form > p:nth-child(1)\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponRemoveId).length&&$(elementIds.promoCoverId).click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1200)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=($(elementIds.couponApplyId).is(\":visible\")||$(elementIds.promoCoverId).click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId)[0].click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1200)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","590":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying christopherandbanks specific coupons\");var $,self=this,elementIds={removeFormId:\"#cart-items-form\",couponApplyId:\"#dwfrm_billing_couponCode\",couponApplyButtonId:\"#addcoupon\",bagTotalId:\"div#secondary td.order-value.value\",couponRemoveId:\"button.promo-delete-link\",csrfToken:'input[name=\"csrf_token\"]',doNotApplyCouponsId:\"div.checkout-tab\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,dom)[0].name+\"=x\",function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),code=(dom=dom||$(document),$(elementIds.applyFormId,dom),$(elementIds.couponApplyId,dom).val(code),\"https://www.christopherandbanks.com/on/demandware.store/Sites-CBKB2C-Site/default/Cart-AddCouponJson?couponCode=\"+code+\"&format=ajax&isGiftRelated=true&csrf_token=\"+$(elementIds.csrfToken,dom)[0].value);return $.post(code,function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","599":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Claire's specific coupons\");var $,self=this,elementIds={couponRemoveId:\"button.cart-v2-coupon-remove > span\",couponApplyId:\"input#dwfrm_cart_couponCode\",couponApplyButtonId:\"button#cart-v2-add-coupon\",bagTotalId:\"div#cart-v2-order-totals-body > div.cart-v2-actions > div > span:nth-child(2)\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),$(elementIds.couponRemoveId,dom).length?$.ajax({type:\"POST\",url:\"https://www.claires.com/us/shopping-cart-coupon/\",data:\"dwfrm_cart_coupons_i0_deleteCoupon=Remove\",success:function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred();return dom=dom||$(document),$.ajax({type:\"GET\",url:\"https://www.claires.com/on/demandware.store/Sites-clairesNA-Site/en_US/Cart-CheckCoupon?couponCode=\"+code+\"&requesttype=ajax\",success:function(jsonResp){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","607":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Clearly.ca specific coupons\");var $,elementIds={couponApplyId:\"div#payment-coupon-wrapper input.cart-page-coupon\",couponApplyButtonId:\"div#payment-coupon-wrapper div.co-coupon-code-submit\",bagTotalId:\"#checkout-cart-total\",errorMessageId:\"div#payment-coupon-wrapper div.coupon-error\",doNotApplyCouponsId:\"#checkout-cart-empty-message\",promoCoverCloseId:\"div.dropdown-trigger.active\",promoCoverOpenId:\"div#co-coupon-container span.co-triangle-divider\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return d.resolve(),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.promoCoverCloseId).length||$(elementIds.promoCoverOpenId).click(),$(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),setTimeout(function(){d.resolve()},1500),d.promise()},calculateTotal:this.calculateTotal,onReady:this.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){($=jq)(elementIds.promoCoverCloseId).length||$(elementIds.promoCoverOpenId).click(),$(elementIds.couponApplyId).val(\"invaid\"),$(elementIds.couponApplyButtonId).click()},couponLimit:0}});","620":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying coastal specific coupons\");var $,self=this,elementIds={couponApplyId:\"div#payment-coupon-wrapper input.cart-page-coupon\",couponApplyButtonId:\"div#payment-coupon-wrapper div.small-3.medium-3.large-2.columns.no-padding-left.cart-apply-coupon > div\",bagTotalId:\"#checkout-cart-total\"};function isRemoveFinished(){return!1===$(\"#co-discount-total\").is(\":visible\")}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),$(\"#co-discount-total\").is(\":visible\")?($(elementIds.couponApplyId).val(\"invalid\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},2e3)})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred();return dom=dom||$(document),$.ajax({type:\"POST\",url:\"https://www.coastal.com/dwr/exec/shoppingCartAjaxController.updateCoupon.dwr\",data:\"callCount=1\\nc0-scriptName=shoppingCartAjaxController\\nc0-methodName=updateCoupon\\nc0-param0=null:null\\nc0-param1=string:\"+code+\"\\nc0-param2=string:\\nc0-param3=boolean:false\\nxml=true\",contentType:\"text/plain\",success:function(jsonResp){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","629":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Cole Haan specific coupons\");var $,self=this,elementIds={couponRemoveId:\"button.remove-coupon\",couponApplyId:\"#couponCode\",couponApplyButtonId:\"button.promo-code-btn\",bagTotalId:\"p.grand-total-sum\",promoAfterRemove:\"button.delete-coupon-confirmation-btn\",doNotApplyCouponsId:\"div.container.cart.cart-page div div.col-12.text-center h1\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.promoAfterRemove).is(\":visible\")&&$(elementIds.promoAfterRemove).click(),$(elementIds.couponRemoveId).length&&($(elementIds.couponRemoveId)[0].click(),setTimeout(function(){$(elementIds.promoAfterRemove).is(\":visible\")&&$(elementIds.promoAfterRemove).click()},750)),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),setTimeout(function(){d.resolve()},1500),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","649":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying contactsdirect specific coupons\");var $,self=this,elementIds={applyFormId:\"#cart_promo\",couponRemoveId:\"div#promo-box a\",couponApplyId:\"#promoCode\",couponApplyButtonId:\"#addPromo\",bagTotalId:\"div#cart div.col-xs-3.cart_amount.price-align.insurance_amount.total\",errorMessageId:\"#cart_promo_error\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),rem=$(elementIds.couponRemoveId,dom);return rem.length?$.get(rem[0].href,function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize(),function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","652":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying converse specific coupons\");var $,self=this,elementIds={couponRemoveId:\"#remove-coupon\",couponApplyId:\"#dwfrm_cart_couponCode\",couponApplyButtonId:\"#add-coupon\",bagTotalId:\"div.order-totals span.value--highlight\",errorMessageId:\"p.coupon-entry__error\",errorButtonId:\"#clear-coupon-error\",doNotApplyCouponsId:\"div.cart__empty\"};function isRemoveFinished(){return 0==$(elementIds.couponRemoveId).is(\":visible\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).is(\":visible\")}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).is(\":visible\")&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){$(elementIds.errorMessageId).is(\":visible\")&&$(elementIds.errorButtonId).click(),setTimeout(function(){d.resolve()},1200)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","654":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Cookies kids specific coupons\");var $,self=this,elementIds={couponRemoveId:\"\",couponApplyId:\"input#MasterMiddle_CartListView1_wf_CouponCode\",couponApplyButtonId:\"div#apply-button\",bagTotalId:\"span#MasterMiddle_CartListView1_lblTotal_Order\",errorMessageId:\"span#MasterMiddle_CartListView1_lblCouponMessage\"};function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return d.resolve(),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","661":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying // CostPlus World Market's specific coupons\");var $,self=this,elementIds={applyFormId:\"#mainForm\",removeFormId:\"\",couponApplyId:\"#sourceCode\",couponApplyButtonId:\".sourceCodeApplyBtn\",bagTotalId:\"#EstTaxShipItemTable_estBasketTotal\",couponRemoveId:\".codeRemove\",couponCodeForRemove:\"div#codeApplied span:nth-child(2)\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){function remove(code,newDom){var form,removeUrl,domCode;0<$(elementIds.couponRemoveId,dom).length?(form=$(elementIds.applyFormId,dom),removeUrl=document.location.origin+\"/wmBasket.do?method=removeSourceCode\",domCode=$(elementIds.couponCodeForRemove,dom).text().replace(\"remove\",\"\"),$.post(removeUrl,{sourceCode:domCode}).done(function(data){var data=$(data);$(elementIds.appliedCouponId,data).length?remove($(elementIds.couponRemoveId,dom)):(data=form[0].action,$.get(data,function(innerdata){innerdata=$(innerdata);d.resolve(innerdata)}))}).catch(function(jqXHR,textStatus,errorThrown){console.log(\"Coupon removal failed. Error:\"+errorThrown)})):d.resolve(dom)}var d=$.Deferred();return dom=dom||$(document),$(elementIds.couponRemoveId,dom).length?remove($(elementIds.couponRemoveId,dom)):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom)),dom=($(elementIds.couponApplyId,dom).val(code),document.location.origin+\"/wmBasket.do?method=applySourceCode\");return $.post(dom,{sourceCode:code},function(data){var mainUrl=form[0].action;$.get(mainUrl,function(innerdata){innerdata=$(innerdata);d.resolve(innerdata)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","679":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Crate & Barrel specific coupons\");var $,self=this,elementIds={couponRemoveId:\"button.button-remove-promo\",couponApplyId:\"input#txtPromoCode\",couponApplyButtonId:\"button#applyPromo\",bagTotalId:\"li.est-total-row > span:nth-child(2)\",errorMessageId:\"div#errorMessage\"};function isRemoveFinished(){return!1===$(elementIds.couponRemoveId).is(\":visible\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).is(\":visible\")&&$(elementIds.couponRemoveId).click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},700)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},700)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","680":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Cratejoy specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div#checkout-cart a\",couponApplyId:\"div#checkout-cart input\",couponApplyButtonId:\"div#checkout-cart div.checkout-cart-coupon-group > a\",bagTotalId:\"div.checkout-cart-line-value.cart-total\",errorMessageId:\"div#checkout-cart div.checkout-cart-coupon-error\",appliedCouponSection:\"div#checkout-cart div.checkout-cart-discounts.checkout-hidden-md >div >div >div\",promoCover:\"div#checkout-cart div.checkout-coupon-activate > a\"};function isRemoveFinished(){return!1===$(elementIds.appliedCouponSection).is(\":visible\")}function isApplyFinished(){return $(elementIds.appliedCouponSection).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.appliedCouponSection).is(\":visible\")&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},500)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=($(elementIds.promoCover).is(\":visible\")&&$(elementIds.promoCover).click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId)[0].click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","685":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Cricut specific coupons\");var $,self=this,elementIds={couponRemoveId:\"button.action-cancel\",couponApplyId:\"input#discount-code\",couponApplyButtonId:'form#discount-form button[type=\"submit\"]',bagTotalId:\"div#opc-sidebar strong > span\",errorMessageId:\"div.message.message-error > div\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId).click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},3e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},3300)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","745":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Deluxe Business Products specific coupons\");var $,self=this,elementIds={couponRemoveId:\"a#promoidCancel\",couponApplyId:\"#promoid\",couponApplyButtonId:\"a#buttonGo\",bagTotalId:\"div#yourShoppingCart div.wrapper.total-line > div.col-1-of-5.no-gut\",errorMessageId:\"form#pscForCartForm div.errorMessageBox\"};function isRemoveFinished(){return!$(elementIds.couponRemoveId).is(\":visible\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).is(\":visible\")}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId)[0].click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","753":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying DermStore specific coupons\");var $,self=this,elementIds={couponApplyId:\"form#promoForm input\",couponApplyButtonId:'form#promoForm button[type=\"submit\"]',bagTotalId:\"table#subTotalTable td.updatePrice\",errorMessageId:\"table#subTotalTable p.alert.alert-danger.displayPromoError\",promoCoverId:\"table#subTotalTable tr:nth-child(3) > td.border-right > button\",appliedElementID:\"table#subTotalTable tr:nth-child(3) > td.border-right > button\",doNotApplyCouponsId:\"div#checkoutSteps > h1\"};function isApplyFinished(){return 0<$(elementIds.appliedElementID).length||$(elementIds.errorMessageId).text()}function applyPromoCode(code){var d=$.Deferred(),input=(0==$(elementIds.couponApplyId).length&&$(elementIds.promoCoverId).click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},900)}),d.promise()}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponApplyId).length&&$(elementIds.promoCoverId).click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return applyPromoCode(\"invld\").then(function(){d.resolve()}),d.promise()},applyPromoCode:applyPromoCode,calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","767":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Destination XL specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div#summaryComponentRoot u\",couponApplyId:\"#summaryComponentRoot div.mat-input-flex.mat-form-field-flex div input\",couponApplyButtonId:\"div#summaryComponentRoot button\",bagTotalId:\"div#summaryComponentRoot p:last-child > span\",errorMessageId:\"#msgRoot div\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","779":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Dicks sporting goods specific coupons\");var $,self=this,elementIds={couponRemoveId:\"a#promotion_1 > span\",couponApplyId:\"#promoCode\",couponApplyButtonId:\"#WC_PromotionCodeDisplay_links_1\",bagTotalId:\"td#WC_SingleShipmentOrderTotalsSummary_td_13 > span\",errorMessageId:\"#errorMsg\",promoCoverOpen:\"div#promoCodeAccordion h5 > span\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}).catch(function(error){d.resolve()}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).removeClass(\"-inactive\"),$(elementIds.couponApplyButtonId)[0].click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}).catch(function(error){d.resolve()}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","788":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying DiscountContactLenses.com specific coupons\");var $,self=this,elementIds={couponApplyId:'input[name=\"couponCode\"]',couponApplyButtonId:'div#scDetails div.discount-entry > form > button[type=\"submit\"]',bagTotalId:\"span.shopping-cart-details__cart-subtotal-price\",couponRemoveId:\"button.discount-remove\",__RequestVerificationToken:'form.discount-code-form input[name=\"__RequestVerificationToken\"]',token:'#shoppingcart-index input[name=\"__RequestVerificationToken\"]'};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),$(elementIds.couponRemoveId,dom).length?$.ajax({type:\"POST\",url:\"https://www.discountcontactlenses.com/api/CouponCode/Remove\",data:\"__RequestVerificationToken=\"+$(elementIds.token)[0].value,headers:{__requestverificationtoken:$(elementIds.token)[0].value,\"x-newrelic-id\":\"XQEGVVFUGwECXVdUDwYH\"},success:function(jsonResp){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),code=(dom=dom||$(document),\"__RequestVerificationToken=\"+$(elementIds.__RequestVerificationToken,dom).val()+\"&couponCode=\"+code);return $.ajax({type:\"POST\",url:\"https://www.discountcontactlenses.com/api/CouponCode/Add\",data:code,headers:{__requestverificationtoken:$(elementIds.__RequestVerificationToken,dom).val(),\"x-newrelic-id\":\"XQEGVVFUGwECXVdUDwYH\"},success:function(jsonResp){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","790":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying discountschoolsupply specific coupons\");var $,self=this,elementIds={applyFormId:\"#applyVoucherForm\",removeFormId:\"#removeVoucherForm0\",couponApplyId:\"#js-voucher-code-text\",couponApplyButtonId:\"#js-voucher-apply-btn\",bagTotalId:\"div.item-row.grand-total > div:last-child\",couponRemoveId:\"a.remove-btn.js-submitform-link\",doNotApplyCouponsId:\"div#dy-cart-empty p\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,form.serialize(),function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize(),function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","797":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Disney's specific coupons\");var $,self=this,elementIds={applyFormId:\"#promoCodeForm\",couponRemoveId:\"div.promo-code__item\",couponApplyId:\"#couponCode\",couponApplyButtonId:\"button.promo-code-btn \",bagTotalId:\"div.cart-summary__value.grand-total\",errorMessageId:\"#invalidCouponCode\",promoCodeFormId:\"#promoCodeForm\",couponErrorClass:\"is-invalid\",doNotApplyCouponsId:\"div.cart--is-empty\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();if(dom=dom||$(document),$(elementIds.couponRemoveId,dom).length)for(var i=0;i<$(elementIds.couponRemoveId,dom).length;i++){var APIEndpoint=window.location.origin+$(elementIds.couponRemoveId,dom)[i].dataset.action+\"?code=\"+$(elementIds.couponRemoveId,dom)[i].dataset.code+\"&uuid=\"+$(elementIds.couponRemoveId,dom)[i].dataset.uuid;$.ajax({type:\"GET\",url:APIEndpoint,contentType:\"application/json\",success:function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}})}else d.resolve(dom);return d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.ajax({type:\"GET\",url:form[0].action+\"?\"+form.serialize(),success:function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","847":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying EastBay specific coupons\");var $,self=this,elementIds={couponRemoveId:\"button.Link.remove\",couponApplyId:\"#input_text_voucherId\",couponApplyButtonId:\"form#PromoCode li:nth-child(3) > button\",bagTotalId:\"main#main div:nth-child(4) > dd\",errorMessageId:\"#PromoCodeErrors\",promoCover:\"div.c-checkout-promo-code > div.Toggle.Toggle--gutters.open > button\",csrfToken:\"\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponApplyId).length&&$(elementIds.promoCover).click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length||0<$(elementIds.couponApplyButtonSelector).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(dom){var d=$.Deferred(),rem=(dom=dom||$(document),$(elementIds.couponRemoveId));return rem.length?(rem[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve(dom)},2500)})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),APIEndPoint=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),\"https://www.eastbay.com/api/users/carts/current/vouchers?timestamp=\"+(new Date).getTime());return $.ajax({url:APIEndPoint,type:\"POST\",data:JSON.stringify({voucherId:code}),headers:{\"x-csrf-token\":elementIds.csrfToken,\"x-fl-request-id\":\"\"},contentType:\"application/json\",success:function(jsonResponse){$.ajax({type:\"GET\",url:\"https://www.eastbay.com/api/users/carts/current?checkInventory=true&checkPriceVariation=true&timestamp=\"+(new Date).getTime(),success:function(jsonResp){d.resolve(jsonResp)},error:function(error){d.resolve(dom)}})},error:function(data){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),dom=dom&&dom.totalPrice?dom.totalPrice.formattedValue:(dom=$(document),$(elementIds.bagTotalId,dom).text()),total=-1;return dom&&(dom=$.trim(dom).replace(/\\$|,/g,\"\"),total=parseFloat(dom)),d.resolve({total:total}),d.promise()},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){($=jq).get(\"https://www.eastbay.com/api/session?products=&timestamp=\"+(new Date).getTime(),function(resp){elementIds.csrfToken=resp.data.csrfToken})}}});","857":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying ebay specific coupons\");var $,self=this,elementIds={couponApplyId:\"#redemptionCode\",couponApplyButtonId:'div#mainContent fieldset > div > button[type=\"submit\"]',bagTotalId:\"div#mainContent tr:last-child > td.amount > span\",couponRemoveId:'span.checkbox-wrapper.field input[type=\"checkbox\"]',srt:'#csrf-form-auto-address input[name=\"srt\"]',appliedCouponId:\"div#mainContent li > span > label\",errorMessageId:\"div#redemptionCode-error\"};function isRemoveFinished(){return!1===$(elementIds.couponRemoveId).is(\":checked\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":checked\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){return!0},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId).each(function(){$(elementIds.couponRemoveId).is(\":checked\")&&setTimeout(function(){$(elementIds.couponRemoveId).click()},500)}),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},2500)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).prop(\"disabled\",!1),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},3e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","866":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying edible arrangements specific coupons new\");var $,self=this,elementIds={couponApplyId:\".txtRewardCoupon\",couponApplyButtonId:\".btnApplyRewardCoupon\",bagTotalId:\"td > span.boldText + span\",errorMessageId:\"span.spnVldMsg\",appliedElementId:'tr[id*=\"rptSale\"] td.boldText span',doNotApplyCouponsId:\"#ctl00_cpBody_fEmpty\"};function isApplyFinished(){return $(elementIds.errorMessageId).is(\":visible\")||$(elementIds.appliedElementId).is(\":visible\")}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return d.resolve(),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","923":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Etsy specific coupons\");var $,self=this,elementIds={couponRemoveId:\"span.wt-icon--smallest-xs\",couponApplyId:\"div.wt-validation > div.wt-input-btn-group > input\",couponApplyButtonId:\"button.wt-input-btn-group__btn--filled\",bagTotalId:\"div#multi-shop-cart-list h1 > span > span.currency-value\",errorMessageId:\"div.wt-validation__message > p\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId).click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},900)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1200)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","942":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Expedia's specific coupons\");var $,logInfo,self=this,elementIds={couponRemoveId:\".promo-code .applied a\",couponApplyId:\"label.manual-promo input\",couponApplyButtonId:\"div.promo-actions input\",bagTotalId:\"div.content dl dd.price:last-child\",errorMessageId:\"label.invalid.error span.invalid\"};function isRemoveFinished(){var index=1<$(elementIds.couponRemoveId).length?1:0;return!$($(elementIds.couponRemoveId)[index]).is(\":visible\")}function triggerClick(){$(elementIds.couponApplyButtonId).trigger(\"click\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var links=$(elementIds.couponRemoveId),index=1<links.length?1:0;try{links[index].click(),logInfo(\"apply remove\")}catch(x){}return self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){var event=new CustomEvent(\"change\");return $(elementIds.couponApplyId).off(\"change\",triggerClick),$(elementIds.couponApplyId).on(\"change\",triggerClick),$(elementIds.couponApplyId).val(code),document.querySelector(elementIds.couponApplyId).dispatchEvent(event),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,logInfo=fnLogInfo}}});","948":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Express specific coupons\");var $,self=this,elementIds={couponRemoveId:'button[data-action=\"removePromo\"]',couponApplyId:'input[name=\"promocode\"]',couponApplyButtonId:'div[data-line-item=\"addPromoCode\"] span',bagTotalId:\"div#content span:nth-child(2).bodyPrimaryActive\",errorMessageId:\"div.labelError\",promoCoverId:'div[data-line-item=\"addPromoCode\"] a',doNotApplyCouponsId:\"div#content section.grid--no-wrap > div > section > div > h2\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponApplyId).length&&$(elementIds.promoCoverId).click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=(0==$(elementIds.couponApplyId).length&&$(elementIds.promoCoverId)[0].click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId)[0].click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","950":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Extended Stay America specific coupons\");var $,self=this,elementIds={applyFormId:\"#MastertemplateForm\",couponApplyId:\"#cpd_mtcph_btcph_ReservationInfo_7_txtPromotionCode\",couponApplyButtonId:\"#cpd_mtcph_btcph_ReservationInfo_7_imgBtnRecalculate\",bagTotalId:\"#cpd_mtcph_btcph_ReservationInfo_7_lblGrandTotal\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve($(document)),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),APIEndPoint=(dom=dom||$(document),$(elementIds.applyFormId,dom),$(elementIds.couponApplyId,dom).val(code),\"https://www.extendedstayamerica.com/Usercontrols/AjaxHelper.asmx/ValidatePromo?rnd=\"+Math.random()),APIEndPoint1=\"https://www.extendedstayamerica.com/Usercontrols/AjaxHelper.asmx/ValidatePromoWithLogin?rnd=\"+Math.random(),APIEndPoint2=\"https://www.extendedstayamerica.com/Usercontrols/AjaxHelper.asmx/ValidatePromoWithLoggedInEmail?rnd=\"+Math.random(),encodeData={PromoCode:code},newrelic=\"VQUGVlNTDhAIUFhWDwUDXw==\";return $.ajax({url:APIEndPoint,type:\"POST\",data:JSON.stringify(encodeData),contentType:\"application/json; charset=UTF-8\",headers:{\"x-newrelic-id\":newrelic},success:function(jsonResponse){$.ajax({url:APIEndPoint1,type:\"POST\",data:JSON.stringify(encodeData),contentType:\"application/json; charset=UTF-8\",headers:{\"x-newrelic-id\":newrelic},success:function(jsonResponse){$.ajax({url:APIEndPoint2,type:\"POST\",data:JSON.stringify(encodeData),contentType:\"application/json; charset=UTF-8\",headers:{\"x-newrelic-id\":newrelic},success:function(jsonResponse){var form=$(elementIds.applyFormId,dom);$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);d.resolve(data)})}})}})}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","955":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying FabFitFun specific coupons\");var $,self=this,elementIds={couponApplyId:\"input#coupontext\",couponApplyButtonId:\"button#refreshcoupon\",bagTotalId:\"span#vtotalprice\",appliedElementID:\"div.gtxdollar\",errorMessageId:\"span#couponmessage > span\"};function isApplyFinished(){return $(elementIds.errorMessageId).is(\":visible\")||$(elementIds.appliedElementID).is(\":visible\")}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return d.resolve(),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","965":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Famous Footwear specific coupons\");var $,self=this,elementIds={applyFormId:\"#addPromoCodeForm\",couponRemoveId:\"\",couponApplyId:\"#PromoCode\",couponApplyButtonId:\"#submitPromoCode\",bagTotalId:\"div#cartContent div.order-summary-total.major.js-order-total > div.right\",errorMessageId:\"form#addPromoCodeForm div.error-message > span\"};function applyPromoCode(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&X-Requested-With= XMLHttpRequest\",function(data){var original,data=$(data);$(elementIds.errorMessageId,data).text()&&(original=$(\"div.order-summary-total.major.js-order-total\",data).attr(\"data-order-total\"),$(elementIds.bagTotalId,data).text(original)),d.resolve(data)}),d.promise()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return applyPromoCode(\"invalid\",dom=dom||$(document)).then(function(result){d.resolve(result)}),d.promise()},applyPromoCode:applyPromoCode,calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","993":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Fingerhut's specific coupons\");var $,logInfo,self=this,elementIds={couponRemoveId:\"a#promoCodeViewPromoCodeRemove\",couponApplyId:\"input#promoCodeViewPromoCodeField\",couponApplyButtonId:\"button#promoCodeViewPromoCodeApply\",bagTotalId:\"#checkoutOrderSummaryOrderTotal\",errorMessageId:\"p#promoCodeViewAlert2Message\"};function isRemoveFinished(){var index=2<$(elementIds.couponRemoveId).length?1:0;return!$($(elementIds.couponRemoveId)[index]).is(\":visible\")}function triggerClick(){$(elementIds.couponApplyButtonId).trigger(\"click\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var links=$(elementIds.couponRemoveId),index=1<links.length?1:0;try{links[index].click(),logInfo(\"apply remove\")}catch(x){}return self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){var event=new CustomEvent(\"change\");return $(elementIds.couponApplyId).off(\"change\",triggerClick),$(elementIds.couponApplyId).on(\"change\",triggerClick),$(elementIds.couponApplyId).val(code),document.querySelector(elementIds.couponApplyId).dispatchEvent(event),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,logInfo=fnLogInfo}}});","1025":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Foot Locker specific coupons\");var $,self=this,elementIds={couponRemoveId:\"button.Link.remove\",couponApplyId:\"#input_text_voucherId\",couponApplyButtonId:\"form#PromoCode li:nth-child(3) > button\",bagTotalId:\"main#main div:nth-child(4) > dd\",errorMessageId:\"#PromoCodeErrors\",productCodes:\"\",productUrlId:\"h2.c-product--listHeader a\",promoCover:\"div.c-checkout-promo-code > div.Toggle.Toggle--gutters.open > button\",csrfToken:\"\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponApplyId).length&&$(elementIds.promoCover).click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length||0<$(elementIds.couponApplyButtonSelector).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(dom){var d=$.Deferred(),rem=(dom=dom||$(document),$(elementIds.couponRemoveId));return rem.length?(rem[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve(dom)},2500)})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),APIEndPoint=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),\"https://www.footlocker.com/api/users/carts/current/vouchers?timestamp=\"+(new Date).getTime());return $.ajax({url:APIEndPoint,type:\"POST\",data:JSON.stringify({voucherId:code}),headers:{\"x-csrf-token\":elementIds.csrfToken,\"x-fl-request-id\":\"\"},contentType:\"application/json\",success:function(jsonResponse){$.ajax({type:\"GET\",url:\"https://www.footlocker.com/api/users/carts/current?checkInventory=true&checkPriceVariation=true&timestamp=\"+(new Date).getTime(),success:function(jsonResp){d.resolve(jsonResp)},error:function(error){d.resolve(dom)}})},error:function(data){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),dom=dom&&dom.totalPrice?dom.totalPrice.formattedValue:(dom=$(document),$(elementIds.bagTotalId,dom).text()),total=-1;return dom&&(dom=$.trim(dom).replace(/\\$|,/g,\"\"),total=parseFloat(dom)),d.resolve({total:total}),d.promise()},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){($=jq).get(\"https://www.footlocker.com/api/session?products=&timestamp=\"+(new Date).getTime(),function(resp){elementIds.csrfToken=resp.data.csrfToken})}}});","1030":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying FOREVER21 specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div#divPromoInfo a > span\",couponApplyId:\"input#txt_promoCode\",couponApplyButtonId:\"button#btnPromoApply\",bagTotalId:\"li#grandTotalRight\",errorMessageId:\"div#err_promoCode\"};function isRemoveFinished(){return!1===$(elementIds.couponRemoveId).is(\":visible\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){return $(elementIds.couponRemoveId).is(\":visible\")&&$(elementIds.couponRemoveId)[0].click(),self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","1068":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying FromYouFlowers specific coupons\");var $,self=this,elementIds={couponRemoveId:'form[name=\"CouponForm\"] a',couponApplyId:\"#refcode\",couponApplyButtonId:\".applyDiscount\",bagTotalId:\"div.grid_2.alpha.rightJustify > span > strong\",errorMessageId:'form[name=\"CouponForm\"] > div.ErrorMessage',doNotApplyCouponsId:\"div.cartBottom > p\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return d.resolve(),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),code=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),{disc_code:code,cmd:$(elementIds.couponApplyButtonId,dom)[0].value});return $.ajax({url:\"https://www.fromyouflowers.com/cart.htm\",type:\"POST\",data:code,success:function(jsonResponse){d.resolve(jsonResponse)}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","1157":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying GoDaddy specific coupons\");var $,elementIds={couponRemoveId:\"div#app div.promo-code > div\",couponOpenPromo:'div#app div.promo-add-link > button[type=\"button\"]',couponApplyId:\"#enterPromoCode\",couponApplyButtonId:'div#Haveapromocode-modal-dialog div.modal-body > button[type=\"button\"]',bagTotalId:\"div#app div.total-banner > div\",errorMessageId:\"div#Haveapromocode-modal-dialog small\"};return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){var elInput,elButton;return $(elementIds.couponOpenPromo).click(),elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length||0<$(elementIds.couponApplyButtonSelector).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(dom){var d=$.Deferred();return $(elementIds.couponRemoveId,dom).length?$.ajax({url:\"https://cart.godaddy.com/api/basket\",type:\"PATCH\",headers:{\"X-Private-Label-Id\":\"1\"},data:JSON.stringify({itemSourceCode:\" \"}),contentType:\"application/json;charset=UTF-8\",success:function(jsonResponse){$.get(\"https://cart.godaddy.com/api/basket?r=\"+Math.floor(1e9*Math.random()+1),function(jsonResponse1){d.resolve(jsonResponse1)})}}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),dom=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),{itemSourceCode:code});return $.ajax({url:\"https://cart.godaddy.com/api/basket\",type:\"PATCH\",headers:{\"X-Private-Label-Id\":\"1\"},data:JSON.stringify(dom),contentType:\"application/json;charset=UTF-8\",success:function(jsonResponse){$.get(\"https://cart.godaddy.com/api/basket?r=\"+Math.floor(1e9*Math.random()+1),function(jsonResponse1){d.resolve(jsonResponse1)})}}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),dom=dom&&dom.pricing.subtotal?dom.pricing.subtotal/1e6:(dom=$(document),$(elementIds.bagTotalId,dom).text()),total=-1;return dom&&(dom=$.trim(dom).replace(/\\$|,/g,\"\"),total=parseFloat(dom)),d.resolve({total:total}),d.promise()},onReady:this.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","1187":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Groupon's specific coupons\");var $,logInfo,self=this,elementIds={couponRemoveId:\"\",couponApplyId:'input[name=\"discount-code\"]',couponApplyButtonId:\"button.btn-invert.apply\",bagTotalId:\"span.five.columns.small-grid-one.ltr.final-amount\",errorMessageId:\"li.parsley-required\"};function isRemoveFinished(){var index=1<$(elementIds.couponRemoveId).length?1:0;return!$($(elementIds.couponRemoveId)[index]).is(\":visible\")}function triggerClick(){$(elementIds.couponApplyButtonId).trigger(\"click\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var links=$(elementIds.couponRemoveId),index=1<links.length?1:0;try{links[index].click(),logInfo(\"apply remove\")}catch(x){}return self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){var event=new CustomEvent(\"change\");return $(\"a.promo\").trigger(\"click\"),$(\"a.promo\").click(),$('input[name=\"discount-code\"]').val(code),$(\".btn-invert.apply\").attr(\"disabled\",!1),$('input[name=\"discount-code\"]').trigger(\"change\"),$(elementIds.couponApplyId).on(\"change\",triggerClick),document.querySelector(elementIds.couponApplyId).dispatchEvent(event),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,logInfo=fnLogInfo}}});","1192":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying GuitarCenter's specific coupons\");var $,self=this,elementIds={applyFormId:\"#couponForm\",removeFormId:\"#removeCouponForm\",couponApplyId:\"input#inputtedCouponCode\",couponApplyButtonId:\"input#couponSubmit\",bagTotalId:\"div#shoppingCartForm dt > span.orderTotalInner\",couponRemoveId:\"div#shoppingCartForm dd > a > span\",errorMessageId:\"form#updateShoppingCartForm div.boxSegment.itemSummary > ul > li\",couponClaimCode:'input[name=\"/atg/commerce/promotion/CouponFormHandler.couponClaimCode\"]'};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var appliedCoupon,d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?(appliedCoupon=$(\"div#shoppingCartForm dd > a\",dom)[0].rel,$(elementIds.couponClaimCode,dom).val(appliedCoupon),$.post(form[0].action,form.serialize(),function(data){data=$(data);d.resolve(data)})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),code=code.toLowerCase(),$(elementIds.applyFormId,dom));return $(elementIds.couponClaimCode,dom).val(code),$(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize(),function(data){var result=$(data);setTimeout(function(){d.resolve(result)},500)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","1198":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying haband specific coupons\");var $,self=this,elementIds={couponRemoveId:\"#promoCodeViewPromoCodeRemove\",couponApplyId:\"#promoCodeViewPromoCodeField\",couponApplyButtonId:\"#promoCodeViewPromoCodeApply\",bagTotalId:\"#checkoutOrderSummaryOrderTotal\",errorMessageId:\"#promoCodeViewAlert2\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return $(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).is(\":visible\")}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1215":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Hannaandersson specific coupons\");var $,self=this,elementIds={applyFormId:\"#cart-items-form\",removeFormId:\"#cart-items-form\",couponApplyId:\"#dwfrm_cart_couponCode\",couponApplyButtonId:\"button#add-coupon\",bagTotalId:\"form#cart-items-form td.order-value.scp-order-total\",couponRemoveId:'table#cart-table td.scp-item-image.is-coupon > button[type=\"submit\"]'};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),$.get(\"https://www.hannaandersson.com/cart\",function(data){var data=$(data),form=$(elementIds.removeFormId,data);form.length&&$(elementIds.couponRemoveId,data).length?$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,data)[0].name+\"=\"+$(elementIds.couponRemoveId,data)[0].value,function(data){data=$(data);d.resolve(data)}):d.resolve(data)}),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){$.get(\"https://www.hannaandersson.com/cart\",function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1254":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){var $,logInfo;console.log(\"applying hilton's specific coupons\");return{removeCoupon:function(){logInfo(\"faking remove coupon\")},checkCouponError:function(){},showErrorContent:function(isVisible){},applyPromoCode:function(code){$(\"#i-promo\").val(code),$(\"#btn-promo_msk\").trigger(\"click\")},calculateTotal:function(){var totalDiv=$(\"#bagTotal\");return 0<totalDiv.length?(totalDiv=(totalDiv=$.trim(totalDiv.text())).replace(/\\$|,/g,\"\"),{total:parseFloat(totalDiv)}):{total:-1}},scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,logInfo=fnLogInfo}}});","1300":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Hotels.com specific coupons\");var $,self=this,elementIds={couponRemoveId:\"button#coupon-code-remove-btn\",couponApplyId:\"#coupon-code-field\",couponApplyButtonId:\"#coupon-code-apply-btn\",bagTotalId:\"div#financial-details-total-price\",errorMessageId:\"#coupon-code-error-message\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).is(\":visible\")}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId).click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},500)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:function(){var total,totalDiv=$(elementIds.bagTotalId);return 0<totalDiv.length&&(totalDiv=(totalDiv=$.trim(totalDiv.text())).replace(/[^\\d.-]/g,\"\"),total=parseFloat(totalDiv)),total},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1314":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Hudson's Bay specific coupons\");var $,self=this,elementIds={couponRemoveId:\"a.jsRemovePromo\",couponApplyId:\"#promoCodeEntry\",couponApplyButtonId:\"#promoApply\",bagTotalId:\"#jsVal-grandTotal\",errorMessageId:\"div#ui-id-3 > p\",errorPromoButton:\"div.checkout-modal-dialog >  div > button\",doNotApplyCouponsId:\"\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).is(\":visible\")}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){$(elementIds.errorMessageId).is(\":visible\")&&$(elementIds.errorPromoButton).click(),setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1338":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Indigo Books & Music specific coupons\");var $,self=this,elementIds={couponApplyId:\"#promo-code__input\",couponApplyButtonId:\"button.promo-code__buttons\",bagTotalId:\"div.subtotal__value\",errorMessageId:\"span.promo-code__status-text\",doNotApplyCouponsId:\"h2.cart-page-default__title\"};function isRemoveFinished(){return!1===$(elementIds.couponApplyId).prop(\"disabled\")}function isApplyFinished(){return $(elementIds.couponApplyId).prop(\"disabled\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponApplyId).prop(\"disabled\")&&$(elementIds.couponApplyButtonId).click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}).catch(function(error){d.resolve()}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1200)}).catch(function(error){d.resolve()}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1340":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Ink Cartridges specific coupons\");var $,self=this,elementIds={couponRemoveId:\"form#discount-coupon-cancel-form-1 i\",couponApplyId:\"input#coupon_code\",couponApplyButtonId:\"button#btn-apply-coupon\",bagTotalId:\"table#shopping-cart-totals-table strong > span\",errorMessageId:\"div#mobile-wrap div:nth-child(5) > ul > li > ul > li > span\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),setTimeout(function(){self.waitFor(isApplyFinished).then(function(){d.resolve()})},1500),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1349":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Intermixonline's specific coupons\");var $,self=this,elementIds={applyFormId:\"#cart-items-form\",removeFormId:\"#cart-items-form\",couponApplyId:\"#dwfrm_cart_couponCode\",couponApplyButtonId:\"#add-coupon\",bagTotalId:\"div.cart-order-totals > table > tbody > tr:nth-last-child(2) > td:last-child\",couponRemoveId:'form#cart-items-form div.discount-button > button[type=\"submit\"]',productID:\"button.remove-product-cart-action > input\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var encodedData,d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?(encodedData=$(elementIds.productID,dom)[0].name+\"=\"+$(elementIds.productID,dom)[0].value+\"&dwfrm_cart_couponCode= &\"+$(elementIds.couponRemoveId,dom)[0].name+\"=\"+$(elementIds.couponRemoveId,dom)[0].value,$.post(form[0].action,encodedData,function(data){data=$(data);d.resolve(data)})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom)),code=($(elementIds.couponApplyId,dom).val(code),$(elementIds.productID,dom)[0].name+\"=\"+$(elementIds.productID,dom)[0].value+\"&dwfrm_cart_couponCode=\"+code+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value);return $.post(form[0].action,code,function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1370":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying J&P cycles specific coupons\");var $,self=this,elementIds={couponRemoveId:\"section#cart-totals input.button.small\",couponApplyId:\"#txtDiscountCode\",couponApplyButtonId:\"form#discount-code > input.button.submitButton\",bagTotalId:\"#div-total\",doNotApplyCouponsId:\"div.empty-cart div.cart-header > h1\",DiscountCode:\"#DiscountCode\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var code,d=$.Deferred();return dom=dom||$(document),$(elementIds.removeFormId,dom),$(elementIds.couponRemoveId,dom).length?(code=$(elementIds.DiscountCode,dom).val(),$.post(\"https://www.jpcycles.com/discount/remove\",\"DiscountCode=\"+code+\"&RedirectAction=index&RedirectController=cart\",function(data){data=$(data);d.resolve(data)})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred();return dom=dom||$(document),$(elementIds.applyFormId,dom),$(elementIds.couponApplyId,dom).val(code),$.post(\"https://www.jpcycles.com/discount/add\",\"DiscountCode=\"+code+\"&RedirectAction=index&RedirectController=cart\",function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","1371":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying J.Jill specific coupons\");var $,self=this,elementIds={couponRemoveId:\"form#PromotionCodeForm a\",couponApplyId:\"input#promoCode\",couponApplyButtonId:\"button.btn-secondary.btn-block\",bagTotalId:\"span#totalPrice\",errorMessageId:\"p#promoCode_error\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},700)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1700)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1379":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying JackRabbit specific coupons\");var $,self=this,elementIds={couponRemoveId:\"button.cart-coupon__remove-action\",couponApplyId:\"#couponCode\",couponApplyButtonId:\"div.cart__promotions button\",bagTotalId:'div[data-totals-component=\"grandTotal\"] strong[data-totals-component=\"value\"]',errorMessageId:\"#cartCouponInvalidFeedback\",errorMessageDismissId:'div.text-align--center.toggle--active div:nth-child(2) > button[type=\"button\"]'};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),0<$(elementIds.errorMessageDismissId).length&&$(elementIds.errorMessageDismissId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1409":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying jet.com specific coupons..\");var $,self=this,elementIds={couponRemoveId:\"div#__next div.jfCUzD > a\",couponApplyId:\"input#promo\",couponApplyButtonId:\"div#__next div > button\",bagTotalId:'div[font-size=\"heading4\"] span:last-child',errorMessageId:\"div#__next form > span\",modalCloseID:\"#react-aria-modal-dialog button\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){var finished=0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text();return finished&&$(elementIds.modalCloseID).is(\":visible\")&&$(elementIds.modalCloseID).click(),finished}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),setTimeout(function(){$(elementIds.couponApplyButtonId).click()},250),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){$(elementIds.modalCloseID).is(\":visible\")&&$(elementIds.modalCloseID).click(),d.resolve()},2e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","1416":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying jimmyjazz specific coupons\");var $,self=this,elementIds={couponApplyId:\"input#promotion_code\",couponApplyButtonId:\"div#container a.promotion_submit.button-black.small\",bagTotalId:\"div#container div.cart_subtotal_right > span\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),couponCode=(dom=dom||$(document),$(\"span.code\",dom).text());return couponCode?(console.log(\"applied code is:\"+couponCode),$.ajax({type:\"GET\",url:\"https://www.jimmyjazz.com/cart-request/cart/option?option=promotion&promotion_code=\"+couponCode+\"&toggle=0\",success:function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),code=(dom=dom||$(document),\"https://www.jimmyjazz.com/cart-request/cart/option?option=promotion&promotion_code=\"+code+\"&toggle=1\");return $.ajax({type:\"GET\",url:code,success:function(jsonResp){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1419":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying JoAnn's specific coupons\");var $,self=this,elementIds={applyFormId:'div#cart-checkout-container section.cart__coupons.new-form-style > form[name=\"dwfrm_cart\"]',removeFormId:'div#cart-checkout-container section.cart__coupons.new-form-style > form[name=\"dwfrm_cart\"]',couponRemoveId:\"#remove-coupon\",couponApplyId:\"#dwfrm_cart_couponCode\",couponApplyButtonId:\"#add-coupon\",bagTotalId:\"div#cart-checkout-container div.cart__totals__row.cart__totals__row--total > span:nth-child(2)\",errorMessageId:'form[name=\"dwfrm_cart\"] div.error'};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,$(elementIds.couponRemoveId,dom)[0].name+\"=\"+$(elementIds.couponRemoveId,dom)[0].value,function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,$(elementIds.couponApplyId,dom)[0].name+\"=\"+$(elementIds.couponApplyId,dom)[0].value+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","1424":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying JoesNewBalanceOutlet specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div#PromoCodeForm > input.button.promoCodeRemove\",couponApplyId:\"#CustomerDiscountCode\",couponApplyButtonId:\"div#PromoCodeForm > input.button.promoCodeApply\",bagTotalId:\"#OrderTotal\",orderNumberId:\"#OrderNumber\",verificationCodeId:'input[name=\"__RequestVerificationToken\"]',doNotApplyCouponsId:\"div#CartContents > p.emptyCart\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),$(elementIds.couponRemoveId,dom).length?$.ajax({url:\"https://www.joesnewbalanceoutlet.com/cart/removeDiscountCode\",type:\"POST\",success:function(jsonResponse){$.get(window.location.href,function(jsonResponse){jsonResponse=$(jsonResponse);d.resolve(jsonResponse)})},error:function(data){d.resolve(dom)}}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),code={CustomerDiscountCode:code,OrderNumber:$(elementIds.orderNumberId,dom).attr(\"value\")},vId=$(elementIds.verificationCodeId,dom).attr(\"value\");return $.ajax({url:\"https://www.joesnewbalanceoutlet.com/cart/applyDiscountCode\",type:\"POST\",data:JSON.stringify(code),contentType:\"application/json; charset=utf-8\",headers:{__RequestVerificationToken:vId},success:function(jsonResponse){$.get(window.location.href,function(jsonResponse){jsonResponse=$(jsonResponse);d.resolve(jsonResponse)})},error:function(jqXHR,error){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1432":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying jomashop specific coupons\");var $,self=this,elementIds={couponRemoveId:\".remove-coupon > button\",couponApplyId:'input[name=\"coupon-code\"]',couponApplyButtonId:\"div.coupon-form > div > div > button\",bagTotalId:\"div.price-line.cart-grand-total > div > div.col-right\",errorMessageId:\"div.coupon-error\",applyNewCouponId:'div.modal-footer > button[type=\"button\"].btn.btn-primary.btn-lg'};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length?($(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1500)})):d.resolve(),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),$(elementIds.applyNewCouponId).is(\":visible\")&&$(elementIds.applyNewCouponId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1460":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying justice specific coupons\");var $,self=this,elementIds={couponRemoveId:'section#asc-cart-order-summary button[type=\"button\"] > span',couponApplyId:\"input#mar-cart-promo-code\",couponApplyButtonId:\"input#mar-cart-promo-apply\",bagTotalId:\".mar-order-summary-total > div > span > span\",errorMessageId:\"form#mar-cart-promo-code-form div.mar-cart-promo-code-state.server-error-message\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},500)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1472":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Karen Millen specific coupons\");var $,self=this,elementIds={couponRemoveId:\"#remove-coupon > span\",couponApplyId:\"#dwfrm_billing_couponCode\",couponApplyButtonId:\"#add-coupon > span\",bagTotalId:\"#secondary td.order-value\",errorMessageId:\"div.coupon-error\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},2500)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1493":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Keurig specific coupons\");var $,self=this,elementIds={applyFormId:\"#applyCouponForm\",removeFormId:'form[class=\"remove_coupon_form\"]',couponApplyId:\"#couponCode\",couponApplyButtonId:\"#couponCodeApply\",bagTotalId:\"div#body div.order-total > span\",couponRemoveId:\".remove-coupon\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,form.serialize(),function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize(),function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1501":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying kids FootLocker specific coupons\");var $,self=this,elementIds={couponRemoveId:\"button.Link.remove\",couponApplyId:\"#input_text_voucherId\",couponApplyButtonId:\"form#PromoCode li:nth-child(3) > button\",bagTotalId:\"main#main div:nth-child(4) > dd\",promoCover:\"div.c-checkout-promo-code > div > button\",csrfToken:\"\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponApplyId).length&&$(elementIds.promoCover).click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length||0<$(elementIds.couponApplyButtonSelector).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(dom){var d=$.Deferred(),rem=(dom=dom||$(document),$(elementIds.couponRemoveId));return rem.length?(rem[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve(dom)},2500)})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),APIEndPoint=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),\"https://www.kidsfootlocker.com/api/users/carts/current/vouchers?timestamp=\"+(new Date).getTime());return $.ajax({url:APIEndPoint,type:\"POST\",data:JSON.stringify({voucherId:code}),headers:{\"x-csrf-token\":elementIds.csrfToken,\"x-fl-request-id\":\"\"},contentType:\"application/json\",success:function(jsonResponse){$.ajax({type:\"GET\",url:\"https://www.kidsfootlocker.com/api/users/carts/current?checkInventory=true&checkPriceVariation=true&timestamp=\"+(new Date).getTime(),success:function(jsonResp){d.resolve(jsonResp)},error:function(error){d.resolve(dom)}})},error:function(data){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),dom=dom&&dom.totalPrice?dom.totalPrice.formattedValue:(dom=$(document),$(elementIds.bagTotalId,dom).text()),total=-1;return dom&&(dom=$.trim(dom).replace(/\\$|,/g,\"\"),total=parseFloat(dom)),d.resolve({total:total}),d.promise()},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){($=jq).get(\"https://www.kidsfootlocker.com/api/session?products=&timestamp=\"+(new Date).getTime(),function(resp){elementIds.csrfToken=resp.data.csrfToken})}}});","1519":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying kmart specific coupons\");var $,self=this,elementIds={couponApplyId:\"#focusPromoInput\",couponApplyButtonId:\".cc-add\",couponRemoveButtonId:\".remove-coupon\",bagTotalId:\".est-total-bottom.order-sum-line.ng-scope>strong\",spinnerId:\".spin-spinner-overlay\",couponCoverId:\".total-savings-top\",couponCoverActiveId:\".total-savings-top.active\"};function isRemoveFinished(){return 0===$(elementIds.spinnerId).length}function isApplyFinished(){return 0===$(elementIds.spinnerId).length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){return 0<$(elementIds.couponCoverId).length&&0===$(elementIds.couponCoverActiveId).length&&$(elementIds.couponCoverId).trigger(\"click\"),0<$(elementIds.couponRemoveButtonId).length&&$(elementIds.couponRemoveButtonId)[0].click(),self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){var event=new CustomEvent(\"change\");return $(elementIds.couponApplyId).val(code),document.querySelector(elementIds.couponApplyId).dispatchEvent(event),$(elementIds.couponApplyButtonId)[0].click(),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","1537":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying LLBEAN specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div#app div.OrderPromotionsList_remove > button\",couponApplyId:\"#promoCodeEntry\",couponApplyButtonId:\"#promoRedeemButton\",bagTotalId:\"div.OrderSummary_estimated-total div.OrderSummary_line-amount\",errorMessageId:\"span.OrderPromotionEntry_error-message\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","1557":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Land's end specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div.promo-links > a\",couponApplyId:'input[formcontrolname=\"promoCode\"]',couponApplyButtonId:\"div.row.no-gutters.promo-pin > div.col-auto > button\",bagTotalId:\"li.grand > span.order-totals-value\",errorMessageId:\".mat-error > div\",clearFieldsId:\"lib-promotion-form > a.reset-link\",doNotApplyCouponsId:\"div.shopping-bag-items-container\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return(0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).is(\":visible\"))&&$(elementIds.bagTotalId).is(\":visible\")}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},500)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=($(elementIds.clearFieldsId).is(\":visible\")&&$(elementIds.clearFieldsId)[0].click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","1558":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Land's End Business Outfitters specific coupons\");var $,self=this,elementIds={couponRemoveId:\"a#removePromo\",couponApplyId:\"input#promotion\",couponApplyButtonId:'form#promotionCode button[type=\"button\"].btn.btn-primary',bagTotalId:\"div#checkout div.total-price-data > format-price > span.price-amount\",errorMessageId:\"div#promoCodeNotFoundError\",promoCoverId:'form#promotionCode > button[type=\"button\"]'};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponRemoveId).length&&0==$(elementIds.couponApplyId).length&&$(elementIds.promoCoverId)[0].click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},700)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=(0==$(elementIds.couponApplyId).length&&$(elementIds.promoCoverId)[0].click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},2500)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","1667":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Lord & Taylor specific coupons\");var $,self=this,elementIds={couponRemoveId:\"a.jsRemovePromo\",couponApplyId:\"#promoCodeEntry\",couponApplyButtonId:\"#promoApply\",bagTotalId:\"#jsVal-grandTotal\",errorMessageId:\"#ui-id-4\",closePromoCover:\"button.ui-button.ui-widget.ui-state-default.ui-corner-all.ui-button-icon-only.ui-dialog-titlebar-close.ui-state-focus\",doNotApplyCouponsId:\"p.widebag-empty-message\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).is(\":visible\")}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.errorMessageId).is(\":visible\")&&$(elementIds.closePromoCover).click(),$(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){$(elementIds.errorMessageId).is(\":visible\")&&$(elementIds.closePromoCover).click(),setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1681":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Lowe's specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div#promoToggle a\",couponApplyId:\"input#promocode-input\",couponApplyButtonId:\"div#promoToggle span > input\",bagTotalId:\"div#main div.art-sc-estTotal-below > h5\",errorMessageId:\"div#promoToggle p\",promoCoverId:\"div#main a.link-secondary.art-sc-promoCodeTitle.art-sc-promo_expand.collapsed > span\",doNotApplyCouponsId:\"h2.art-co-paymentHeader\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}).catch(function(error){d.resolve()}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return 0==$(elementIds.couponApplyId).length&&$(elementIds.promoCoverId).click(),$(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}).catch(function(error){d.resolve()}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1757":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Maurice's specific coupons\");var $,self=this,elementIds={couponRemoveId:'section#asc-cart-order-summary span.mar-cart-remove > button[type=\"button\"]',couponApplyId:\"#mar-cart-promo-code\",couponApplyButtonId:\"#mar-cart-promo-apply\",bagTotalId:\"section#asc-cart-order-summary li.mar-order-summary-total > div > span.mar-price > span\",errorMessageId1:\"form#mar-cart-promo-code-form div.mar-cart-promo-code-state.server-error-message\",errorMessageId2:\"form#mar-cart-promo-code-form div.mar-cart-promo-code-state.additional-info\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId1).text()||$(elementIds.errorMessageId2).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","1790":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Michael Kors specific coupons\");var $,self=this,elementIds={couponRemoveId:\"table#promocodediscounttable a\",couponApplyId:\"input#shopping-bag-promo\",couponApplyButtonId:\"input#claimCode\",bagTotalId:\"div#scart-orderysumamry-container div.col--no-gutters.text-right > p\",errorMessageId:\"div#errorMessage\",promoCoverId:\"div#shopping-left-container div.box-toggle__header-toggle > a\",doNotApplyCouponsId:\"div#headingOne\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponRemoveId).length&&$(elementIds.promoCoverId).click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=(0==$(elementIds.couponApplyId).length&&$(elementIds.promoCoverId).click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1804":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying minted specific coupons\");var $,self=this,elementIds={couponApplyId:\"div#Cart div:nth-child(2) > div > input\",couponApplyButtonId:\"div#Cart a.engine-btn.engine-btn--small.engine-btn--ghost.btnApply--radio.engine-form-promo-submit\",bagTotalId:\"div#Cart span.engine-discount-item-price--subtotal\",couponRemoveId:\"div#Cart div.engine-discounts > div:nth-child(1) > a\",po_number:\"\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var encodeData,d=$.Deferred();return dom=dom||$(document),$(elementIds.couponRemoveId,dom).length?(encodeData=\"po_number=\"+elementIds.po_number+\"&promo_code=\"+$(elementIds.couponRemoveId,dom).attr(\"data-promo\"),$.post(\"https://www.minted.com/order/line/remove-single-promo\",encodeData,function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),dom=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),\"new_promo_code=\"+code+\"&po_number=\"+elementIds.po_number);return $.post(\"https://www.minted.com/order/new-promo-in-cart\",dom,function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){fnLogInfo=(fnLogInfo=(fnLogInfo=($=jq)(document).text()).match(/'po_number': '\\d+'/g).join([])).match(/[0-9]/g).join([]),elementIds.po_number=fnLogInfo},couponLimit:0}});","1815":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying MLB.com Shop specific coupons\");var $,self=this,elementIds={couponApplyId:\"input#coupon-code-medium\",couponApplyButtonId:'button[data-talos=\"buttonCouponApply\"]',bagTotalId:\"div.total-line > div > span.shipping-val\",errorMessageId:\"div.promo-message\"};function isApplyFinished(){return $(elementIds.errorMessageId).text()}function applyPromoCode(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return applyPromoCode(\"invld\").then(function(){d.resolve()}),d.promise()},applyPromoCode:applyPromoCode,calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","1823":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Modcloth specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div.activePromos > span.xIcon\",couponApplyId:'input[name=\"couponCode\"]',couponApplyButtonId:\"div#couponInputContainer > div > div.actionLink\",bagTotalId:\"table#orderCostBreakdown tfoot > tr > td.orderCost\",errorMessageId:\"div#orderSummary div.warning > span\",doNotApplyCouponsId:\"select#address-select-dropdown\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1838":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Monoprice specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div#mp-page-content a.remove-btn.js-remove-coupon\",couponApplyId:\"input#promo\",couponApplyButtonId:\"div#mp-page-content button\",bagTotalId:\"div#mp-page-content span.grand-total\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId)[0].click(),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","1849":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Moosejaw specific coupons\");var $,self=this,elementIds={couponRemoveId:\"a#promotion_1\",couponApplyId:\"input#promoCode\",couponApplyButtonId:\"a#WC_PromotionCodeDisplay_links_1\",bagTotalId:\"div#order_total div.checkout-total-figures.columns.last.section-table-total-figures.total\",errorMessageId:\"div#ErrorMessageText\",errorPopOverClose:\"div#clickableErrorMessageImg\"};function isRemoveFinished(){return!$(elementIds.couponRemoveId).is(\":visible\")}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).is(\":visible\")&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}).catch(function(error){$(elementIds.couponRemoveId).is(\":visible\")&&$(elementIds.couponRemoveId)[0].click(),d.resolve()}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return 0<$(elementIds.errorPopOverClose).length&&$(elementIds.errorPopOverClose).click(),$(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId)[0].click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}).catch(function(error){d.resolve()}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:4}});","1852":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Motel6 specific coupons\");var $,self=this,elementIds={couponRemoveId:'div#cpCodeDrawer div.corpPlus-btn.form-elements.form-group.col-xs-4.col-sm-2.pull-right > button[type=\"button\"]',couponApplyId:\"#cpCodeText\",couponApplyButtonId:'div#cpCodeDrawer div.corpPlus-btn.form-elements.form-group.col-xs-12.col-sm-2.pull-right > button[type=\"button\"]',bagTotalId:\"#rsvtotal\",openCoupon:\"div#cpCodeDrawer div.contentDrawer-header\",errorMessageId:\"div#cpCodeDrawer div.contentDrawer-content.cpCodeForm > div > span\"};function isRemoveFinished(){return!1===$(elementIds.couponRemoveId).is(\":visible\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.openCoupon).hasClass(\"active\")||$(elementIds.openCoupon).click(),$(elementIds.couponRemoveId).is(\":visible\")&&$(elementIds.couponRemoveId).click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1200)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=($(elementIds.openCoupon).hasClass(\"active\")||$(elementIds.openCoupon).click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},700)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","1878":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Musician's Friend's specific coupons\");var $,self=this,elementIds={applyFormId:\"#couponForm\",removeFormId:\"#removeCouponForm\",couponApplyId:\"#couponCode\",couponApplyButtonId:\"#couponSubmit\",bagTotalId:\"#cartOrderTotalVal\",couponRemoveId:\"#removeCouponID\",appliedCouponId:\"a.coupon\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){function remove(code,newDom){var form=$(elementIds.removeFormId,newDom);$(elementIds.couponRemoveId,newDom).val(code),form.length&&$(elementIds.couponRemoveId,newDom).length?$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,newDom)[0].name+\"=\"+$(elementIds.couponRemoveId,newDom)[0].value,function(data){data=$(data);$(elementIds.appliedCouponId,data).length?remove($(elementIds.appliedCouponId,data)[0].rel,data):d.resolve(data)}):d.resolve(newDom)}var d=$.Deferred();return dom=dom||$(document),$(elementIds.appliedCouponId,dom).length?remove($(elementIds.appliedCouponId,dom)[0].rel):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code.toLowerCase()),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){var result=$(data);setTimeout(function(){d.resolve(result)},500)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","1884":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying My M&M's specific coupons\");var $,self=this,elementIds={couponRemoveId:\"span.mz-remove-coupon\",couponApplyId:\"#coupon-code\",couponApplyButtonId:\"#cart-coupon-code\",bagTotalId:\"#mz-carttable-total\",errorMessageId:\"li.mz-message-item\",cartId:'#cartform input[type=\"hidden\"]'};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();if(dom=dom||$(document),!$(elementIds.couponRemoveId).length&&!dom.couponCodes)return d.resolve();if($(elementIds.couponRemoveId).length){for(var i=0;i<$(elementIds.couponRemoveId).length;i++)$(elementIds.couponRemoveId)[i].click();self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)})}return dom.couponCodes&&(dom=\"https://www.mms.com/api/commerce/carts/\"+$(elementIds.cartId,document).val()+\"/coupons/\"+dom.couponCodes,$.ajax({url:dom,type:\"POST\",headers:{\"x-http-method-override\":\"DELETE\",\"x-vol-catalog\":1,\"x-vol-currency\":\"USD\",\"x-vol-locale\":\"en-US\",\"x-vol-master-catalog\":1},contentType:\"application/json\",success:function(jsonResponse){d.resolve(jsonResponse)},error:function(data){d.resolve()}})),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),dom=(dom=dom||$(document),$(elementIds.cartId,document).val());return $.ajax({url:\"https://www.mms.com/api/commerce/carts/\"+dom+\"/coupons/\"+code,type:\"PUT\",headers:{\"x-vol-catalog\":1,\"x-vol-currency\":\"USD\",\"x-vol-locale\":\"en-US\",\"x-vol-master-catalog\":1},contentType:\"application/json\",success:function(jsonResponse){jsonResponse.couponCodes=code,d.resolve(jsonResponse)},error:function(data){d.resolve()}}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),couponCodes=null;dom&&dom.total?(priceText=dom.total,couponCode=dom.couponCodes):(dom=$(document),priceText=$(elementIds.bagTotalId,dom).text(),couponCodes=null);var priceText,dom=-1;return priceText&&(priceText=$.trim(priceText).replace(/\\$|,/g,\"\"),dom=parseFloat(priceText)),d.resolve({total:dom,dom:{couponCode:couponCodes}}),d.promise()},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1899":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying MyProtein specific coupons\");var $,self=this,elementIds={applyFormId:\"form#discount-form\",couponApplyId:\"input#discountcode\",couponApplyButtonId:\"button#add-discount-code\",bagTotalId:\"div.athenaBasket_totalValue\",couponRemoveId:\"a.athenaBasket_removeItem-discount\",discountCodeID:'input[name=\"discountCode\"]'};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),url=(dom=dom||$(document),$(elementIds.couponRemoveId,dom).attr(\"href\"));return $(elementIds.couponRemoveId,dom).length?$.get(url,function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&discountCode=code\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1911":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying nastygal specific coupons\");var $,self=this,elementIds={couponRemoveId:\"#remove-coupon\",couponApplyId:\"#dwfrm_billing_couponCode\",couponApplyButtonId:\"#add-coupon\",bagTotalId:\"div#secondary td.order-value\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var ApiEndPoint,d=$.Deferred();return dom=dom||$(document),$(elementIds.couponRemoveId,dom).length?(ApiEndPoint=\"https://www.nastygal.com/on/demandware.store/Sites-nastygal-US-Site/en_US/COBilling-RemoveCoupon?couponID=\"+$(elementIds.couponRemoveId,dom).attr(\"data-coupon\"),$.get(ApiEndPoint,function(jsonData){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),dom=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),\"https://www.nastygal.com/on/demandware.store/Sites-nastygal-US-Site/en_US/Cart-AddCouponJson?couponCode=\"+code+\"&format=ajax\");return $.post(dom,function(jsonData){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1921":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Natural Healthy Concepts specific coupons\");var $,self=this,elementIds={couponRemoveId:\"span.cart-promocode-list-item-remove-action\",couponApplyId:\"#promocode\",couponApplyButtonId:'div#collapseOne button[type=\"submit\"]',bagTotalId:\"span.nhc-order-total\",errorMessageId:\"div#collapseOne div:nth-child(2) > div\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1922":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Naturalizer specific coupons.\");var $,self=this,elementIds={couponRemoveId:\"span.icon-remove\",couponApplyId:\"input#promotional-code-input\",couponApplyButtonId:\"button.add-promo-code-button\",bagTotalId:\"span.summary-amount.bfx-total-grandtotal\",errorMessageId:\"div#header td > p\",errorCloseButton:\"a.message-close\",doNotApplyCouponsId:\"div.step-summary\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=(0<$(elementIds.errorCloseButton).length&&$(elementIds.errorCloseButton)[0].click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","1933":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying neimanmarcus's specific coupons\");var $,self=this,elementIds={applyFormId:\"#promo-form\",removeFormId:\"\",couponApplyId:\"#i-promo\",couponApplyButtonId:\"#btn-promo\",bagTotalId:\"#txt_orderTotal\",couponRemoveId:\"\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);d.resolve(data)}).catch(function(error){$.get(document.location.href,function(data){d.resolve($(data))})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","1945":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying NY and Company's specific coupons\");var $,self=this,elementIds={applyFormId:\"#billingAddcheckoutCouponForm\",removeFormId:\"div.remove-add-coupon form\",couponApplyId:\"#billingCouponText\",couponApplyButtonId:\"#billingCouponApplyButton\",bagTotalId:\"div#divYourChargesTitle div.t-cell.line-value.checkout-total\",couponRemoveId:\"div.remove-add-coupon form > a\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=$(elementIds.removeFormId,dom);return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,form.serialize(),function(data){$.get(\"https://www.nyandcompany.com/checkout/checkoutOrderSummary.jsp?_=\"+$.now(),function(data1){data1=$(elementIds.bagTotalId,data1).text();$(elementIds.bagTotalId,document).text(data1),d.resolve($(document))})}):d.resolve($(document)),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),dom=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(\"#billingCoupon\").val(code),$.post(dom[0].action,dom.serialize(),function(data){$.get(\"https://www.nyandcompany.com/checkout/checkoutOrderSummary.jsp?_=\"+$.now(),function(data1){$.get(\"https://www.nyandcompany.com/checkout/gadgets/getAvailableCoupons.jsp?_=\"+$.now(),function(data2){var parentDiv=document.createElement(\"div\");parentDiv.innerHTML=data1+data2,d.resolve(parentDiv)})})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","1948":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying newegg specific coupons\");var $,self=this,elementIds={applyFormId:'form[name=\"form1\"]',removeFormId:'form[name=\"form1\"]',couponApplyId:\"#PromotionCode\",couponApplyButtonId:'form[name=\"form1\"] li:nth-child(2) > a',bagTotalId:'form[name=\"form1\"] tbody > tr:last-child > td > span.amount',couponRemoveId:\"a.remove\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var removeCoupon,d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return 0<$(elementIds.couponRemoveId,dom).length?(removeCoupon=$('form[name=\"form1\"] td:nth-child(2) > strong',dom).text(),$(elementIds.couponApplyId,dom).val(removeCoupon),$(\"form[name='form1'] input[type='hidden'][name='SubmitTypeValue']\",dom).attr(\"value\",\"CLEARPROMOTCODE\"),$.post(form[0].action,form.serialize(),function(data){data=$(data);d.resolve(data)})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(\"form[name='form1'] input[type='hidden'][name='SubmitTypeValue']\",dom).attr(\"value\",\"PROMOTCODESUBMIT\"),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize(),function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:9}});","1954":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying NFL Shop specific coupons\");var $,self=this,elementIds={couponApplyId:\"input#coupon-code-medium\",couponApplyButtonId:'button[data-talos=\"buttonCouponApply\"]',bagTotalId:\"div.total-line > div > span.shipping-val\",errorMessageId:\"div.promo-message\"};function isApplyFinished(){return $(elementIds.errorMessageId).text()}function applyPromoCode(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return applyPromoCode(\"invld\").then(function(){d.resolve()}),d.promise()},applyPromoCode:applyPromoCode,calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","1961":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Nike specific coupons\");var $,self=this,elementIds={couponRemoveId:'[data-automation=\"promo-code-line-item\"] + div i',couponApplyId:'input[name=\"promotionCode\"]',couponApplyButtonId:'button[data-automation=\"promo-code-apply-button\"]',bagTotalId:'p[data-automation=\"summary-total\"]',errorMessageId1:'div[data-automation=\"error-message-container\"]',errorDismissId:'button[data-automation-id=\"error-close\"]',errorMessageId2:\"div.css-19ajb1m.e1aj42hl2\",openPromocover:\"main#maincontent a > i\"};function isRemoveFinished(){return $(elementIds.errorDismissId).length&&$(elementIds.errorDismissId).click(),!1===$(elementIds.couponRemoveId).is(\":visible\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId1).is(\":visible\")||$(elementIds.errorMessageId2).is(\":visible\")}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){$(elementIds.couponApplyId).is(\":visible\")||$(elementIds.openPromocover).click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).is(\":visible\")&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}).catch(function(error){d.resolve()}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).is(\":visible\")||$(elementIds.openPromocover).click(),setTimeout(function(){var input=$(elementIds.couponApplyId);input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).prop(\"disabled\",!1),$(elementIds.couponApplyButtonId).click()},250),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){$(elementIds.errorMessageId).is(\":visible\")&&$(elementIds.errorMessageId)[0].click(),d.resolve()},500)}).catch(function(error){d.resolve()}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1973":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying northerntool specific coupons\");var $,self=this,elementIds={applyFormId:\"#paymentform\",removeFormId:\"#paymentform\",couponApplyId:\"#keyCode\",couponApplyButtonId:\"div#keycode-hidden > label\",bagTotalId:\"#OrderTotalDetail_orderSubtotal_2\",couponRemoveId:\"div#promo-code > a.remove-link\",appliedCode:\"div#promo-code input\",orderId:'#paymentform input[name=\"orderId\"]',catalogId:'#paymentform input[name=\"catalogId\"]',storeId:'#paymentform input[name=\"storeId\"]',langId:'#paymentform input[name=\"langId\"]',piAmount:'#paymentform input[name=\"piAmount\"]',frmPg:'#paymentform input[name=\"frmPg\"]',payType:\"#payType\",quoteOrder:\"#quoteOrder\",keyCodePrompt:\"#keyCodePrompt\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?($(elementIds.payType,dom).val(\"removekeycode\"),$.post(form[0].action,form.serialize(),function(data){data=$(data);d.resolve(data)})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom)),dom=($(elementIds.payType,dom).val(\"applykeycode\"),$(elementIds.couponApplyId,dom).val(code),\"orderId=\"+$(elementIds.orderId,dom).val()+\"&catalogId=\"+$(elementIds.catalogId,dom).val()+\"&storeId=\"+$(elementIds.storeId,dom).val()+\"&langId=\"+$(elementIds.langId,dom).val()+\"&piAmount=\"+$(elementIds.piAmount,dom).val()+\"&frmPg=\"+$(elementIds.frmPg,dom).val()+\"&payType=\"+$(elementIds.payType,dom).val()+\"&quoteOrder=&keyCode=\"+code+\"&keyCodePrompt=\");return $.post(form[0].action,dom,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","1974":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying norton specific coupons\");var $,logInfo,self=this,elementIds={couponRemoveId:\"#couponTotalBox .removeButton:visible a\",couponApplyId:\"#couponCode\",couponApplyButtonId:\"#haveCouponFromCart a\",bagTotalId:\".cartTotal .total-style td:nth-child(2)\",loaderId:\"#loadingSpinner:visible\"};function isRemoveFinished(){return 0===$(elementIds.loaderId).length}function isApplyFinished(){return 0===$(elementIds.loaderId).length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){return 0<$(elementIds.couponRemoveId).length&&($(elementIds.couponRemoveId)[0].click(),logInfo(\"apply remove\")),self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId)[0].click(),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,logInfo=fnLogInfo}}});","1980":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Novica specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div#selectedvalue-promocode a\",couponApplyId:\"#promocode\",couponApplyButtonId:'div#promocodedisplay button[type=\"button\"]',bagTotalId:\"p#ordertotal-authtotal strong > span\",errorMessageId:\"div#promocodedisplay div.popover-content\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}).catch(function(error){d.resolve()}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}).catch(function(error){d.resolve()}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2026":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Origins specific coupons\");var $,self=this,elementIds={couponApplyId:\"#form--offer_code--field--OFFER_CODE\",couponApplyButtonId:\"form#offer_code div:last-child > input\",bagTotalId:\"div > div.total.value.order-summary-panel__total--value.order-summary-panel__value\",_TOKEN:'#offer_code input[name=\"_TOKEN\"]'};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),data=(dom=dom||$(document),[{method:\"logic.checkout--viewcart\",params:[{_SUBMIT:\"offer_code\",_TOKEN:$(elementIds._TOKEN,dom)[0].value,OFFER_CODE:code}]}]),data=\"JSONRPC=\"+encodeURI(JSON.stringify(data));return $(elementIds.couponApplyId,dom).val(code),$.post(\"https://www.origins.com/rpc/jsonrpc.tmpl?dbgmethod=logic.checkout--viewcart\",data,function(jsonResp){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","2031":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Orvis specific coupons\");var $,self=this,elementIds={couponApplyId:\"div.cart-right-col > ag-order-summary > div > ag-input > ag-input-wrapper > div > div > input\",couponApplyButtonId:\"div.cart-right-col > ag-order-summary > div > ag-button > button > ag-text > span\",bagTotalId:\"div.cart-right-col > ag-order-summary > section > p\",errorMessageId:\"div.cart-right-col > ag-order-summary > div > ag-input > ag-input-wrapper > div > div.input-validation > ag-text > span\",appliedElementID:\"div.cart-right-col > ag-order-summary > dl > dd.highlight\"};function isApplyFinished(){return 0<$(elementIds.appliedElementID).length||$(elementIds.errorMessageId).text()}function applyPromoCode(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},800)}),d.promise()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return applyPromoCode(\"invld\").then(function(){d.resolve()}),d.promise()},applyPromoCode:applyPromoCode,calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","2034":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Otterbox specific coupons\");var $,self=this,elementIds={applyFormId:\".js-coupon-form\",removeFormId:\".js-coupon-form\",couponApplyId:\"#dwfrm_cart_couponCode\",couponApplyButtonId:\"#add-coupon\",bagTotalId:\"div#minisummary div.order-totals-table-row.order-total > div.order-totals-table-cell.value > span\",couponRemoveId:\"form.js-coupon-form button\",openPromoCover:\"a.js-promo\",doNotApplyCouponsId:\"div.b-cart-empty.cart-empty\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponApplyId).length&&$(elementIds.openPromoCover)[0].click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(dom){var encodeData,d=$.Deferred(),rem=$(elementIds.couponRemoveId,document);if(rem.length){for(var i=0;i<rem.length;i++)rem[i].click();self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)})}return $(elementIds.couponRemoveId,dom).length?(encodeData=\"couponCode=\"+$(elementIds.couponRemoveId,dom).attr(\"data-couponcode\"),$.ajax({type:\"POST\",url:\"https://www.otterbox.com/on/demandware.store/Sites-otterbox_us_v2-Site/default/Cartcon-DeleteCoupon\",data:encodeData,success:function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred();return dom=dom||$(document),$.ajax({type:\"GET\",url:\"https://www.otterbox.com/on/demandware.store/Sites-otterbox_us_v2-Site/default/Cart-AddCoupon?couponCode=\"+code+\"&format=ajax\",success:function(jsonResp){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2045":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying overstock specific coupons\");var $,self=this,elementIds={couponApplyId:'input[name=\"PromoCode\"]',couponApplyButtonId:'form#checkoutForm button[type=\"button\"]',bagTotalId:\"form#checkoutForm div.total-details > div.your-total > span:nth-child(2)\",errorMessageId:\"span.input-error\",doNotApplyCouponsId:\"\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return d.resolve(),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),setTimeout(function(){d.resolve()},1250).catch(function(error){d.resolve()}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2075":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying partsgeek specific coupons\");var $,self=this,elementIds={couponApplyId:\"input.cart-coupon-input\",couponApplyButtonId:\"input.cart-coupon-submit\",bagTotalId:\"div.cart-total-value\"};function applyPromoCode(code,origTotal,dom){var d=$.Deferred(),dom=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),\"coupon_code=\"+code);return $.post(\"https://www.partsgeek.com/cart/\",dom,function(data){$.get(\"https://www.partsgeek.com/cart/\",function(data){data=$(data);d.resolve(data)})}),d.promise()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return applyPromoCode(\"\").then(function(result){d.resolve(result)}),d.promise()},applyPromoCode:applyPromoCode,calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","2088":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Payless Shoesource's specific coupons\");var $,self=this,elementIds={applyFormId:\"#cart-items-form\",removeFormId:\"#cart-items-form\",couponApplyId:\"#dwfrm_cart_couponCode\",couponApplyButtonId:\"#add-coupon\",bagTotalId:\"form#cart-items-form tr.order-total > td:nth-child(2)\",couponRemoveId:'table#cart-table td.coupon-actions > button[type=\"submit\"]'};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,dom)[0].name+\"=\"+$(elementIds.couponRemoveId,dom)[0].value,function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom)),code=($(elementIds.couponApplyId,dom).val(code),$(elementIds.couponApplyId,dom)[0].name+\"=\"+$(elementIds.couponApplyId,dom)[0].value+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value+\"&\"+$(\"#dwfrm_cart_rewardsEmail\",dom)[0].name+\"=\"+$(\"#dwfrm_cart_rewardsEmail\",dom)[0].value);return $.post(form[0].action,code,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","2118":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying personalizationmall specific coupons\");var $,self=this,elementIds={applyFormId:\"#aspnetForm\",removeFormId:\"#aspnetForm\",couponApplyId:\"#ctl00_mainContent_txtCouponCode\",couponApplyButtonId:\"#ctl00_mainContent_cmdReviseDiscout\",bagTotalId:\"div#wrapper_full-checkout li.li__order-total-amt\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return $(elementIds.couponApplyId,dom).val(\"\"),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);d.resolve(data)}),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){dom=dom||$(document),$.Deferred();var priceText=$(elementIds.bagTotalId,dom).text();return priceText&&(priceText=$.trim(priceText).replace(/,/g,\"\"),totalText=$.trim(priceText).match(/\\d+[\\.\\d{0,3}]/g)),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2126":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Petcarerx specific coupons\");var $,elementIds={couponRemoveId:\"a.use-different-coupon\",couponApplyId:\"input#newcoupon_textbox\",couponApplyButtonId:\"div.saveForm > input.formBtn\",bagTotalId:\"div#summary_total > span:nth-child(2)\",errorMessageId:\"p.coupon-error\",APIEndPoint:\"https://www.petcarerx.com/ajax/cart_page.ashx\",encodeData:\"cmd=submit_new_coupon&coupon=\",APIEndPoint2:\"https://www.petcarerx.com/ajax/cart_page.ashx?cmd=getcartsummary&_=\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),$.post(elementIds.APIEndPoint,elementIds.encodeData,function(data){$.get(elementIds.APIEndPoint2+(new Date).getTime(),function(jsonResponse){d.resolve(jsonResponse)})}),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred();return dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),$.post(elementIds.APIEndPoint,elementIds.encodeData+code,function(data){$.get(elementIds.APIEndPoint2+(new Date).getTime(),function(jsonResponse){d.resolve(jsonResponse)})}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),dom=dom&&dom.total?dom.total:(dom=$(document),$(elementIds.bagTotalId,dom).text()),total=-1;return dom&&(dom=$.trim(dom).replace(/\\$|,/g,\"\"),total=parseFloat(dom)),d.resolve({total:total}),d.promise()},onReady:this.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){($=jq)(elementIds.couponApplyId).val(\" \"),$(elementIds.couponApplyButtonId)[0].click()},couponLimit:0}});","2127":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Petco specific coupons\");var $,logInfo,self=this,elementIds={couponRemoveId:\"form#PromotionCodeForm div.applied-promo-details > a\",couponApplyId:\"input#enter-promo-code.form-control\",couponApplyButtonId:\"#PromotionCodeForm a\",bagTotalId:\"div#ShopCartPagingDisplay div.col-4 > div > div.order-summary > ul > li.text-bold > span#WC_SingleShipmentOrderTotalsSummary_td_13\",errorMessageId:\"div#promotion-error.alert.alert-danger\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var links=$(elementIds.couponRemoveId),index=1<links.length?1:0;try{links[index].click(),logInfo(\"apply remove\")}catch(x){}return self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(\"#PromotionCodeForm\").find(\"a\")[0].click(),setTimeout(function(){d.resolve()},5e3),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,logInfo=fnLogInfo},couponLimit:3}});","2144":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying philosophy coupons\");var $,self=this,elementIds={removeFormId:\"form#cart-items-form\",applyFormId:\"div.cart-actions > form\",couponApplyId:\"input#dwfrm_cart_couponCode\",couponApplyButtonId:'button[name=\"dwfrm_cart_addCoupon\"]',bagTotalId:\"div.ordertotal > span.value\",couponRemoveId:\"th.item-details > button.textbutton\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,dom)[0].name+\"=\"+$(elementIds.couponRemoveId,dom)[0].value,function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);console.log(\"result : \",data),d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2192":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying priceline specific coupons\");var $,logInfo,self=this,elementIds={couponRemoveId:\"#desktop-promo .remove\",couponApplyId:\"#desktop-promo-code\",couponApplyButtonId:\"#desktop-promo div span div:nth-child(3) span\",bagTotalId:\".soc__content--price.ng-binding.ng-scope\",errorContentId:\"#desktop-promo div span div:nth-child(2) span\",errorMessageId:\".errorMsg\",revealCouponId:\"#desktop-promo > div:first-child > div\",loadingBarId:\"#desktop-promo .loading-bar-parent\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0===$(elementIds.loadingBarId).html().length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){return 0<$(elementIds.couponRemoveId).length&&($(elementIds.couponRemoveId).trigger(\"click\"),logInfo(\"apply remove\")),self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){0<$(elementIds.revealCouponId).length&&$(elementIds.revealCouponId).trigger(\"click\"),$(elementIds.couponApplyId).val(code);var event=new CustomEvent(\"change\");return document.querySelector(elementIds.couponApplyId).dispatchEvent(event),$(elementIds.couponApplyButtonId).trigger(\"click\"),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,logInfo=fnLogInfo}}});","2209":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying PsPrint specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div#shopping-cart input.delete\",couponApplyId:\"div#shopping-cart input.left-part.coupon-code-billing\",couponApplyButtonId:\"div#shopping-cart input.right-part.apply-coupon-code-billing\",bagTotalId:\"div#shopping-cart div.shopping-summary > div:last-child > div.value > span\",errorMessageId:\"div#shopping-cart div.section-action.clearfix > div:nth-child(5)\"};function isRemoveFinished(){return!1===$(elementIds.couponRemoveId).is(\":visible\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).is(\":visible\")&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).trigger(\"click\"),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2229":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying QVC's specific coupons\");var $,logInfo,self=this,elementIds={couponRemoveId:\".promo-code .applied a\",couponApplyId:\"input#txtQvcApplyCodeNumber\",couponApplyButtonId:\"input#btnApplyCode\",bagTotalId:\"span#spanTotalPurchaseAmount1\",errorMessageId:\".error .reader-tip\"};function isRemoveFinished(){var index=1<$(elementIds.couponRemoveId).length?1:0;return!$($(elementIds.couponRemoveId)[index]).is(\":visible\")}function triggerClick(){$(elementIds.couponApplyButtonId).trigger(\"click\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var links=$(elementIds.couponRemoveId),index=1<links.length?1:0;try{links[index].click(),logInfo(\"apply remove\")}catch(x){}return self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){var event=new CustomEvent(\"change\");return $(elementIds.couponApplyId).off(\"change\",triggerClick),$(elementIds.couponApplyId).on(\"change\",triggerClick),$(elementIds.couponApplyId).val(code),document.querySelector(elementIds.couponApplyId).dispatchEvent(event),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,logInfo=fnLogInfo}}});","2245":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying coupon injection for Raise\");var $,self=this,elementIds={couponRemoveId:\".remote-delete\",couponApplyId:\"#order_coupon_code\",couponApplyButtonId:'input[name=\"commit\"]',bagTotalId:\".summary .right\",errorMessageId:\".alert-error\",contentPath:\"https://www.raise.com/receipt-summary-totals\",summary:\".container-updatable\",token:'meta[name=\"csrf-token\"]'};function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).is(\":visible\")}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var href,token,updateUI,d=$.Deferred();return 0<$(elementIds.couponRemoveId).length?(href=$(elementIds.couponRemoveId).eq(0).attr(\"href\"),token=$(elementIds.token).attr(\"content\"),updateUI=function(){$.ajax({url:elementIds.contentPath,method:\"GET\",success:function(html){$(elementIds.summary).html(html),d.resolve()},error:function(){d.reject()}})},$.ajax({url:href,method:\"DELETE\",beforeSend:function(request){request.setRequestHeader(\"x-csrf-token\",token)},success:function(){updateUI()},error:function(){updateUI()}})):d.resolve(),d.promise()},applyPromoCode:function(code){return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","2247":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying RAKUTEN specific coupons\");var $,self=this,elementIds={couponRemoveId:'#coupon div:last-child > div.r-radio__item > input[name=\"mycoupon_code\"]',couponApplyId:'input[name=\"coupon_code_no_text\"]',couponApplyButtonId:\"#coupon button\",bagTotalId:\"span.r-product__price-text.r-checkout-cart-summary__is-red\",errorMessageId:\"#coupon coupon-info > div > div > span\",errorMessageId2:\"#coupon coupon-info > div >div> div > span\",couponApplied:\"div.r-checkout-cart-summary__row.qa-shippingpage-Discount-lbl > span.r-product__price-text > span\"};function isRemoveFinished(){return!1===$(elementIds.couponApplied).is(\":visible\")}function isApplyFinished(){return $(elementIds.couponApplied).is(\":visible\")||$(elementIds.errorMessageId).text()||$(elementIds.errorMessageId2).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponApplied).is(\":visible\")&&$(elementIds.couponRemoveId).click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=($(elementIds.couponApplyId).click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","2267":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Reebok specific coupons\");var $,self=this,elementIds={couponRemoveId:'button[data-auto-id=\"glass-coupon-button-delete\"]',couponApplyId:\"input#coupon-input\",couponApplyButtonId:'button[data-auto-id=\"glass-coupon-button-submit\"]',bagTotalId:\"span.notranslate > strong\",errorMessageId:'div[data-auto-id=\"cart-coupon-error\"]'};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).is(\":visible\")}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){var elInput;return elInput=0<$(elementIds.couponApplyId).length,0<$(elementIds.couponRemoveId).length||elInput},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length?($(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1800)})):d.resolve(),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1800)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2288":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying restaurant.com's specific coupons\");var $,logInfo,self=this,elementIds={couponRemoveId:\"\",couponApplyId:\"input#promo-code\",couponApplyButtonId:\"input#lnkApplyPromos\",bagTotalId:\"div#orderTotal\",errorMessageId:\"div#errorText\"};function isRemoveFinished(){var index=1<$(elementIds.couponRemoveId).length?1:0;return!$($(elementIds.couponRemoveId)[index]).is(\":visible\")}function triggerClick(){$(elementIds.couponApplyButtonId).trigger(\"click\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var links=$(elementIds.couponRemoveId),index=1<links.length?1:0;try{links[index].click(),logInfo(\"apply remove\")}catch(x){}return self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){var event=new CustomEvent(\"change\");return $(elementIds.couponApplyId).off(\"change\",triggerClick),$(elementIds.couponApplyId).on(\"change\",triggerClick),$(elementIds.couponApplyId).val(code),document.querySelector(elementIds.couponApplyId).dispatchEvent(event),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,logInfo=fnLogInfo}}});","2304":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Road Runner Sports  specific coupons\");var $,self=this,elementIds={applyFormId:\"#cartPromotionForm\",couponApplyId:\"#promo-number-fld\",couponApplyButtonId:\"#cartPromotionBtn\",bagTotalId:\"#Cart-totalToRoundUp\",doNotApplyCouponsId:\"div.rrs-cart-empty-container h3\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2310":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Rock Bottom Golf specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div.cart-total-label > a\",couponApplyId:\"div.cart-form.coupon-code > form > input#couponcode\",couponApplyButtonId:\"div.cart-form.coupon-code > form > input.button\",bagTotalId:\"div.cart-total-value.cart-total-grandTotal > span\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),rem=(dom=dom||$(document),$(elementIds.couponRemoveId,dom));return rem.length?$.ajax({type:\"GET\",url:rem[0].href,success:function(data){data=$(data);d.resolve(data)},error:function(err){d.resolve(dom)}}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred();return dom=dom||$(document),$.ajax({type:\"POST\",url:\"https://www.rockbottomgolf.com/remote/v1/apply-code\",data:{code:code},success:function(jsonResp){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2365":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Sally Beauty Supply specific coupons\");var $,self=this,elementIds={applyFormId:'form[class=\"promo-code-form1\"]',couponApplyId:\"#couponCode\",couponApplyButtonId:'form[name=\"promo-code-form\"] button[type=\"submit\"]',bagTotalId:\"span.grand-total-sum\",couponRemoveId:\".remove-coupon\",csrfTokenID:'input[name=\"csrf_token\"]',rewardID:'input[name=\"loyaltyreward\"]'};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var APIEndPoint,d=$.Deferred();return dom=dom||$(document),$(elementIds.couponRemoveId,dom).length?(APIEndPoint=\"https://www.sallybeauty.com/on/demandware.store/Sites-SA-Site/default/Cart-RemoveCouponLineItem?code=\"+$(elementIds.couponRemoveId,dom).attr(\"data-code\")+\"&uuid=\"+$(elementIds.couponRemoveId,dom).attr(\"data-uuid\"),$.ajax({url:APIEndPoint,type:\"GET\",contentType:\"application/json, text/javascript, */*; q=0.01\",success:function(jsonResponse){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),code=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),\"https://www.sallybeauty.com/on/demandware.store/Sites-SA-Site/default/Cart-AddCoupon?couponCode=\"+code+\"&\"+$(elementIds.rewardID,dom)[0].name+\"=\"+$(elementIds.rewardID,dom)[0].value+\"&\"+$(elementIds.csrfTokenID,dom)[0].name+\"=\"+$(elementIds.csrfTokenID,dom)[0].value);return console.log(\"apply coupon url is:\"+code),$.ajax({url:code,type:\"GET\",contentType:\"application/json, text/javascript, */*; q=0.01\",success:function(jsonResponse){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,\"/cart/\"==window.location.pathname&&(elementIds.bagTotalId=\"p.grand-total\")},couponLimit:0}});","2410":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Sears specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div#total-savings-summary a.remove-coupon\",couponApplyId:\"#focusPromoInput\",couponApplyButtonId:\"div#cart-footer a.shc-btn.cc-add\",bagTotalId:\"div#cart-footer div.est-total-bottom.order-sum-line.ng-scope > strong\",doNotApplyCouponsId:\"div.empty-cart\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),rem=(dom=dom||$(document),$(elementIds.couponRemoveId,dom));return rem.length||dom.couponCode?(rem.length&&(0<$(elementIds.couponRemoveId).length&&document.querySelectorAll(elementIds.couponRemoveId).forEach(function(el){el.click()}),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve(dom)},5e3)}).catch(function(){d.resolve(dom)})),dom.couponCode&&(rem=dom.couponCode,$.ajax({url:\"https://www.sears.com/crsp/api/cart/v1/coupon/remove\",type:\"POST\",data:JSON.stringify({couponRequest:{couponCode:rem}}),contentType:\"application/json; charset=utf-8\",dataType:\"json\",success:function(jsonResponse){d.resolve(jsonResponse)}})),d.promise()):d.resolve(dom)},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred();return $.ajax({url:\"https://www.sears.com/crsp/api/cart/v1/coupon/add\",type:\"POST\",data:JSON.stringify({couponRequest:{couponCode:code}}),contentType:\"application/json; charset=utf-8\",dataType:\"json\",success:function(jsonResponse){if(jsonResponse&&jsonResponse.response&&jsonResponse.response.applicableCoupon&&jsonResponse.response.applicableCoupon.length)for(var i=0;i<jsonResponse.response.applicableCoupon.length;i++)\"true\"===jsonResponse.response.applicableCoupon[i].isApplied&&(jsonResponse.couponCode=jsonResponse.response.applicableCoupon[i].offerId);else jsonResponse.couponCode=null;d.resolve(jsonResponse)}}),d.promise()},calculateTotal:function(jsonData){var d=$.Deferred(),total=-1;if(jsonData&&jsonData.response&&jsonData.response.applicableCoupon&&jsonData.response.applicableCoupon.length){for(var discountedPrice,i=0;i<jsonData.response.applicableCoupon.length;i++)\"true\"===jsonData.response.applicableCoupon[i].isApplied&&(discountedPrice=jsonData.response.applicableCoupon[i].dollarValue,discountedPrice=parseFloat(discountedPrice));var originalTotal=$(elementIds.bagTotalId,$(document)).text();originalTotal=$.trim(originalTotal).replace(/\\$|,/g,\"\"),total=(originalTotal=parseFloat(originalTotal))-discountedPrice}else{originalTotal=$(elementIds.bagTotalId,$(document)).text();originalTotal=$.trim(originalTotal).replace(/\\$|,/g,\"\"),total=parseFloat(originalTotal)}return d.resolve({total:total}),d.promise()},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","2427":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying sharperimage specific coupons\");var $,self=this,elementIds={applyFormId:'form[name=\"cartform\"]',removeFormId:'form[name=\"cartform\"]',couponApplyId:\"#promo-code-textbox\",couponApplyButtonId:'form[name=\"cartform\"] span > input[name=\"/atg/store/order/purchase/CartFormHandler.update\"]',bagTotalId:\"table.cart-box-totals > tbody > tr:nth-last-child(2) td:last-child\",couponRemoveId:\"input.promo-remove-btn\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,dom)[0].name+\"=\"+$(elementIds.couponRemoveId,dom)[0].value,function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2446":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Shoes specific coupons\");var $,self=this,elementIds={couponRemoveId:\"body#checkout a.crt-remove-promo\",couponApplyId:\"#crt-promoCode\",couponApplyButtonId:\"body#checkout div.crt-promo.crt-promo-form.sb-float-label-input > button\",bagTotalId:\"body#checkout div.crt-summary-total-price\",errorMessageId:\"#codeErrorDiv\",doNotApplyCouponsId:\"#checkout div.crt-line-items > div.crt-item--empty\"};function isRemoveFinished(){return!1===$(elementIds.couponRemoveId).is(\":visible\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).is(\":visible\")&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","2469":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying shuuemura specific coupons\");var $,self=this,elementIds={couponRemoveId:\"a.remove_coupon\",couponApplyId:\"#dwfrm_cart_couponCode\",couponApplyButtonId:\"#add-coupon\",bagTotalId:\".c-order-summary__total-price\",countryCode:\"\",countryIndicator:\"\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var appliedCode,d=$.Deferred();return dom=dom||$(document),$(elementIds.couponRemoveId,dom).length?(appliedCode=$(elementIds.couponRemoveId,dom).attr(\"data-coupon\"),appliedCode=window.location.origin+\"/on/demandware.store/Sites-shubeauty-\"+elementIds.countryCode+\"-Site/\"+elementIds.countryIndicator+\"/Cart-AddRemoveCoupon?type=remove&couponCode=\"+appliedCode+\"&format=ajax\",$.get(appliedCode,function(data){$.post(window.location.href,\"dwfrm_cart_shipments_i0_items_i0_quantity=1&dwfrm_cart_updateCart=dwfrm_cart_updateCart\",function(data){data=$(data);d.resolve(data)})})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),dom=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),window.location.origin+\"/on/demandware.store/Sites-shubeauty-\"+elementIds.countryCode+\"-Site/\"+elementIds.countryIndicator+\"/Cart-AddRemoveCoupon?type=add&couponCode=\"+code+\"&format=ajax\");return $.get(dom,function(data){$.post(window.location.href,\"dwfrm_cart_shipments_i0_items_i0_quantity=1&dwfrm_cart_updateCart=dwfrm_cart_updateCart\",function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,window.location.origin.includes(\".ca\")?(elementIds.countryCode=\"ca\",elementIds.countryIndicator=\"en_CA\"):(elementIds.countryCode=\"us\",elementIds.countryIndicator=\"en_US\")},couponLimit:0}});","2471":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying shutterfly's specific coupons\");var $,self=this,elementIds={couponRemoveId:\"\",couponApplyId:\".omnibox-code\",couponApplyButtonId:\".omnibox-claim\",bagTotalId:\".table-summary>td.table-cell-currency\",errorMessageId:\".omnibox-messages.error\",spinnerId:\".omnibox-indicator:visible\"};function isApplyFinished(){return 0===$(elementIds.spinnerId).length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return d.resolve(),d.promise()},applyPromoCode:function(code){return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","2561":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying SpiritHalloween specific coupons\");var $,self=this,elementIds={applyFormId:'form[name=\"basket_body\"]',removeFormId:'form[name=\"basket_body\"]',couponApplyId:\"#promoCode\",couponApplyButtonId:\"div#promoCodeEntry input.buttonWithInputField\",bagTotalId:\"#estimated-grand-total\",couponRemoveId:\"#promocoderemoveblock a\",doNotApplyCouponsId:\"#emptyBasket\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).is(\":visible\")?($('input[name=\"removePromoCode\"]',dom).val(!0),$('input[name=\"checkoutAction\"]',dom).val(4),$.ajax({type:\"GET\",url:form[0].action+\"?\"+form.serialize(),headers:{\"upgrade-insecure-requests\":1},success:function(data){data=$(data);d.resolve(data)},error:function(err){d.resolve(dom)}})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$('input[name=\"checkoutAction\"]',dom).val(4),$.ajax({type:\"GET\",url:form[0].action+\"?\"+form.serialize(),headers:{\"upgrade-insecure-requests\":1},success:function(data){data=$(data);d.resolve(data)},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2564":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Sport Chek specific coupons\");var $,self=this,elementIds={couponRemoveId:\"span.co-promo-applied__close\",couponApplyId:'input[name=\"vouchers[]\"]',couponApplyButtonId:\"#co-promo__apply-button\",bagTotalId:\"div.co-sidebar__line-item_total > span.co-sidebar__line-item__amount\",errorMessageId:\"span.validation-error_new-voucher-code\",doNotApplyCouponsId:\"main#main-content div.sc-product-list > p\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}).catch(function(error){d.resolve()}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).prop(\"disabled\",!1),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1500)}).catch(function(error){d.resolve()}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2581":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Stage Stores specific coupons\");var $,self=this,elementIds={applyFormId:\"#cart-promo-code-form\",removeFormId:'form[name=\"promoRemoveform\"]',couponRemoveId:'form[name=\"promoRemoveform\"] div.checkout-coupon-remove > input[name=\"/atg/commerce/promotion/CouponFormHandler.removeCoupon\"]',couponApplyId:\"#applyPromo\",couponApplyButtonId:\"#promoButton\",bagTotalId:\"div#site-content tfoot > tr > td.order-summary__prices\",errorMessageId:\"#promo-error\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,dom)[0].name+\"=\"+$(elementIds.couponRemoveId,dom)[0].value,function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2583":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Staples specific coupons\");var $,self=this,elementIds={couponRemoveId:\".coupons__remove_icon > span\",couponApplyId:'input[name=\"couponsCode\"]',couponApplyButtonId:\"div.coupons__new_apply_button_wrapper > div\",bagTotalId:\"td.cart__total_price.cart__textAlignRight\",errorMessageId:\"div.validation__error_message > span\",promoCoverId:\"div.cart__apply_coupons_message > div > span\",doNotApplyCouponsId:\"p.cart__empty_cart\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponApplyId).length&&$(elementIds.promoCoverId).click();var elInput;return elInput=0<$(elementIds.couponApplyId).length,0<$(elementIds.couponRemoveId).length||elInput},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId).click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},700)}).catch(function(error){d.resolve()}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=(0==$(elementIds.couponApplyId).length&&$(elementIds.promoCoverId).click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},700)}).catch(function(error){d.resolve()}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2648":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Supplies Outlet specific coupons\");var $,self=this,elementIds={couponApplyId:\"#couponcode\",couponApplyButtonId:'form > input[value=\"Apply\"]',bagTotalId:\"div.cart-total-value.cart-total-grandTotal > span\",couponRemoveId:\"div.cart-total-label > div > a\",csrf_token:\"\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var APIEndPoint,d=$.Deferred();return dom=dom||$(document),$(elementIds.couponRemoveId,dom).length?(APIEndPoint=\"https://www.suppliesoutlet.com\"+$(elementIds.couponRemoveId,dom).attr(\"href\"),$.ajax({type:\"GET\",url:APIEndPoint,success:function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred();return dom=dom||$(document),$.ajax({type:\"POST\",url:\"https://www.suppliesoutlet.com/remote/v1/apply-code\",data:{code:code},headers:{\"x-xsrf-token\":elementIds.csrf_token},success:function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,elementIds.csrf_token=$(document).text(),elementIds.csrf_token=elementIds.csrf_token.match(/csrf_token\":\"\\w+/g).join([]),elementIds.csrf_token=elementIds.csrf_token.replace(/csrf_token\":\"/g,\"\")},couponLimit:0}});","2661":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponMerchantWorker=function(){console.log(\"applying T-Mobile's specific coupons..\");var $,self=this,elementIds={couponRemoveId:\"div#cart_landing_page_id div.code-applied-wrapper.clearfix > div > a > span\",couponApplyId:\"input#promoInput\",couponApplyButtonId:\"div#cart_landing_page_id div.col-lg-3.col-xs-7.p-l-0.p-t-10.pull-left > button\",bagTotalId:\"#cart_stickybanner_id div.price-lockup-wrapper\",errorMessageId:\"div#cart028\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},500)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},2500)}),d.promise()},calculateTotal:function(){var totalDiv=$(elementIds.bagTotalId).attr(\"left-amount\"),total=-1;return 0<totalDiv.length&&(totalDiv=$.trim(totalDiv).replace(/\\$|,/g,\"\"),total=parseFloat(totalDiv)),total},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","2666":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Talbots's specific coupons\");var $,logInfo,self=this,elementIds={couponRemoveId:\"\",couponApplyId:\"input#enterPromoCode\",couponApplyButtonId:\"input#offerCodeSubmitBtn\",bagTotalId:\"div.summaryPrice b\",errorMessageId:\"div#offerCodeError\"};function isRemoveFinished(){var index=1<$(elementIds.couponRemoveId).length?1:0;return!$($(elementIds.couponRemoveId)[index]).is(\":visible\")}function triggerClick(){$(elementIds.couponApplyButtonId).trigger(\"click\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text()}function couponHasError(){return 0<$(elementIds.errorMessageId).length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var links=$(elementIds.couponRemoveId),index=1<links.length?1:0;try{links[index].click(),logInfo(\"apply remove\")}catch(x){}return self.waitForRemoveCoupon(isRemoveFinished)},couponApplied:function(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text().length<1},applyPromoCode:function(code){var event=new CustomEvent(\"change\");return $(elementIds.couponApplyId).off(\"change\",triggerClick),$(elementIds.couponApplyId).on(\"change\",triggerClick),$(elementIds.couponApplyId).val(code),document.querySelector(elementIds.couponApplyId).dispatchEvent(event),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_POSTBACK,checkCouponError:function(){return self.checkCouponError(couponHasError)},init:function(jq,fnLogInfo){$=jq,logInfo=fnLogInfo}}});","2670":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Target's specific coupons\");var $,self=this,elementIds={couponRemoveId:\"button[data-promo-code]\",couponApplyId:\"#promoCodeEntry\",couponApplyButtonId:'button[type=\"submit\"]',bagTotalId:'div[data-test=\"cart-summary-total\"] p:last-child',errorMessageId:\"span#promoCodeEntry--ErrorMessage\",doNotApplyCouponsId:'div[data-test=\"emptyCartContainer\"]'};function isRemoveFinished(){var index=1<$(elementIds.couponRemoveId).length?1:0;return!$($(elementIds.couponRemoveId)[index]).is(\":visible\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),$(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2675":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Tarte cosmetics specific coupons\");var $,self=this,elementIds={applyFormId:\".cart-items-form\",removeFormId:\"form.cart-items-form\",couponApplyId:\"#dwfrm_cart_couponCode\",couponApplyButtonId:\"#add-coupon\",bagTotalId:\"div#secondary td.order-value\",couponRemoveId:'table#cart-table td.item-quantity > button[type=\"submit\"]',doNotApplyCouponsId:\"div.cart-empty > h1\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,dom)[0].name+\"=\"+$(elementIds.couponRemoveId,dom)[0].value,function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred();return dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),dom=window.location.href.split(\"/\")[3],$.get(\"https://tartecosmetics.com/on/demandware.store/Sites-tarte-Site/\"+dom+\"/Cart-AddCouponJson?couponCode=\"+code+\"&format=ajax\",function(jsonData){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){dom=dom||$(document),$.Deferred();var priceText=$(elementIds.bagTotalId,dom).text();return priceText&&(priceText=$.trim(priceText).replace(/,/g,\"\"),totalText=$.trim(priceText).match(/\\d+[\\.\\d{0,3}]/g)),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2698":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Teleflora specific coupons\");var $,self=this,elementIds={applyFormId:\"#couponCodeForm\",removeFormId:\"#couponCodeRemoveForm\",couponApplyId:\"#promotionalCode\",couponApplyButtonId:\"#coupnApply\",bagTotalId:\"div#billingSidebar span.pull-right.m-billing-price.text-medium.m-billing-review-grand-total\",couponRemoveId:\"#promoCodeApplied a\",couponCodeBtn:\"#couponCodeBtn\",couponCodeRemoveBtn:\"#couponCodeRemoveBtn\",apply_couponCode:\"form#couponCodeForm #couponCode\",apply_orgCouponCode:\"form#couponCodeForm #orgCouponCode\",remove_couponCode:\"form#couponCodeRemoveForm #couponCode\",remove_orgCouponCode:\"form#couponCodeRemoveForm #orgCouponCode\",promoId:\"form#couponCodeRemoveForm #promoId\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var code,d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?(code=$(elementIds.couponRemoveId,dom).attr(\"data-ccode\"),$(elementIds.remove_couponCode,dom).val(code),$(elementIds.remove_orgCouponCode,dom).val(code),code=$(elementIds.couponRemoveId,dom).attr(\"data-cpcode\"),$(elementIds.promoId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponCodeRemoveBtn,dom)[0].name+\"=Submit\",function(data){data=$(data);d.resolve(data)})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$(elementIds.apply_couponCode,dom).val(code),$(elementIds.apply_orgCouponCode,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponCodeBtn,dom)[0].name+\"=Submit\",function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2712":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying The Body Shop specific coupons\");var $,self=this,elementIds={couponApplyId:\"#basket-promocode\",couponApplyButtonId:'div.promo-column-right > button[type=\"submit\"]',bagTotalId:\"div#scrollwrapper li:last-child > span.price\",couponRemoveId:'form#cart-removeorderpromo > button[type=\"submit\"]',csrf_tokenId:'input[name=\"CSRFToken\"]'};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var couponCode,d=$.Deferred();return dom=dom||$(document),$(elementIds.couponRemoveId,dom).length?(couponCode=$(\"li > span.promo-code\",dom).text(),couponCode=\"promoCode=\"+$.trim(couponCode)+\"&CSRFToken=\"+$(elementIds.csrf_tokenId,dom)[0].value,$.ajax({type:\"POST\",url:\"https://www.thebodyshop.com/en-us/cart/removePromoCode\",data:couponCode,success:function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),code=(dom=dom||$(document),$(elementIds.applyFormId,dom),$(elementIds.couponApplyId,dom).val(code),\"promoCode=\"+code+\"&CSRFToken=\"+$(elementIds.csrf_tokenId,dom)[0].value);return $.ajax({type:\"POST\",url:\"https://www.thebodyshop.com/en-us/cart/addPromoCode\",data:code,contentType:\"application/x-www-form-urlencoded\",success:function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2715":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying bouqs specific coupons\");var $,self=this,elementIds={applyFormId:\"#promo_code_form\",couponApplyId:\"#promo_code\",couponApplyButtonId:'form#promo_code_form button[type=\"submit\"]',bagTotalId:\"tr.table__total > td\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize(),function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","2720":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying containerstore specific coupons\");var $,self=this,elementIds={applyFormId:\"#cartSummary\",removeFormId:\"#removeOffer\",couponApplyId:\"#claimCode\",couponApplyButtonId:'button[name=\"addPromotionCode\"]',bagTotalId:\"form#cartSummary div:nth-child(3) > div > span\",couponRemoveId:'input[type=\"checkbox\"]',CSRF_TOKEN:'input[name=\"CSRF_TOKEN\"]'};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return $(elementIds.couponRemoveId,dom).is(\":checked\")?$.post(form[0].action,$(elementIds.CSRF_TOKEN,dom)[0].name+\"=\"+$(elementIds.CSRF_TOKEN,dom)[0].value+\"&\"+$(elementIds.couponRemoveId,dom)[0].name+\"=\"+$(elementIds.couponRemoveId,dom)[0].value,function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,$(elementIds.CSRF_TOKEN,dom)[0].name+\"=\"+$(elementIds.CSRF_TOKEN,dom)[0].value+\"&\"+$(elementIds.couponApplyId,dom)[0].name+\"=\"+$(elementIds.couponApplyId,dom)[0].value+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2723":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying The Dunkin Donuts Shop specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div.CartPromoDelete\",couponApplyId:\"input#promoCode\",couponApplyButtonId:\"div.PromoCodeSubmit > button\",bagTotalId:\"div.SubtotalPrice\",errorMessageId:\"ul#Messages_CartPromoErrors\",doNotApplyCouponsId:\"div.EmptyCartText\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId).click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},calculateTotal:calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2753":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying sportsmansguide specific coupons !!\");var $,self=this,elementIds={couponRemoveId:\"#coupon-entry a\",couponApplyId:'input[name=\"sCoupon\"]',couponApplyButtonId:'div#coupon-entry div.layout-row > button[type=\"button\"]',bagTotalId:\"div#orderSummary li.grandTotal > div.ng-binding\",errorMessageId:\"div#coupon-entry div.input-message-block.error-message > span\"};function isRemoveFinished(){return!$(elementIds.couponRemoveId).is(\":visible\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).is(\":visible\")&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2774":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying ThinkGeek specific coupons\");var $,elementIds={couponRemoveId:\"table.table tbody tr td a:odd\",couponApplyId:\"input#form_promo_cert_code.inline-submit-input\",couponApplyButtonId:\"input#form_promo_submit_button.butt0n.submit\",bagTotalId:\"strong span.ajax_total\",errorMessageId:\"div#promo-form-wrap.clearfix div.error\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return d.resolve(),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),setTimeout(function(){d.resolve()},2e3),d.promise()},calculateTotal:this.calculateTotal,onReady:this.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","2792":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Ticket Master specific coupons\");var $,self=this,elementIds={couponRemoveId:\"a.remove-promo-link\",couponApplyId:\"input#PromoCode\",couponApplyButtonId:\"button#add-promo-code-button\",bagTotalId:\"div#creditcard-expanded-payment-cart-container span > span > span\",errorMessageId1:\"div#promo-validation-container span > span\",errorMessageId2:\"div#promo-code-reason-not-applying\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId1).text()||0<$(elementIds.errorMessageId2).length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2799":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Tiger Direct coupons\");var $,self=this,elementIds={applyFormId:\"div#orders > form.form-inline\",couponApplyId:\"input#couponCodeTxt\",couponApplyButtonId:\"div.row div#submitCouponBtn\",bagTotalId:\"div#cart_totalInfo li.cart_totalInfo-grandTotal\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2816":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying tobi specific coupons\");var $,self=this,elementIds={applyFormId:\"form.checkout-promotion-form\",couponRemoveId:\"span.small.show-link > a\",couponApplyId:\"#promotion_code\",couponApplyButtonId:'input[name=\"commit\"]',bagTotalId:\"td#total > div\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),rem=$(elementIds.couponRemoveId,dom);return rem.length?$.get(rem[0].href,function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","2846":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Tracfone specific coupons\");var $,self=this,elementIds={applyFormId:\"#PromotionCodeForm\",removeFormId:\"#PromotionCodeForm\",couponRemoveId:\"#promotion_1\",couponApplyId:\"#promoCode\",couponApplyButtonId:\"#WC_PromotionCodeDisplay_div_3\",bagTotalId:\"div#ShopCartDisplay div:first-child > span\",errorMessageId:\"#promo_code_error_div\",orderId:\"#WC_PromotionCodeDisplay_FormInput_orderId_In_PromotionCodeForm_1\",storeId:\"#WC_PromotionCodeDisplay_FormInput_storeId_In_PromotionCodeForm_1\",catalogId:\"#WC_PromotionCodeDisplay_FormInput_catalogId_In_PromotionCodeForm_1\",langId:\"#WC_PromotionCodeDisplay_FormInput_langId_In_PromotionCodeForm_1\",taskType:\"#WC_PromotionCodeDisplay_FormInput_page_In_PromotionCodeForm_1\",AjaxPromotionCodeManage:\"https://shop.tracfone.com/webapp/wcs/stores/servlet/AjaxPromotionCodeManage\",AjaxOrderChangeServiceItemUpdate:\"https://shop.tracfone.com/webapp/wcs/stores/servlet/AjaxOrderChangeServiceItemUpdate\",ShopCartDisplayView:\"https://shop.tracfone.com/shop/ShopCartDisplayView?shipmentType=single&catalogId=\",appliedCoupon:\"div.discount-promo\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var code,d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return $(elementIds.couponRemoveId,dom).length?(code=$(elementIds.appliedCoupon,dom).text(),code=/\\(([^)]+)\\)/.exec(code),$(elementIds.couponApplyId,dom).val(code[1]),$(elementIds.taskType,dom).val(\"R\"),$.ajax({type:\"POST\",url:elementIds.AjaxPromotionCodeManage,data:form.serialize()+\"&requesttype=ajax\",success:function(jsonResp){$.post(elementIds.AjaxOrderChangeServiceItemUpdate,\"orderId=.&calculationUsage=-1,-6,-7&requesttype=ajax\",function(jsonResp){$.post(elementIds.ShopCartDisplayView+$(elementIds.catalogId,dom)[0].value+\"&langId=\"+$(elementIds.langId,dom)[0].value+\"&storeId=\"+$(elementIds.storeId,dom)[0].value,\"objectId=&requesttype=ajax\",function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})})})},error:function(err){d.resolve(dom)}})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$(elementIds.taskType,dom).val(\"A\"),$.ajax({type:\"POST\",url:elementIds.AjaxPromotionCodeManage,data:form.serialize()+\"&requesttype=ajax\",success:function(jsonResp){$.post(elementIds.AjaxOrderChangeServiceItemUpdate,\"orderId=.&calculationUsage=-1,-6,-7&requesttype=ajax\",function(jsonResp){$.post(elementIds.ShopCartDisplayView+$(elementIds.catalogId,dom)[0].value+\"&langId=\"+$(elementIds.langId,dom)[0].value+\"&storeId=\"+$(elementIds.storeId,dom)[0].value,\"objectId=&requesttype=ajax\",function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})})})},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2847":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Tractor Supply specific coupons\");var $,self=this,elementIds={couponRemoveId:\"#promotion_1\",couponApplyId:\"#offerCode\",couponApplyButtonId:\"#apply_code\",bagTotalId:\"#total_value\",errorMessageId:\"#offerCodeErrMsg\",promoCoverId:\"a#appliedPromoDisplay > span.plus\"};function isRemoveFinished(){return!1===$(elementIds.couponRemoveId).is(\":visible\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){$(elementIds.promoCoverId).is(\":visible\")&&$(elementIds.promoCoverId)[0].click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).is(\":visible\")&&($(elementIds.promoCoverId).is(\":visible\")&&$(elementIds.promoCoverId)[0].click(),$(elementIds.couponRemoveId)[0].click()),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1500)}).catch(function(error){d.resolve()}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId)[0].click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1500)}).catch(function(error){d.resolve()}),d.promise()},calculateTotal:function(el){var el=el||$(elementIds.bagTotalId),total=-1;return 0<el.length&&(el=$.trim(el.text()).replace(/,/g,\"\"),el=1==(el=$.trim(el).match(/\\d+[\\.\\d{0,3}]/g)).length?el[0]:el[0]+el[1],total=parseFloat(el)),total},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2899":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Ulta specific coupons\");var $,self=this,elementIds={couponRemoveId:'a[aria-label=\"Remove Coupon\"]',couponApplyId:'input[id=\"couponID\"]',couponApplyButtonId:'div#js-cartpage form > button[type=\"submit\"]',bagTotalId:\".OrderSummaryRow:nth-last-child(2) .OrderSummaryRow__value\",errorMessageId:\".Coupons__formInputField span\",doNotApplyCouponsId:\".EmptyBag\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},500)}).catch(function(error){d.resolve()}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},500)}).catch(function(error){d.resolve()}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2966":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying vista vapors specific coupons\");var $,self=this,elementIds={applyFormId:\"div.CartCode form\",couponApplyId:\"#couponcode\",couponApplyButtonId:'div.CartCode form input[type=\"submit\"]',bagTotalId:\"div.TotalRows div:last-child em\",couponRemoveId:\"form#cartForm label > a\",doNotApplyCouponsId:\"\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),rem=(dom=dom||$(document),$(elementIds.couponRemoveId,dom));return rem.length?$.get(rem[0].href,function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form.attr(\"action\"),form.serialize(),function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2990":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying WagJag specific coupons\");var $,self=this,elementIds={couponRemoveId:\"#cart-clear-promo-code\",couponApplyId:\"#promo-code\",couponApplyButtonId:\"#cart-apply-promo-code\",bagTotalId:\"#cart-final-cost\",errorMessageId:\"div#cart-promo > label\",checkoutBtn:\"button.cart-checkout-btn_top\",doNotApplyCouponsId:\"div.cart-empty-text\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).is(\":visible\")}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){!0===$(elementIds.checkoutBtn).is(\":visible\")&&$(elementIds.checkoutBtn).click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length||0<$(elementIds.couponApplyButtonSelector).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2994":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Walgreens specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div.wag-cart-coupon-details > p > span > a\",couponApplyId:\"#wag-cart-enter-code\",couponApplyButtonId:\"#wag-cart-apply-code\",bagTotalId:\"p.wag-cart-order-price-tax > span >span.product__price\",errorMessageId:\".alert__text-contain p\",doNotApplyCouponsId:\"h2#wag-cart-empty-lbl\"};function isRemoveFinished(){return!1===$(elementIds.couponRemoveId).is(\":visible\")}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).is(\":visible\")&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}).catch(function(error){d.resolve()}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId)[0].click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}).catch(function(error){d.resolve()}),d.promise()},calculateTotal:function(el){var el=el||$(elementIds.bagTotalId),total=-1;return 0<el.length&&(el=$.trim(el.text()).replace(/\\$|,/g,\"\"),total=.01*parseInt(el,10)),total},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","2996":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Walmart Grocery specific coupons\");var $,self=this,elementIds={couponRemoveId:'button[data-automation-id=\"btn-remove-promo\"]',couponApplyId:\"#promoCode\",couponApplyButtonId:'button[data-automation-id=\"btn-promo-apply\"]',bagTotalId:\"tfoot > tr > td > span\",errorMessageId:\"span.alert-error\",openPromoId:'button[data-automation-id=\"btn-promo-add\"]',closePromoId:'button[data-automation-id=\"GroceryModal-close-slidepanel-button\"]'};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponApplyId).length&&$(elementIds.openPromoId).click();var elInput,elButton,elRemove;elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length||0<$(elementIds.couponApplyButtonSelector).length,elRemove=0<$(elementIds.couponRemoveId).length,0<$(elementIds.closePromoId).length&&$(elementIds.closePromoId).click();return elRemove||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=(0==$(elementIds.couponApplyId).length&&$(elementIds.openPromoId).click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","3004":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying WatchStation specific coupons\");var $,self=this,elementIds={applyFormId:'form[id=\"promoCode\"]',couponApplyId:\"#orderPromoCode\",couponApplyButtonId:\"#promoCodeButton\",bagTotalId:\"td.orderAmount > div\",doNotApplyCouponsId:\".bagEmpty > p\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize(),function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","3028":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying NFL's specific coupons\");var $,self=this,elementIds={applyFormId:\"\",removeFormId:\"\",couponApplyId:\"coupon-code-medium\",couponApplyButtonId:\".coupon-entry-apply button\",bagTotalId:\".total-line .shipping-val\",couponRemoveId:\"\",appliedCouponId:\"\",outerCouponMessageArea:\".description-box-content\"},readyToResolveEventName=\"ReadyToResolve\",counponNameToUseForEmptying=\"EMPTYCOUPON\";function applyClicked(d){var currentUrl=document.location.href;$.get(currentUrl,function(data){data=$(data);d.resolve(data)})}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){return!0},getMissingElements:function(){return\"\"}}),{removeCoupon:function(dom){var d=$.Deferred();return document.getElementById(elementIds.couponApplyId).value=counponNameToUseForEmptying,self.triggerEvent(document.getElementById(elementIds.couponApplyId),\"change\"),$(elementIds.couponApplyButtonId).click(),document.addEventListener(readyToResolveEventName,function readyListener(event){applyClicked(d),document.removeEventListener(readyToResolveEventName,readyListener)}),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred();return document.getElementById(elementIds.couponApplyId).value=code,self.triggerEvent(document.getElementById(elementIds.couponApplyId),\"change\"),$(elementIds.couponApplyButtonId).click(),document.addEventListener(readyToResolveEventName,function readyListener(event){applyClicked(d),document.removeEventListener(readyToResolveEventName,readyListener)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0;{let event=new Event(readyToResolveEventName);return jq=document.querySelector(elementIds.outerCouponMessageArea),void new MutationObserver(function(mutationsList,observer){document.dispatchEvent(event)}).observe(jq,{attributes:!0,childList:!0,subtree:!0})}}}});","3038":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying wilsons leather specific coupons\");var $,self=this,elementIds={couponApplyId:\"#sourceCode\",couponApplyButtonId:\"input.sourceCodeApplyBtn\",bagTotalId:\"#EstTaxShipItemTable_estBasketTotal\",doNotApplyCouponsId:\"div.ml-basket-empty-msg\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),apiEndPoint=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),\"https://www.wilsonsleather.com/basket.do?method=applySourceCode&r=\"+Math.random());return $.post(apiEndPoint,$(elementIds.couponApplyId,dom)[0].name+\"=\"+code).done(function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}).fail(function(error){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","3057":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Woodwind & Brasswind specific coupons\");var $,self=this,elementIds={applyFormId:\"#couponForm\",removeFormId:\"#removeCouponForm\",couponApplyId:\"#inputtedCouponCode\",couponApplyButtonId:\"#couponSubmit\",bagTotalId:\"div#cartSummary dl.orderTotal > dt > span\",couponRemoveId:\"div#cartSummary a.coupon\",couponCode:\"#couponCode\",removeCouponID:\"#removeCouponID\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var code,d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?(code=$(elementIds.couponRemoveId,dom).attr(\"rel\"),$(elementIds.removeCouponID,dom).val(code),$.post(form[0].action,form.serialize(),function(data){data=$(data);d.resolve(data)})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(code=code.toLowerCase(),dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$(elementIds.couponCode,dom).val(code),$.post(form[0].action,form.serialize(),function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","3069":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying WWE Shop coupons\");var $,self=this,elementIds={removeFormId:\"form#cart-items-form\",applyFormId:\"div.b-cart-coupon_block-coupon_code > form\",couponApplyId:\"#dwfrm_cart_couponCode\",couponApplyButtonId:'button[name=\"dwfrm_cart_addCoupon\"]',bagTotalId:\"tr.order-total > td.order-value\",couponRemoveId:\"button.textbutton\",promoCoverId:\"div.b-cart-coupon > div:nth-child(1)\"};return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){!1===$(elementIds.couponApplyId).is(\":visible\")&&$(elementIds.promoCoverId).click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length||0<$(elementIds.couponApplyButtonSelector).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,dom)[0].name+\"=\"+$(elementIds.couponRemoveId,dom)[0].value,function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){!1===$(elementIds.couponApplyId).is(\":visible\")&&$(elementIds.promoCoverId).click();var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);console.log(\"result : \",data),d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","3098":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Zaful specific coupons\");var $,elementIds={couponRemoveId:\"#applybtn\",couponApplyId:\"#promotion_code\",couponApplyButtonId:\"#applybtn\",bagTotalId:\"#price_total\",doNotApplyCouponsId:\"div#js_cartEmpty section.noGoods > h4\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),dom=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),\"https://cart.zaful.com/fun/?act=cart_get_list&lang=&pcode=\"+code);return $.get(dom,function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),regex=/\"totalvalue\":[-]{0,1}[\\d]*[\\.]{0,1}[\\d]+/;return $.get(window.location.href,function(data){var data=data.match(regex);data.length?(data=data[0].substring(data[0].indexOf(\":\")+1,data[0].length),d.resolve({total:data})):d.resolve(this.calculateTotal(elementIds.bagTotalId))}),d.promise()},onReady:this.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){($=jq).get(\"https://cart.zaful.com/m-flow-a-update_cart.html?operate=clearCoupon&pipeline=zf\",function(data){console.log(data)})},couponLimit:0}});","4662":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying AVON specific coupons\");var $,elementIds={couponRemoveId:'form[name=\"CouponForm\"] a',couponApplyId:'form[name=\"CouponForm\"] div > input',couponApplyButtonId:'form[name=\"CouponForm\"] a',bagTotalId:\"div#ViewBagPage div.Columns_2.OrderTotal > div.Amount\",errorMessageId:'form[name=\"CouponForm\"] > div.ErrorMessage'};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $.ajax({url:\"https://www.avon.com/api/bag/removecoupon\",type:\"POST\",data:JSON.stringify({isPaymentPage:!1}),contentType:\"application/json; charset=UTF-8\",success:function(jsonResponse){d.resolve(jsonResponse)}}),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),dom=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),{couponCode:code,isPaymentPage:!1});return $.ajax({url:\"https://www.avon.com/api/bag/applycoupon\",type:\"POST\",data:JSON.stringify(dom),contentType:\"application/json; charset=UTF-8\",success:function(jsonResponse){d.resolve(jsonResponse)}}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),dom=dom&&dom.SessionModel.Cart.OrderDetails.Total?dom.SessionModel.Cart.OrderDetails.Total:(dom=$(document),$(elementIds.bagTotalId,dom).text()),total=-1;return dom&&(dom=$.trim(dom).replace(/\\$|,/g,\"\"),total=parseFloat(dom)),d.resolve({total:total}),d.promise()},onReady:this.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","4979":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying dominos specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div#js-checkoutColumns div.coupon-list > div > a\",couponApplyId:\"#Coupon_Code_Cart\",couponApplyButtonId:'div#js-checkoutColumns button[type=\"submit\"]',bagTotalId:\"div#js-checkoutColumns td.finalizedTotal.js-total\",errorMessageId:\"#Coupon_Code_Cart-error\",closePopup:\"button.card--overlay__close.js-closeButton\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){$(elementIds.closePopup).length&&$(elementIds.closePopup)[0].click(),d.resolve()},2e3)}).catch(function(){$(elementIds.closePopup).length&&$(elementIds.closePopup)[0].click(),d.resolve()}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","5640":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Nordstrom's specific coupons\");var $,logInfo,self=this,elementIds={couponRemoveId:\".promo-code .applied a\",couponApplyId:\"label.manual-promo input\",couponApplyButtonId:\"div.promo-actions input\",bagTotalId:\"div.content dl dd.price:last-child\",errorMessageId:\"label.invalid.error span.invalid\"};function isRemoveFinished(){var index=1<$(elementIds.couponRemoveId).length?1:0;return!$($(elementIds.couponRemoveId)[index]).is(\":visible\")}function triggerClick(){$(elementIds.couponApplyButtonId).trigger(\"click\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var links=$(elementIds.couponRemoveId),index=1<links.length?1:0;try{links[index].click(),logInfo(\"apply remove\")}catch(x){}return self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){var event=new CustomEvent(\"change\");return $(elementIds.couponApplyId).off(\"change\",triggerClick),$(elementIds.couponApplyId).on(\"change\",triggerClick),$(elementIds.couponApplyId).val(code),document.querySelector(elementIds.couponApplyId).dispatchEvent(event),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,logInfo=fnLogInfo}}});","5670":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){var $;console.log(\"applying onlineshoes's specific coupons\");return{calculateTotal:function(){var totalDiv=$(\".wrp-total.amount.small-4.medium-3.large-2.columns.text-left\");return 0<totalDiv.length?(totalDiv=(totalDiv=$.trim(totalDiv.text())).replace(/\\$|,/g,\"\"),{total:parseFloat(totalDiv)}):{total:-1}},applyPromoCode:function(code){0===$(\".promo-gift-certificate .accordion-navigation.active .row.collapse .small-11.medium-12.columns.accordion-header\").length&&$(\"button#Input_ApplyPromo\")[0].click(),$(\"input#Input_Promotion_CheckoutNewPromoCode\").val(code),$(\"button#Input_ApplyPromo\")[0].click()},showErrorContent:function(isVisible){},checkCouponError:function(cb){setTimeout(function(){cb({error:2<$(\".validation-summary-errors.row.summary-message .small-10.medium-11.columns .message\").text().length})},1e3)},removeCoupon:function(cb){setTimeout(function(){cb({error:!0})},1e3)},onReady:function(callback){\"function\"==typeof callback&&callback()},scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_POSTBACK,init:function(jq,fnLogInfo){$=jq,0},couponApplied:function(){var result;return!$(\".summarySuccess.row.summary-message\").hasClass(\"sah-done\")&&((result=0<$(\".summarySuccess.row.summary-message\").text().toLowerCase().indexOf(\"been applied\"))&&$(\".summarySuccess.row.summary-message\").addClass(\"sah-done\"),result)}}});","6156":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying victoriassecret's specific coupons\");var $,self=this,elementIds={promoCover:\"#fab-accordion--offersForm-header[aria-expanded=false]\",couponApplyId:\"#offerCode0\",couponApplyButtonId:\"#offersPanel section.panel-submit button.fab-btn--primary span\",couponRemoveButtonId:\"#viewport #offers .remove-offer\",bagTotalId:\"#fopc-aside .fab-h2.orderTotal\",errorContainerId:\"#viewport #offers .fab-alert\",couponAddedId:\"#viewport #offers .successfully-added-offer\"};function isRemoveFinished(){return 0<$(elementIds.promoCover).length&&$(elementIds.promoCover)[0].click(),0===$(elementIds.errorContainerId).length&&0===$(elementIds.couponAddedId).length}function isApplyFinished(){return 0<$(elementIds.errorContainerId).length||0<$(elementIds.couponAddedId).length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){return 0<$(elementIds.promoCover).length&&$(elementIds.promoCover)[0].click(),0<$(elementIds.couponRemoveButtonId).length&&$(elementIds.couponRemoveButtonId).trigger(\"click\"),self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){return 0<$(elementIds.promoCover).length&&$(elementIds.promoCover)[0].click(),$(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).trigger(\"click\"),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","6216":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying World Remit LTD specific coupons\");var $,elementIds={applyFormId:\"form#form1\",removeFormId:\"form#form1\",couponApplyId:\"#ContentPlaceHolder1_ContentPlaceHolder1_ctPayment1_txtCupon\",couponApplyButtonId:\"#ContentPlaceHolder1_ContentPlaceHolder1_ctPayment1_btnAddCupon\",bagTotalId:\"div.amount-box.total > ul > li:first-child > span\",couponRemoveId:\"#ContentPlaceHolder1_ContentPlaceHolder1_ctPayment1_ImageDeleteCupon\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var form,d=$.Deferred();return dom=dom||$(document),$(elementIds.couponRemoveId,dom).length?($('#form1 input[name = \"__EVENTTARGET\"]',dom).val(\"ctl00$ctl00$ContentPlaceHolder1$ContentPlaceHolder1$ctPayment1$ImageDeleteCupon\"),form=$(elementIds.removeFormId,dom),$.post(\"https://www.worldremit.com/send/ListReceiver.aspx\",form.serialize(),function(data){data=$(data);d.resolve(data)})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),dom=(dom=dom||$(document),$(elementIds.applyFormId,document));return $(elementIds.couponApplyId,document).val(code),$.post(dom[0].action,dom.serialize()+\"&ctl00%24ctl00%24ContentPlaceHolder1%24ContentPlaceHolder1%24ctPayment1%24btnAddCupon=Apply\",function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),totalDiv=$(elementIds.bagTotalId,dom),total=-1;return 0<totalDiv.length&&(totalDiv=$.trim(totalDiv.text()).replace(/\\USD |,/g,\"\"),total=parseFloat(totalDiv)),(totalDiv={total:total}).dom=dom,d.resolve(totalDiv),d.promise()},onReady:this.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","6281":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying verizonwireless's specific coupons\");var $,self=this,elementIds={promoCover:'div[aria-label=\"Have a promo code or discount?\"] .textAlignRight',couponRemoveId:'a[aria-label=\"Remove promo code\"]',couponApplyId:'input[name=\"promoCode\"]',couponApplyButtonSelector:\"button.primary.noSideMargin\",bagTotalId:\".cartSidebar div:nth-of-type(14) .textAlignRight\",bagTotalIdMontly:\".cartSidebar div:nth-of-type(15) .textAlignRight\",errorMessageId:\".cartSidebar .margin6 .caption\",couponAddedId:\".cartSidebar p.fontDisplayBold \"};function isRemoveFinished(){\"+\"===$(elementIds.promoCover).text()&&$(elementIds.promoCover)[0].click();$(elementIds.errorContainerId).length,$(elementIds.couponAddedId).length;return 0===$(elementIds.errorContainerId).length&&0===$(elementIds.couponAddedId).length}function isApplyFinished(){return 0<$(elementIds.errorMessageId).length||0<$(elementIds.couponAddedId).length}return CouponWorkerBase.call(this,elementIds),this.calculateTotal=function(el){var totalText,totalDiv=el||$(elementIds.bagTotalId),total=-1;return 0<totalDiv.length&&(totalText=$.trim(totalDiv.text()).replace(/\\$|,/g,\"\"),0===(total=parseFloat(totalText))&&(totalDiv=el||$(elementIds.bagTotalIdMontly),totalText=$.trim(totalDiv.text()).replace(/\\$|,/g,\"\"),total=parseFloat(totalText))),total},{removeCoupon:function(){return\"+\"===$(elementIds.promoCover).text()&&$(elementIds.promoCover)[0].click(),0<$(elementIds.couponRemoveId).length&&document.querySelector(elementIds.couponRemoveId).click(),self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){\"+\"===$(elementIds.promoCover).text()&&$(elementIds.promoCover)[0].click();var input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonSelector).removeAttr(\"disabled\"),$(elementIds.couponApplyButtonSelector).trigger(\"click\"),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","6290":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Safelite AutoGlass specific coupons\");var $,self=this,elementIds={couponRemoveId:\"section#primaryContent tr.promo > td:nth-child(1) > a\",couponApplyId:\"section#primaryContent div:nth-child(5)  input.txtPromoCode\",couponApplyButtonId:'section#primaryContent div:nth-child(5) > div.promoCodeContentGroup button[type=\"button\"]',bagTotalId:\"div.quotePrice > h4 > span:nth-child(1)\",errorMessageId:\"section#primaryContent div:nth-child(5) > div.promoCodeContentGroup  small.promoCodeError\",openPromo:\"div.adas-enhanced-cash > div > a\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponApplyId).length&&0==$(elementIds.couponRemoveId).length&&$(elementIds.openPromo).click();var elInput,elButton,elRemove,elBagTotal;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,elRemove=0<$(elementIds.couponRemoveId).length,elBagTotal=$(elementIds.bagTotalId).is(\":visible\"),(elRemove||elInput&&elButton)&&!0===elBagTotal},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=(0==$(elementIds.couponApplyId).length&&$(elementIds.openPromo).click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","6312":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying davidsbridal specific coupons\");var $,self=this,elementIds={applyFormId:\"#PromotionCodeForm\",removeFormId:\"#PromotionCodeForm\",couponRemoveId:\"#promotion_1\",couponApplyId:\"#promoCode\",couponApplyButtonId:\"#WC_PromotionCodeDisplay_links_1\",bagTotalId:\"#WC_SingleShipmentOrderTotalsSummary_td_13\",errorMessageId:\"div#dijit__MasterTooltip_0 > div.dijitTooltipContainer.dijitTooltipContents\",storeId:\"#WC_PromotionCodeDisplay_FormInput_storeId_In_PromotionCodeForm_1\",catalogId:\"#WC_PromotionCodeDisplay_FormInput_catalogId_In_PromotionCodeForm_1\",langId:\"#WC_PromotionCodeDisplay_FormInput_langId_In_PromotionCodeForm_1\",taskType:\"#WC_PromotionCodeDisplay_FormInput_page_In_PromotionCodeForm_1\",AjaxPromotionCodeManage:\"https://www.davidsbridal.com/webapp/wcs/stores/servlet/AjaxPromotionCodeManage\",AjaxOrderChangeServiceItemUpdate:\"https://www.davidsbridal.com/webapp/wcs/stores/servlet/AjaxOrderChangeServiceItemUpdate\",ShopCartDisplayView:\"https://www.davidsbridal.com/ShopCartDisplayView?shipmentType=single&catalogId=\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var promo,d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return $(elementIds.couponRemoveId,dom).length?($(elementIds.taskType,dom).val(\"R\"),promo=$(elementIds.couponRemoveId,dom).attr(\"onclick\").split(\"removePromotionCode(\")[1].split(\",\")[1].replace(/\\\"/g,\"\"),console.log(promo),$(elementIds.couponApplyId,dom).val(promo),$.post(elementIds.AjaxPromotionCodeManage,form.serialize()+\"&requesttype=ajax\",function(data){$.post(elementIds.AjaxOrderChangeServiceItemUpdate,\"orderId=.&calculationUsage=-1%2C-2%2C-5%2C-6%2C-7&requesttype=ajax\",function(data){$.post(elementIds.ShopCartDisplayView+$(elementIds.catalogId,dom).val()+\"&langId=\"+$(elementIds.langId,dom).val()+\"&storeId=\"+$(elementIds.storeId,dom).val(),\"objectId=&requesttype=ajax\",function(data){data=$(data);d.resolve(data)})})})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$(elementIds.taskType,dom).val(\"A\"),$.post(elementIds.AjaxPromotionCodeManage,form.serialize()+\"&requesttype=ajax\",function(data){$.post(elementIds.AjaxOrderChangeServiceItemUpdate,\"orderId=.&calculationUsage=-1%2C-2%2C-5%2C-6%2C-7&requesttype=ajax\",function(data){$.post(elementIds.ShopCartDisplayView+$(elementIds.catalogId,dom).val()+\"&langId=\"+$(elementIds.langId,dom).val()+\"&storeId=\"+$(elementIds.storeId,dom).val(),\"objectId=&requesttype=ajax\",function(data){data=$(data);d.resolve(data)})})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","6391":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying lootcrate specific coupons\");var $,self=this,elementIds={couponApplyId:\"#checkout_coupon_code\",couponApplyButtonId:\"#validate-coupon\",bagTotalId:\"#subscription-today-total\",errorMessageId:\"div#coupon-status > div.coupon-amount.red\"};function applyPromoCode(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),setTimeout(function(){d.resolve()},2e3),d.promise()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return applyPromoCode(\"\").then(function(){d.resolve()}),d.promise()},applyPromoCode:applyPromoCode,calculateTotal:function(){var totalDiv=$(elementIds.bagTotalId),total=-1;return 0<totalDiv.length&&(totalDiv=$.trim(totalDiv.text()).replace(/\\$|USD|\\s/g,\"\"),total=parseFloat(totalDiv)),total},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","6488":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Vimeo specific coupons\");var $,self=this,elementIds={couponRemoveId:\"form#billing_form div._2GNGv > span\",couponApplyId:\"#promo_code_input\",couponApplyButtonId:\"span#submit_promo_button > span\",bagTotalId:\"span#order_total\",promoCoverId:\"a#add_promo_link\",errorMessageId:'input[format=\"negative\"]'};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).is(\":visible\")}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponApplyId).length&&0==$(elementIds.couponRemoveId).length&&$(elementIds.promoCoverId)[0].click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=(0==$(elementIds.couponApplyId).length&&$(elementIds.promoCoverId)[0].click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","6622":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying She In specific coupons\");var $,self=this,elementIds={couponRemoveId:\"\",couponApplyId:\"div:nth-child(2) > div.apply-box.she-clearfix > div > input\",couponApplyButtonId:\"div.apply-box.she-clearfix a.she-btn-s\",bagTotalId:\"div.summary-item.total-item.she-clearfix > span.she-fr.total\",errorMessageId:\"div.coupon-point > div:nth-child(2) > p.error-tip > span\",shippingDetailsFieldId:\"div.j-first-address\"};function isRemoveFinished(){return 0==$(elementIds.couponApplyId).prop(\"disabled\")}function isApplyFinished(){return $(\"div:nth-child(1) > p.success-tip\").is(\":visible\")||$(elementIds.errorMessageId).is(\":visible\")}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0===$(elementIds.shippingDetailsFieldId).length?$(elementIds.couponApplyId).prop(\"disabled\")&&$(elementIds.couponApplyButtonId)[0].click():d.resolve(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1500)}).catch(function(error){$(elementIds.couponApplyButtonId)[0].click(),d.resolve()}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return 0===$(elementIds.shippingDetailsFieldId).length?($(elementIds.couponApplyId).val(code),code=new CustomEvent(\"input\"),document.querySelector(elementIds.couponApplyId).dispatchEvent(code),$(elementIds.couponApplyButtonId)[0].click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1500)}).catch(function(error){d.resolve()})):d.resolve(),d.promise()},calculateTotal:function(el){var el=el||$(elementIds.bagTotalId),total=-1;return 0<el.length&&(el=$.trim(el.text()).replace(/,/g,\"\"),el=1==(el=$.trim(el).match(/\\d+[\\.\\d{0,3}]/g)).length?el[0]:el[0]+el[1],total=parseFloat(el)),total},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","6700":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Drizly specific coupons\");var $,self=this,elementIds={couponRemoveId:\"span.Promo__Info--Remove\",couponApplyId:'input[name=\"redemption_input\"]',couponApplyButtonId:\"button.Button__mdc-button___iQr-d\",bagTotalId:\"form#cart_form td:nth-child(2) > strong\",errorMessageId:\".PromoCodeInput__promocode__promo-status___oYZiC\",promoCoverID:\"span.PromoCodeInput__promocode__text-string___TlY6N\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return $(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).is(\":visible\")}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponRemoveId).length&&$(elementIds.promoCoverID)[0].click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=(0<$(elementIds.promoCoverID).length&&$(elementIds.promoCoverID)[0].click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","6745":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Swanson Health specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div.promotion-message span\",couponApplyId:'input[name=\"promoCode\"]',couponApplyButtonId:'div#root div > button[type=\"submit\"]',bagTotalId:\"div#root div.cart-total-price\",errorMessageId:\"div#root div.promo-alert\",doNotApplyCouponsId:\"div.accordion-checkout-brain\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId).click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","6804":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Barkbox specific coupons\");var $,self=this,elementIds={couponRemoveId:\"section#summary div:nth-last-child(2) > span.value > p > a > i\",couponApplyId:\"input#subscription_coupon_coupon_code\",couponApplyButtonId:'form#edit_subscription_coupon button[type=\"submit\"]',bagTotalId:\"section#summary p.value\",errorMessageId:\"form#edit_subscription_coupon p\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),setTimeout(function(){self.waitFor(isApplyFinished).then(function(){d.resolve()})},1250),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","6818":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying beauty brands specific coupons\");var $,self=this,elementIds={couponApplyId:\"#sourceCode\",couponApplyButtonId:\"input.form_but.sourceCodeApplyBtn\",bagTotalId:\"#EstTaxShipItemTable_estBasketTotal\",doNotApplyCouponsId:\"div#mlAccordionCheckoutApp\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),dom=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),\"https://www.beautybrands.com/basket.do?method=validateSourceCode&sourceCode=\"+code+\"&instart_disable_injection=true\");return $.get(dom,function(jsonResp){var APIEndPoint1=\"https://www.beautybrands.com/basket.do?method=applySourceCode&r=\"+Math.random()+\"&instart_disable_injection=true\";$.post(APIEndPoint1,\"sourceCode=\"+code).done(function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}).catch(function(error){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","6864":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Olay specific coupons\");var $,self=this,elementIds={couponApplyId:\"input#couponCode\",couponApplyButtonId:\"button#couponSubmit\",bagTotalId:\"div#CheckoutCartBag div._1K7MmQgoXFr7eVZKQ2ttjB\",errorMessageId:\"div#couponCodeErrorMsg\",couponRemoveId:\"div#CheckoutCartBag div._7cF-6NLN9xUywtBukim-F > div > div > a\",offerDismissId:\"div#checkout-app main > div > div > div > div > a\"};function isRemoveFinished(){return!1===$(elementIds.couponRemoveId).is(\":visible\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).is(\":visible\")}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).is(\":visible\")&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId),$(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){$(elementIds.offerDismissId).is(\":visible\")&&$(elementIds.offerDismissId)[0].click(),d.resolve()},2500)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","7022":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Mattress Firm specific coupons\");var $,self=this,elementIds={applyFormId:\"#cart-items-form\",removeFormId:\"#cart-items-form\",couponRemoveId:\"#deleteCoupon\",couponApplyId:\"#dwfrm_cart_couponCode\",couponApplyButtonId:\"#add-coupon\",bagTotalId:\"form#cart-items-form tr.order-total > td.order-value\",errorMessageId:\"div#add-promo-code-input-id > div.error\",doNotApplyCouponsId:\"#shippingaddress\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,dom)[0].name+\"=\"+$(elementIds.couponRemoveId,dom)[0].value+\"&dwfrm_cart_updateCart=dwfrm_cart_updateCart\",function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value+\"&dwfrm_cart_updateCart=dwfrm_cart_updateCart&\"+$(elementIds.couponApplyId,dom)[0].name+\"=\"+code,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","7535":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying thrive market specific coupons\");var $,self=this,elementIds={couponRemoveId:'button[data-test-id=\"coupon__remove\"]',couponApplyId:\"#coupon_code\",couponApplyButtonId:'div#coupon button[data-test-id=\"coupon__apply\"]',bagTotalId:\"div#review-total-list div span:last-child\",errorMessageId:'div#coupon div[data-test-id=\"coupon__help-text\"]'};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId).click(),self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","7597":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Jewlr specific coupons\");var $,self=this,elementIds={couponRemoveId:\"#remove_coupon_link\",couponApplyId:\"#cart_promo_code\",couponApplyButtonId:\"div.cart__promo-form button\",bagTotalId:\"div#summary_form_container div.text-right:last-child > strong\",errorMessageId:\"div#summary_form_container div.cart__promo-js.cart__promo.container--sm > p\",doNotApplyCouponsId:\"div#cart_body h2\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","7739":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying NordVPN specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div#payment-section div.nord-badge >a\",couponApplyId:'input[name=\"coupon\"]',couponApplyButtonId:'div#payment-section div.flex.items-end.pr-2 > button[type=\"submit\"]',bagTotalId:\"div#payment-section div:nth-child(8) > div > span\",errorMessageId:\"div#payment-section div.mt-2.text-micro.font-medium.flex.text-red > div\",openPromo:\"div#payment-section div > a\"};function isRemoveFinished(){return!1===$(elementIds.couponRemoveId).is(\":visible\")}function isApplyFinished(){return $(elementIds.couponRemoveId).is(\":visible\")||$(elementIds.errorMessageId).is(\":visible\")}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponApplyId).length&&!1===$(elementIds.couponRemoveId).is(\":visible\")&&$(elementIds.openPromo)[0].click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.couponRemoveId).is(\":visible\")&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=(0==$(elementIds.couponApplyId).length&&$(elementIds.openPromo)[0].click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},calculateTotal:function(el){var el=el||$(elementIds.bagTotalId),total=-1;return 0<el.length&&(el=(el=el.text().replace(/\\USD |,/g,\"\")).replace(/\\$|,/g,\"\"),total=parseFloat(el)),total},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","7815":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying partycity specific coupons\");var $,self=this,elementIds={applyFormId:\"#cart-items-form\",removeFormId:\"#cart-items-form\",couponRemoveId:\"#remove-coupon\",couponApplyId:\"#dwfrm_cart_couponCode\",couponApplyButtonId:\"#add-coupon\",bagTotalId:\"main#primary li.order-total > span:last-child\",errorMessageId:\"main#primary div.promo-container > div\",csrf_token:'input[name=\"csrf_token\"]'};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,$(elementIds.couponRemoveId,dom)[0].name+\"=\"+$(elementIds.couponRemoveId,dom)[0].value+\"&\"+$(elementIds.csrf_token,dom)[0].name+\"=\"+$(elementIds.csrf_token,dom)[0].value,function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,$(elementIds.couponApplyId,dom)[0].name+\"=\"+$(elementIds.couponApplyId,dom)[0].value+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value+\"&\"+$(elementIds.csrf_token,dom)[0].name+\"=\"+$(elementIds.csrf_token,dom)[0].value,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","7902":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying vineyardvines specific coupons\");var $,self=this,elementIds={couponRemoveId:\"#removeBtn_0\",couponApplyId:\"#promo-code\",couponApplyButtonId:\"#add-coupon\",bagTotalId:\"main#maincontent dd.ordersummary_cost_total\",errorMessageId:\"#error-cart-promo-code\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred();return $(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","8054":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying nectarsleep specific coupons\");var $,self=this,elementIds={openPromo:\"#have_promo_code\",couponRemoveId:\"#checkout_remove_coupon\",couponApplyId:\"#coupon\",couponApplyButtonId:\"#apply_coupon_btn\",bagTotalId:\"#total_price\",errorMessageId:\"#dialog\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){var elInput,elButton;return $(elementIds.openPromo).click(),elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length||0<$(elementIds.couponApplyButtonSelector).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){return 0===$(elementIds.couponApplyButtonId).length&&$(elementIds.openPromo).click(),$(elementIds.couponApplyId).val(code),$(elementIds.couponApplyButtonId).click(),$(elementIds.errorMessageId)&&$(\"#dialog div\").click(),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","8372":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying IDLE Sleep's specific coupons\");var $,self=this,elementIds={couponRemoveId:\"span.remove-offer > a\",couponApplyId:\"tbody > tr.cart-discount > td > div > div > input#idlslpoffractvtcode\",couponApplyButtonId:\"tbody > tr.cart-discount > td > div > div > a\",bagTotalId:\"tbody > tr.order-total > td > strong > span.amount > bdi\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),$(elementIds.couponRemoveId,dom).length?$.post(\"https://www.idlesleep.com/wp-admin/admin-ajax.php\",\"action=idlslpOfferRemove\",function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred();return dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),$.post(\"https://www.idlesleep.com/wp-admin/admin-ajax.php?action=idlslpOfferActivation\",\"action=idlslpOfferActivation&code=\"+code,function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","8710":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying pizzahut specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div:last-child > div > div.col-xs-2.price-column > div > a\",couponApplyId:\"#coupon-code\",couponApplyButtonId:\".ph-order-apply\",bagTotalId:\"div:last-child > div.col-sm-6.text-right > h4\",errorMessageId:\"div:first-child > div > p > span.ph-invalid-coupon > span\",discountId:\"div.col-sm-6 > h4.ph-discount-label\",closePopup:\"div.row.hidden-xs.ng-scope > div > div:last-child > a\",closeInvalidPromo:\"div.container-fluid.ph-padding-top.ph-padding-bottom div.col-xs-5 a\"};function isRemoveFinished(){return!1===$(elementIds.discountId).is(\":visible\")}function isApplyFinished(){return $(elementIds.closeInvalidPromo).is(\":visible\")&&$(elementIds.closeInvalidPromo)[0].click(),$(elementIds.discountId).is(\":visible\")||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return $(elementIds.discountId).is(\":visible\")&&($(elementIds.couponRemoveId)[0].click(),$(elementIds.closePopup)[0].click()),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}).catch(function(error){$(elementIds.closeInvalidPromo).is(\":visible\")&&$(elementIds.closeInvalidPromo)[0].click(),d.resolve()}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","8796":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Yankee Candle specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div.promoRemove > a\",couponApplyId:\"input#promocode\",couponApplyButtonId:\"button#apply_btn\",bagTotalId:\"div.cartOrderTotal > div:nth-child(2)\",errorMessageId:\"p.errorMsg\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},900)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},900)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","9972":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Hoka One specific coupons\");var $,self=this,elementIds={couponRemoveId:\"div#promoFormDisplay i\",couponApplyId:\"#couponCode\",couponApplyButtonId:\"#promoFormDisplay button\",bagTotalId:\"div:nth-child(6) div.col-5 p\",errorMessageId:\"#promoFormDisplay span.coupon-error-message\",promoCoverId:\"sdiv.promo-form button span\",doNotApplyCouponsId:\"div.emptyCartMessage\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponRemoveId).length&&$(elementIds.promoCoverId).click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1500)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=(!1===$(elementIds.couponApplyId).is(\":visible\")&&$(elementIds.promoCoverId).click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId)[0].click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},2e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","10387":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Oriental Trading Company specific coupons\");var $,elementIds={couponApplyId:\"input#promo_code\",couponApplyButtonId:\"button.p_apply_promo\",bagTotalId:\"main#maincontent div.u_txt_right.u_txtPrice.u_bold.u_uppercase > span\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred();return dom=dom||$(document),$.ajax({type:\"GET\",url:\"https://www.orientaltrading.com/rest/promocode/\"+code+\"/apply/shoppingcart\",success:function(jsonResp){d.resolve(jsonResp)},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),dom=dom&&dom.total?dom.total:(dom=$(document),$(elementIds.bagTotalId,dom).text()),total=-1;return dom&&(dom=$.trim(dom).replace(/\\$|,/g,\"\"),total=parseFloat(dom)),d.resolve({total:total}),d.promise()},onReady:this.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","11044":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying TheGreatCourses specific coupons\");var $,self=this,elementIds={couponApplyId:\"input#coupon_code\",couponApplyButtonId:\"button#coupon-submit span > span\",bagTotalId:\"table#shopping-cart-totals-table strong > span\",appliedElementID:\"div#coupon-display\",errorMessageId:\"div#advice-validate-ajax-coupon_code\"};function isApplyFinished(){return $(elementIds.errorMessageId).text()||0<$(elementIds.appliedElementID).length}function applyPromoCode(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},3e3)}),d.promise()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return applyPromoCode(\"invld\").then(function(){d.resolve()}),d.promise()},applyPromoCode:applyPromoCode,calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","11312":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying 123ink specific coupons\");var $,self=this,elementIds={couponRemoveId:\"a#remove-coupon-btn\",couponApplyId:'input[name=\"coupon\"]',couponApplyButtonId:\"button#apply-coupon-btn\",bagTotalId:\"#shopping_cart_total\",errorMessageId:\"div#shopping-cart-messages > div.alert-error\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","11424":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Beautycounter specific coupons\");var $,self=this,elementIds={couponRemoveId:\"button._1zJir\",couponApplyId:'input[data-testid=\"promo-code\"]',couponApplyButtonId:'button[data-testid=\"promo-submit\"]',bagTotalId:'div[data-testid=\"orderReview-grandTotal\"]'};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","11978":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Chewy specific coupons\");var $,self=this,elementIds={couponRemoveId:\"a.cw-margin__start\",couponApplyId:\"div.sfw-checkout__promocode__field input\",couponApplyButtonId:\"div.cw-row__item>button\",bagTotalId:\"div.sfw-checkout__order__total > span:nth-child(2)\",errorMessageId:\"div.sfw-checkout__promocode__field p.cw-form-messaging__item--error\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},900)}).catch(function(error){d.resolve()}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1800)}).catch(function(error){d.resolve()}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","12127":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying AccuQuilt specific coupons\");var $,elementIds={applyFormId:\"#discount-coupon-form\",removeFormId:\"#discount-coupon-form\",couponApplyId:\"input#coupon_code\",couponApplyButtonId:\"#discount-coupon-form button.apply\",bagTotalId:\"div#cart-totals strong > span\",couponRemoveId:\"form#discount-coupon-form button.cancel\",formKeyId:'input[name = \"form_key\"]',couponOpenPromo:\"div#block-discount > div.title\"};return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){!$(elementIds.couponApplyId).length<0&&$(elementIds.couponOpenPromo)[0].click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(dom){var d=$.Deferred(),rem=(dom=dom||$(document),$(elementIds.couponRemoveId,dom)),form=$(elementIds.removeFormId,dom),removeCodeValue=$(elementIds.couponApplyId,dom).text(),formKey=$(elementIds.formKeyId,dom);return form.length&&rem.length?(rem=\"remove=1&coupon_code=\"+removeCodeValue+\"&\"+formKey[0].name+\"=\"+formKey[0].value,$.ajax({type:\"POST\",url:form[0].action,data:rem,contentType:\"application/x-www-form-urlencoded\",headers:{\"upgrade-insecure-requests\":\"1\"},success:function(data){data=$(data);d.resolve(data)},error:function(err){d.resolve(dom)}})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom)),formKey=($(elementIds.couponApplyId,dom).val(code),$(elementIds.formKeyId,dom)),code=\"remove=0&coupon_code=\"+code+\"&\"+formKey[0].name+\"=\"+formKey[0].value;return $.ajax({type:\"POST\",url:form[0].action,data:code,contentType:\"application/x-www-form-urlencoded\",headers:{\"upgrade-insecure-requests\":\"1\"},success:function(data){data=$(data);d.resolve(data)},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),regex=/\"grand_total\":[-]{0,1}[\\d]*[\\.]{0,1}[\\d]+/;return $.get(window.location.href,function(data){var data=data.match(regex);data.length?(data=data[0].substring(data[0].indexOf(\":\")+1,data[0].length),d.resolve({total:data})):d.resolve(this.calculateTotal(elementIds.bagTotalId))}),d.promise()},onReady:this.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","12646":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Dr.Berg specific coupons\");var $,self=this,elementIds={couponRemoveId:\"span#cancel-coupon > span\",couponApplyId:\"input#coupon_code\",couponApplyButtonId:\"div.discount-btn\",bagTotalId:\"div#cart-totals strong > span\",errorMessageId:\"div.error-message > div > span\",promoCoverId1:\"strong#block-discount-heading\",promoCoverId2:\"p.discount-another-coupon\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0==$(elementIds.couponRemoveId).length&&($(elementIds.promoCoverId1).click(),$(elementIds.promoCoverId2).is(\":visible\")&&$(elementIds.promoCoverId2)[0].click());var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},3e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=(!1===$(elementIds.couponApplyId).is(\":visible\")&&$(elementIds.promoCoverId1).click(),!1===$(elementIds.couponApplyId).is(\":visible\")&&$(elementIds.promoCoverId2).click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},4e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","12960":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying ShopHQ specific coupons\");var $,self=this,elementIds={couponApplyId:\"input#PromoCode\",couponApplyButtonId:\"button#submit-promocode-button\",bagTotalId:\"div#cart-summary-total\",errorMessageId:\"div#promocode-error > div\"};function isApplyFinished(){return $(elementIds.errorMessageId).text()}function applyPromoCode(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return applyPromoCode(\"invld\").then(function(){d.resolve()}),d.promise()},applyPromoCode:applyPromoCode,calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","1526_Kohls_off":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Kohls specific coupons\");var $,self=this,elementIds={couponApplyId:\"#promo-kcInput\",couponApplyButtonId:\"#applyInputButton\",bagTotalId:\"div#totalcharges\",couponRemoveId:\"div#tr-wallet-content-placeholder a.cancel-offer\",applyUrl:\"https://www.kohls.com/cnc/checkout/applykccoupons\",removeUrl:\"https://www.kohls.com/cnc/checkout/removekccoupons\",cartUrl:\"https://www.kohls.com/checkout/shopping_cart.jsp\",openPromoCover:\"div#shopping_Bag_Rpanel div.fleft.kohlsCashContainer > a\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0===$(elementIds.couponApplyId).length&&$(elementIds.openPromoCover)[0].click();var elInput,elButton;return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length||0<$(elementIds.couponApplyButtonSelector).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(dom){var encodedData,d=$.Deferred();if(dom=dom||$(document),!$(elementIds.couponRemoveId).length&&!dom.couponCode)return d.resolve();if($(elementIds.couponRemoveId).length){for(var i=0;i<$(elementIds.couponRemoveId).length;i++)$(elementIds.couponRemoveId)[i].click();self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)})}return dom.couponCode&&(encodedData={couponType:\"promo\",couponCode:dom.couponCode},$.ajax({url:elementIds.removeUrl,type:\"POST\",data:JSON.stringify(encodedData),contentType:\"application/json; charset=utf-8\",dataType:\"json\",success:function(jsonResponse){d.resolve(jsonResponse)},error:function(jqXHR,error){d.resolve(dom)}})),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred();return $.ajax({url:elementIds.applyUrl,type:\"POST\",data:JSON.stringify({couponType:\"promo\",promoCode:code}),contentType:\"application/json; charset=utf-8\",dataType:\"json\",success:function(jsonResponse){jsonResponse.success&&(jsonResponse.appliedcode=code),d.resolve(jsonResponse)},error:function(jqXHR,error){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),regex=/\"total\":[-]{0,1}[\\d]*[\\.]{0,1}[\\d]+/;return $.get(elementIds.cartUrl,function(data){var appliedCoupon,data=data.match(regex);data.length?(data=data[0].substring(data[0].indexOf(\":\")+1,data[0].length),appliedCoupon={couponCode:dom?dom.appliedcode:null},d.resolve({total:data,dom:appliedCoupon})):d.resolve(this.calculateTotal(elementIds.bagTotalId))}),d.promise()},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:3}});","cliniqueunused":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying clinique specific coupons\");var $,self=this,elementIds={applyFormId:\"#offer_code\",couponApplyId:\"#form--offer_code--field--OFFER_CODE\",couponApplyButtonId:\"form#offer_code > input.button.alt-button\",bagTotalId:\"div#checkout-right-col tr.spacer.grand-total > td\",formOfferCodeField:\"#form--offer_code--field--FORM_URL\",invalidOfferCode:\"[id^=invalid_offer_code]\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve($(document)),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom)),dom=($(elementIds.couponApplyId,dom).val(code),\"_SUBMIT=offer_code&\"+$(elementIds.formOfferCodeField)[0].name+\"=\"+$(elementIds.formOfferCodeField)[0].value+\"&OFFER_CODE=\"+code);return $.post(form[0].action,dom,function(data){var original,data=$(data);$(elementIds.invalidOfferCode,data).text()&&(original=$(elementIds.bagTotalId).text(),$(elementIds.bagTotalId,data).text(original)),d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","gap":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Gap (new) properties' specific coupons\");var $,self=this,elementIds={couponApplyId:\"input#enter-promo-code-input\",couponApplyButtonId:\"button.promos-button\",couponRemoveId:\"button.promo-item-remove-button\",bagTotalId:\"span.total-price > span\",errorMessageId:'div.promos-text-field > label > div[role= \"alert\"]',doNotApplyCouponsId:\".empty-bag__container\"};function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred(),el=$(elementIds.couponRemoveId);return 0<el.length&&el.click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},500)}).catch(function(error){d.resolve()}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),setTimeout(function(){self.waitFor(isApplyFinished).then(function(){d.resolve()}).catch(function(){d.resolve()})},500),d.promise()},calculateTotal:function(el){var el=el||$(elementIds.bagTotalId),total=-1;return 0<el.length&&(el=$.trim(el.text()).replace(/,/g,\"\"),el=1==(el=$.trim(el).match(/\\d+[\\.\\d{0,3}]/g)).length?el[0]:el[0]+el[1],total=parseFloat(el)),total},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0}}});","hanes":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying Hanes specific coupons\");var $,elementIds={applyFormId:\"#discount-coupon-form\",removeFormId:\"#discount-coupon-form\",couponRemoveId:\"form#discount-coupon-form a\",couponApplyId:\"input#coupon_code_fake\",couponApplyButtonId:'form#discount-coupon-form button[type=\"button\"]',bagTotalId:\"div#cart-totals strong > span\",couponCodeId:\"#coupon_code\",lastCodeId:\"#last_code\",doNotApplyCouponsId:\".cart-empty\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var code,d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return $(elementIds.couponRemoveId,dom).length?(code=(code=$(\".amCouponsCode\",dom).text()).replace(/\\s/g,\"\"),$(elementIds.couponApplyId,dom).val(code),$(elementIds.couponCodeId,dom).val(code),$(elementIds.lastCodeId,dom).val(code),$.ajax({type:\"POST\",url:form[0].action,data:form.serialize(),success:function(data){data=$(data);d.resolve(data)},error:function(err){d.resolve(dom)}})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$(elementIds.lastCodeId,dom).val(code),$(elementIds.couponCodeId,dom).val(code),$.ajax({type:\"POST\",url:form[0].action,data:form.serialize(),success:function(data){data=$(data);d.resolve(data)},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),regex=/\"grand_total\":[-]{0,1}[\\d]*[\\.]{0,1}[\\d]+/;return $.get(window.location.href,function(data){var data=data.match(regex);data.length?(data=data[0].substring(data[0].indexOf(\":\")+1,data[0].length),d.resolve({total:data})):d.resolve(this.calculateTotal(elementIds.bagTotalId))}),d.promise()},onReady:this.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","jcrew":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Jcrew specific coupons\");var $,self=this,elementIds={couponRemoveId:'div#__next ul.promo_list__1fJVj > li > button[type=\"button\"]',couponApplyId:\"form#promo input\",couponApplyButtonId:\"form#promo button > span\",bagTotalId:'div[data-qaid=\"estimatedTotal\"]',errorMessageId:'div[theme=\"danger\"]',couponOpenPromo:'div#__next div.promo_wrapper__mEQkh > button[type=\"button\"]'};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){var elInput,elButton;return $(elementIds.couponOpenPromo).click(),elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length,0<$(elementIds.couponRemoveId).length||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId).click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=(0==$(elementIds.couponApplyId).length&&$(elementIds.couponOpenPromo).click(),$(elementIds.couponApplyId));return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},750)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","lake-side":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying LTD Commodities's specific coupons\");var $,self=this,elementIds={applyFormId:\"#couponCodeForm\",couponApplyId:\"input#applyCouponInput\",couponApplyButtonId:\"#applyCouponCode\",bagTotalId:\"#cart_promoSummary > section.order-sum__cont > aside > p:nth-child(4) > span\",doNotApplyCouponsId:\"#continuePaymentDiv\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred();return dom=dom||$(document),d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom)),code=($(elementIds.couponApplyId,dom).val(code.toUpperCase()),$(elementIds.couponApplyButtonId,dom)[0].name),dom=$(elementIds.couponApplyButtonId,dom)[0].value;return $.post(form[0].action,form.serialize()+\"&\"+code+\"=\"+dom,function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0}}});","lancome":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying coupons\");var $,self=this,elementIds={couponRemoveId:'li.c-cart-coupon__list-item > button[type=\"submit\"]',couponApplyId:'input[name=\"couponcode\"]',couponApplyButtonId:\"div.c-form__row > div.c-cart-coupon__group-button\",bagTotalId:\"section.c-cart-box.m-summary > div > table tr.c-cart-summary-table__item.m-total > td\",doNotApplyCouponsId:\"div.c-cart-empty\",formId:\"div.c-cart__main > div > form\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var couponCode,APIEndPoint,d=$.Deferred();return dom=dom||$(document),$(elementIds.couponRemoveId,dom).length?(couponCode=\"coupon_remove_\"+(couponCode=$(elementIds.couponRemoveId,dom).attr(\"data-coupon\"))+\"=\"+couponCode,APIEndPoint=$(elementIds.formId,dom).attr(\"action\")+\"?ajax=true\",$.ajax({type:\"POST\",url:APIEndPoint,data:couponCode,success:function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),code=(dom=dom||$(document),\"couponcode=\"+code+\"&form_id=coupon&apply=\"),APIEndPoint=$(elementIds.formId,dom).attr(\"action\")+\"?ajax=true\";return $.ajax({type:\"POST\",url:APIEndPoint,data:code,success:function(data){$.get(window.location.href,function(data){data=$(data);d.resolve(data)})},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","levis":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Levis specific coupons\");var $,self=this,elementIds={couponRemoveId:\"button.remove__code\",couponApplyId:\"input#voucherCode\",couponApplyButtonId:\"button.promo-submit-button\",bagTotalId:\"div.line-total > span.value\",errorMessageId:\"div.promo-error-msg > div\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId).click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},3500)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"input\"),$(elementIds.couponApplyButtonId).removeAttr(\"disabled\"),$(elementIds.couponApplyButtonId).click(),self.waitFor(isApplyFinished).then(function(){setTimeout(function(){d.resolve()},3e3)}),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","one23-inkjets":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying 4InkJets specific coupons\");var $,self=this,elementIds={couponRemoveId:\"form#discount-coupon-cancel-form-1 i\",couponApplyId:\"input#coupon_code\",couponApplyButtonId:\"button#btn-apply-coupon\",bagTotalId:\"table#shopping-cart-totals-table strong > span\",errorMessageId:\"div#mobile-wrap div:nth-child(5) > ul > li > ul > li > span\",doNotApplyCouponsId:\"tr.empty-cart-row\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){var d=$.Deferred();return 0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)}),d.promise()},applyPromoCode:function(code){var d=$.Deferred(),input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).click(),setTimeout(function(){self.waitFor(isApplyFinished).then(function(){d.resolve()})},3e3),d.promise()},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","saksoff":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying saks off 5th specific coupons\");var $,self=this,elementIds={couponApplyId:\"#promo-code-number\",couponApplyButtonId:'main#main div.hbc-promo-code__submit-btn-wrapper > button[type=\"submit\"]',bagTotalId:\"div.hbc-price-display__line-item.hbc-price-display__line-item--items-total > span:last-child\",couponRemoveId:\".hbc-promo-code-display__remove-link\"};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),rem=(dom=dom||$(document),$(elementIds.couponRemoveId));return rem.length||dom.couponCode?(rem.length&&(0<rem.length&&rem[0].click(),self.waitFor(isRemoveFinished).then(function(){setTimeout(function(){d.resolve()},1e3)})),dom.couponCode&&(rem=dom.couponCode,dom=window.location.origin+\"/checkout/checkout.jsp\",$.ajax({url:dom,type:\"POST\",data:\"promoCode=\"+rem+\"&bmForm=remove_promo_code_saks_bag_service\",success:function(jsonResponse){d.resolve(jsonResponse)}})),d.promise()):d.resolve()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),code=(dom=dom||$(document),$(elementIds.couponApplyId,dom).val(code),\"bmForm=applyPromoSaksBag&promoCode=\"+code),APIEndPoint=window.location.origin+\"/checkout/checkout.jsp\";return $.ajax({url:APIEndPoint,type:\"POST\",data:code,success:function(jsonResponse){d.resolve(jsonResponse)},error:function(){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),couponCode=null;dom&&dom.cartSummary?(priceText=dom.cartSummary.grandTotalWithoutFormatting,dom.promoCodes&&(couponCode=dom.promoCodes[0].promoCode)):(dom=$(document),priceText=$(elementIds.bagTotalId,dom).text());var priceText,dom=-1;return priceText&&(priceText=$.trim(priceText).replace(/\\$|,/g,\"\"),dom=parseFloat(priceText)),d.resolve({total:dom,dom:{couponCode:couponCode}}),d.promise()},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","sephoraunused":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying Sephora specific coupons..\");var $,self=this,elementIds={couponRemoveId:\"button.css-1p74h9j\",couponApplyId:\"input#promoInput\",couponApplyButtonId:'form > button[type=\"submit\"]',bagTotalId:\"div.css-1apvkrg > span:last-child\",errorMessageId:\"form > div > p\",freebiePopUpCloseId:'div.css-1ur4oip > button[type=\"button\"]'};function isRemoveFinished(){return 0===$(elementIds.couponRemoveId).length}function isApplyFinished(){return 0<$(elementIds.couponRemoveId).length||$(elementIds.errorMessageId).text()}return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(){return 0<$(elementIds.freebiePopUpCloseId).length?$(elementIds.freebiePopUpCloseId)[0].click():0<$(elementIds.couponRemoveId).length&&$(elementIds.couponRemoveId)[0].click(),self.waitForRemoveCoupon(isRemoveFinished)},applyPromoCode:function(code){var input=$(elementIds.couponApplyId);return input.val(code),self.triggerEvent(input.get(0),\"change\"),$(elementIds.couponApplyButtonId).prop(\"disabled\",!1),$(elementIds.couponApplyButtonId).click(),self.waitForApplyPromoCode(code,isApplyFinished)},calculateTotal:self.calculateTotal,onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_ASYNC,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","sf-discount-coupon-form":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"Applying sF_discount-coupon-form coupons\");var $,elementIds={applyFormId:\"#discount-coupon-form\",removeFormId:\"#discount-coupon-form\",couponApplyId:\"input#coupon_code\",couponApplyButtonId:'#discount-coupon-form button[type=\"button\"]',bagTotalId:\"div#cart-totals strong > span\",couponRemoveId:\"form#discount-coupon-form button.action.cancel\",formKeyId:'input[name = \"form_key\"]'};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),rem=(dom=dom||$(document),$(elementIds.couponRemoveId,dom)),form=$(elementIds.removeFormId,dom),removeCodeValue=$(elementIds.couponApplyId,dom).text(),formKey=$(elementIds.formKeyId,dom);return form.length&&rem.length?(rem=\"remove=1&coupon_code=\"+removeCodeValue+\"&\"+formKey[0].name+\"=\"+formKey[0].value,$.ajax({type:\"POST\",url:form[0].action,data:rem,contentType:\"application/x-www-form-urlencoded\",headers:{\"upgrade-insecure-requests\":\"1\"},success:function(data){data=$(data);d.resolve(data)},error:function(err){d.resolve(dom)}})):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom)),formKey=($(elementIds.couponApplyId,dom).val(code),$(elementIds.formKeyId,dom)),code=\"remove=0&coupon_code=\"+code+\"&\"+formKey[0].name+\"=\"+formKey[0].value;return $.ajax({type:\"POST\",url:form[0].action,data:code,contentType:\"application/x-www-form-urlencoded\",headers:{\"upgrade-insecure-requests\":\"1\"},success:function(data){data=$(data);d.resolve(data)},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),regex=/\"grand_total\":[-]{0,1}[\\d]*[\\.]{0,1}[\\d]+/;return $.get(window.location.href,function(data){var data=data.match(regex);data.length?(data=data[0].substring(data[0].indexOf(\":\")+1,data[0].length),d.resolve({total:data})):d.resolve(this.calculateTotal(elementIds.bagTotalId))}),d.promise()},onReady:this.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","sf-dwfrm-cart-2":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying sF_dwfrm_cart_2 coupons\");var $,self=this,elementIds={applyFormId:'div.cart-footer form[name=\"dwfrm_cart\"]',removeFormId:'div.cart-footer form[name=\"dwfrm_cart\"]',couponApplyId:\"#dwfrm_cart_couponCode\",couponApplyButtonId:\"#add-coupon\",bagTotalId:\"div.estimated-price \",couponRemoveId:'div.cart-footer form[name=\"dwfrm_cart\"] button.promo-remove',doNotApplyCouponsId:\"h1.empty-heading\"};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));if(form.length&&$(elementIds.couponRemoveId,dom).length)for(var i=0;i<$(elementIds.couponRemoveId,dom).length;i++)$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,dom)[i].name+\"=\"+$(elementIds.couponRemoveId,dom)[i].value,function(data){var result=$(data);setTimeout(function(){d.resolve(result)},500)});else d.resolve(dom);return d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","sf-dwfrm-cart":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying sF_dwfrm_cart coupons\");var $,self=this,elementIds={applyFormId:'form[name=\"dwfrm_cart\"]',removeFormId:'form[name=\"dwfrm_cart\"]',couponApplyId:\"#dwfrm_cart_couponCode\",couponApplyButtonId:'button[name=\"dwfrm_cart_addCoupon\"]',bagTotalId:\"tr.order-total > td\",couponRemoveId:'button[name=\"dwfrm_cart_coupons_i0_deleteCoupon\"]'};return CouponWorkerBase.call(this,elementIds),{removeCoupon:function(dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.removeFormId,dom));return form.length&&$(elementIds.couponRemoveId,dom).length?$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponRemoveId,dom)[0].name+\"=\"+$(elementIds.couponRemoveId,dom)[0].value,function(data){data=$(data);d.resolve(data)}):d.resolve(dom),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.post(form[0].action,form.serialize()+\"&\"+$(elementIds.couponApplyButtonId,dom)[0].name+\"=\"+$(elementIds.couponApplyButtonId,dom)[0].value,function(data){data=$(data);d.resolve(data)}),d.promise()},calculateTotal:function(dom){return dom=dom||$(document),self.calculateTotalAsync($(elementIds.bagTotalId,dom),dom)},onReady:self.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","sf-promo-code-form":"var CouponMerchantWorker;\"undefined\"==typeof CouponInjection||CouponInjection.hasOwnProperty(\"workerInjected\")||(CouponInjection.workerInjected=!0,CouponMerchantWorker=function(){console.log(\"applying sF_promo-code-form specific coupons\");var $,elementIds={applyFormId:\"form.promo-code-form\",couponApplyId:\"input#couponCode\",bagTotalId:\"div.totals .grand-total\",couponRemoveId:'button[data-target=\"#removeCouponModal\"]',couponRemoveUrl:\"button.delete-coupon-confirmation-btn\",doNotApplyCouponsId:\".empty-cart\",couponApplyButtonId:'form[name=\"promo-code-form\"] button[type=\"submit\"]'};return CouponWorkerBase.call(this,elementIds,{checkInitialElements:function(){0<$(elementIds.couponRemoveId).length&&($(elementIds.couponRemoveId)[0].click(),$(elementIds.couponRemoveUrl).click());var elInput,elRemove,elButton;return elInput=0<$(elementIds.couponApplyId).length,elRemove=0<$(elementIds.couponRemoveId).length,elButton=0<$(elementIds.couponApplyButtonId).length,elRemove||elInput&&elButton},getMissingElements:function(){return\"\"}}),{removeCoupon:function(dom){var d=$.Deferred();return $.get(window.location.href,function(data){var couponCode,dataUuid;dom=$(data),$(elementIds.couponRemoveId,dom).length?(data=$(elementIds.couponRemoveUrl,dom).attr(\"data-action\"),couponCode=$(elementIds.couponRemoveId,dom).attr(\"data-code\"),dataUuid=$(elementIds.couponRemoveId,dom).attr(\"data-uuid\"),data=window.location.origin+data+\"?code=\"+couponCode+\"&uuid=\"+dataUuid,$.ajax({type:\"GET\",url:data,success:function(jsonResp){d.resolve(jsonResp)},error:function(err){d.resolve(dom)}})):d.resolve(dom)}),d.promise()},applyPromoCode:function(code,origTotal,dom){var d=$.Deferred(),form=(dom=dom||$(document),$(elementIds.applyFormId,dom));return $(elementIds.couponApplyId,dom).val(code),$.ajax({type:\"GET\",url:form[0].action+\"?\"+form.serialize(),success:function(jsonResp){d.resolve(jsonResp)},error:function(err){d.resolve(dom)}}),d.promise()},calculateTotal:function(dom){var d=$.Deferred(),dom=dom&&dom.totals?dom.totals.grandTotal:(dom=$(document),$(elementIds.bagTotalId,dom).text()),total=-1;return dom&&(total=$.trim(dom).replace(/\\$|,/g,\"\")),d.resolve({total:total}),d.promise()},onReady:this.onReady,scriptInjected:!0,testerType:CouponInjection.WORKER_TYPE_API,init:function(jq,fnLogInfo){$=jq,0},couponLimit:0}});","shared":{"19":"one23-inkjets","41":"sf-discount-coupon-form","92":"sf-discount-coupon-form","314":"sf-dwfrm-cart","452":"sf-dwfrm-cart","504":"sf-dwfrm-cart-2","557":"hanes","802":"levis","843":"sf-dwfrm-cart","1082":"sf-promo-code-form","1191":"gap","1212":"hanes","1213":"hanes","1263":"sf-discount-coupon-form","1340":"one23-inkjets","1349":"gap","1372":"jcrew","1455":"hanes","1506":"lancome","1555":"lancome","1581":"sf-promo-code-form","1601":"levis","2013":"hanes","2140":"sf-discount-coupon-form","2362":"saksoff","2363":"saksoff","2404":"sf-discount-coupon-form","2649":"sf-dwfrm-cart","2800":"sf-dwfrm-cart","2835":"sf-dwfrm-cart","5349":"lancome","5692":"sf-dwfrm-cart-2","10056":"jcrew","11233":"lancome"},"engine":{"coupon-worker-api":"APICouponWorker=function(extCode){var self=this,merchantWorker=null;this.extCode=extCode,this.originalTotal=-1,this.finalTotal=-1,this.shouldPreprocess=!0,this.savedAmountArray=[],this.couponIndex=0,this.init=function(worker){console.log(\"init\"),merchantWorker=worker,self.merchantWorker=worker,checkInitialState(this.extCode)},this.logInfo=function(info){return\"logInfo test function\"},this.hideMerchantOverlay=function(){return\"function\"==typeof merchantWorker.hideMerchantOverlay?merchantWorker.hideMerchantOverlay():null},this.revertMerchantOverlay=function(){return\"function\"==typeof merchantWorker.revertMerchantOverlay?merchantWorker.revertMerchantOverlay():null},this.showProgress=function(percent){percent=new CustomEvent(\"updateProgressBar\",{detail:{percent:percent,extCode:self.extCode}});document.dispatchEvent(percent)},this.removeCoupon=function(dom){return merchantWorker.removeCoupon(dom)},this.applyPromoCode=function(code,dom){return merchantWorker.applyPromoCode(code,this.originalTotal,dom)},this.calculateTotal=function(dom){return merchantWorker.calculateTotal(dom)},this.save=function(coupon,currentTotal){var d=$.Deferred(),result={coupon:coupon,total:currentTotal.total,savedAmount:this.originalTotal.total-currentTotal.total};this.savedAmountArray.push(result);coupon=new CustomEvent(\"saveCouponResult\",{detail:{couponCode:coupon.couponCode,message:0<result.savedAmount?\"success\":\"failure\",result:result,extCode:self.extCode}});return document.dispatchEvent(coupon),d.resolve(currentTotal.dom),d.promise()},this.setExtensionId=function(extensionId){couponInjectionExtensionId=extensionId},this.preProcess=function(dom){var d=$.Deferred(),self=this;return broadcastInitialTotal(self.extCode,self.calculateTotal(dom)),this.removeCoupon(dom).then(function(dom){return self.calculateTotal(dom)}).then(function(total){self.originalTotal=total,d.resolve(total.dom)}).fail(function(result){d.reject({action:\"APICouponWorker.preProcess()\"})}),d.promise()},this.tryPreProcess=function(dom){var d=$.Deferred();return this.shouldPreprocess?(this.preProcess(dom).then(function(dom){d.resolve(dom)}).fail(function(result){d.reject(result)}),0):d.resolve(dom),d.promise()},this.processFinalResult=function(dom){for(var maxSavingCoupon,d=$.Deferred(),self=this,maxSavingAmount=0,maxSavingCodeIndex=0,couponResults=[],j=0,j=0;j<this.savedAmountArray.length;j++){var obj=this.savedAmountArray[j],savedAmount=obj.savedAmount,succeeded=0<savedAmount;couponResults.push({code:obj.coupon.couponCode,savedAmount:succeeded?savedAmount:0,succeeded:succeeded}),maxSavingAmount<savedAmount&&(maxSavingAmount=savedAmount,maxSavingCodeIndex=j)}var logCouponResults=new CustomEvent(\"logCouponResults\",{detail:{couponResults:couponResults,extCode:self.extCode}});return document.dispatchEvent(logCouponResults),0<maxSavingAmount?(maxSavingCoupon=this.savedAmountArray[maxSavingCodeIndex].coupon,this.removeCoupon(dom).fail(function(result){d.reject()}).always(function(dom){self.applyPromoCode(maxSavingCoupon.couponCode,dom).then(function(dom){return dom}).then(function(dom){self.calculateTotal(dom).then(function(finalTotal){self.finalTotal=finalTotal;finalTotal=maxSavingAmount.toFixed(2),maxSavingCoupon.couponCode,maxSavingCoupon.couponId,finalTotal=new CustomEvent(\"showFinalResult\",{detail:{couponCode:maxSavingCoupon.couponCode,amount:finalTotal,total:self.finalTotal.total,success:!0,extCode:self.extCode,shouldRefresh:!0}});document.dispatchEvent(finalTotal)})}).done(function(response){d.resolve()}).fail(function(result){d.reject()})})):self.calculateTotal().then(function(finalTotal){self.finalTotal=finalTotal;finalTotal=new CustomEvent(\"showFinalResult\",{detail:{success:!1,total:self.finalTotal.total,extCode:self.extCode,shouldRefresh:!0}});document.dispatchEvent(finalTotal),this.removeCoupon().done(function(response){d.resolve()})}),d.promise()},this.process=function(model,dom){var d=$.Deferred();try{var currentCode,currentCoupon,err,self=this,couponCodes=model.coupons;this.couponIndex===couponCodes.length?this.processFinalResult(dom).then(function(){d.resolve()}):(currentCoupon=couponCodes[this.couponIndex])?(currentCode=currentCoupon.couponCode,this.tryPreProcess(dom).then(function(dom){return self.removeCoupon(dom)}).then(function(dom){var startProcessCoupon=new CustomEvent(\"startProcessCoupon\",{detail:{coupon:currentCoupon,extCode:self.extCode}});return document.dispatchEvent(startProcessCoupon),self.applyPromoCode(currentCode,dom)}).then(function(dom){return self.calculateTotal(dom)}).then(function(currentTotal){return self.save(currentCoupon,currentTotal)}).then(function(dom){return d.resolve(),dom}).then(function(dom){self.shouldPreprocess&&(self.shouldPreprocess=!1),self.couponIndex++,self.process(model,dom)}).fail(function(errorMessage){var logMerchantPageError;console.log(\"failing in process, heres the error: \",errorMessage),errorMessage&&\"hardFail\"===errorMessage.type?(logMerchantPageError=new CustomEvent(\"logMerchantPageError\",{detail:{errorMessage:errorMessage.error,type:\"loudFail\",extCode:self.extCode}}),document.dispatchEvent(logMerchantPageError)):(console.log(errorMessage),logMerchantPageError=new CustomEvent(\"logMerchantPageError\",{detail:{errorMessage:errorMessage.error,type:\"silentFail\",extCode:self.extCode}}),document.dispatchEvent(logMerchantPageError),self.shouldPreprocess&&(self.shouldPreprocess=!1),self.couponIndex++,self.process(model)),d.reject()})):(browserApi.runtime.sendMessage(sShopAtHomeExtensionID,{action:\"LogError\",description:err,merchant:\"http://\"+document.domain}),err=\"Merchant: \"+document.domain+\": error: No 'currentCoupon'.\",console.error(err),d.resolve())}catch(err){broadcastError(this.extCode,err.message)}return d.promise()}};","coupon-worker-async":"AsyncCouponWorker=function(extCode){var couponCodes,self=this,merchantWorker=null;this.extCode=extCode,this.originalTotal=-1,this.finalTotal=-1,this.shouldPreprocess=!0,this.savedAmountArray=[],this.couponIndex=0,this.init=function(worker){merchantWorker=worker,self.merchantWorker=worker,checkInitialState(this.extCode)},this.logInfo=function(info){return\"logInfo test function\"},this.hideMerchantOverlay=function(){return\"function\"==typeof merchantWorker.hideMerchantOverlay?merchantWorker.hideMerchantOverlay():null},this.revertMerchantOverlay=function(){return\"function\"==typeof merchantWorker.revertMerchantOverlay?merchantWorker.revertMerchantOverlay():null},this.showProgress=function(percent){percent=new CustomEvent(\"updateProgressBar\",{detail:{percent:percent,extCode:self.extCode}});document.dispatchEvent(percent)},this.removeCoupon=function(){return merchantWorker.removeCoupon()},this.applyPromoCode=function(code){return merchantWorker.applyPromoCode(code,this.originalTotal)},this.calculateTotal=function(){return merchantWorker.calculateTotal()},this.save=function(coupon,currentTotal){currentTotal={coupon:coupon,total:currentTotal.total,savedAmount:this.originalTotal.total-currentTotal.total};this.savedAmountArray.push(currentTotal);coupon=new CustomEvent(\"saveCouponResult\",{detail:{couponCode:coupon.couponCode,message:0<currentTotal.savedAmount?\"success\":\"failure\",result:currentTotal,extCode:self.extCode}});document.dispatchEvent(coupon)},this.setExtensionId=function(extensionId){couponInjectionExtensionId=extensionId},this.preProcess=function(){var d=$.Deferred(),self=this;return broadcastInitialTotal(self.extCode,self.calculateTotal()),this.removeCoupon().then(function(){return self.calculateTotal()}).then(function(total){self.originalTotal=total,d.resolve()}).fail(function(result){d.reject({action:\"AsyncCouponWorker.preProcess()\"})}),d.promise()},this.tryPreProcess=function(){var d=$.Deferred();return this.shouldPreprocess?(this.preProcess().then(function(){d.resolve()}).fail(function(result){d.reject(result)}),0):d.resolve(),d.promise()},this.processFinalResult=function(){for(var maxSavingCoupon,d=$.Deferred(),self=this,maxSavingAmount=0,maxSavingCodeIndex=0,couponResults=[],j=0,j=0;j<this.savedAmountArray.length;j++){var obj=this.savedAmountArray[j],savedAmount=obj.savedAmount,succeeded=0<savedAmount;couponResults.push({code:obj.coupon.couponCode,savedAmount:succeeded?savedAmount:0,succeeded:succeeded}),maxSavingAmount<savedAmount&&(maxSavingAmount=savedAmount,maxSavingCodeIndex=j)}var logCouponResults=new CustomEvent(\"logCouponResults\",{detail:{couponResults:couponResults,extCode:self.extCode}});return document.dispatchEvent(logCouponResults),0<maxSavingAmount?(maxSavingCoupon=this.savedAmountArray[maxSavingCodeIndex].coupon,this.removeCoupon().fail(function(result){d.reject()}).always(function(){self.applyPromoCode(maxSavingCoupon.couponCode).then(function(){0}).then(function(){self.finalTotal=self.calculateTotal();var amount=maxSavingAmount.toFixed(2),amount=(maxSavingCoupon.couponCode,maxSavingCoupon.couponId,new CustomEvent(\"showFinalResult\",{detail:{couponCode:maxSavingCoupon.couponCode,amount:amount,total:self.finalTotal.total,success:!0,extCode:self.extCode}}));document.dispatchEvent(amount)}).done(function(response){d.resolve()}).fail(function(result){d.reject()})})):(self.finalTotal=self.calculateTotal(),logCouponResults=new CustomEvent(\"showFinalResult\",{detail:{success:!1,total:self.finalTotal.total,extCode:self.extCode}}),document.dispatchEvent(logCouponResults),this.removeCoupon().done(function(response){d.resolve()})),d.promise()},this.process=function(model){var d=$.Deferred();try{var currentCode,currentCoupon,err,self=this;couponCodes=model.coupons,this.couponIndex===couponCodes.length?this.processFinalResult().then(function(){d.resolve()}):(currentCoupon=couponCodes[this.couponIndex])?(currentCode=currentCoupon.couponCode,this.tryPreProcess().then(function(){return self.removeCoupon()}).then(function(){var startProcessCoupon=new CustomEvent(\"startProcessCoupon\",{detail:{coupon:currentCoupon,extCode:self.extCode}});return document.dispatchEvent(startProcessCoupon),self.applyPromoCode(currentCode)}).then(function(){return self.calculateTotal()}).then(function(currentTotal){return self.save(currentCoupon,currentTotal)}).then(function(){d.resolve()}).then(function(){self.shouldPreprocess&&(self.shouldPreprocess=!1),self.couponIndex++,self.process(model)}).fail(function(errorMessage){var logMerchantPageError;console.log(\"failing in process, heres the error: \",errorMessage),errorMessage&&\"hardFail\"===errorMessage.type?(logMerchantPageError=new CustomEvent(\"logMerchantPageError\",{detail:{errorMessage:errorMessage.error,type:\"loudFail\",extCode:self.extCode}}),document.dispatchEvent(logMerchantPageError)):(console.log(errorMessage),logMerchantPageError=new CustomEvent(\"logMerchantPageError\",{detail:{errorMessage:errorMessage.error,type:\"silentFail\",extCode:self.extCode}}),document.dispatchEvent(logMerchantPageError),self.shouldPreprocess&&(self.shouldPreprocess=!1),self.couponIndex++,self.process(model)),d.reject()})):(browserApi.runtime.sendMessage(sShopAtHomeExtensionID,{action:\"LogError\",description:err,merchant:\"http://\"+document.domain}),err=\"Merchant: \"+document.domain+\": error: No 'currentCoupon'.\",console.error(err),d.resolve())}catch(err){broadcastError(this.extCode,err.message)}return d.promise()}};","coupon-worker-factory":"(CouponInjection={WORKER_TYPE_ASYNC:1,WORKER_TYPE_POSTBACK:2,WORKER_TYPE_API:3,reloadLimit:20,currentState:{initialized:!1,reloadCounter:0,preRemove:!1,currentIndex:0,testedCoupons:[],couponNumber:0},storage:{KEY:\"CouponInjectionState\",getCurrentState:function(){return JSON.parse(localStorage.getItem(CouponInjection.storage.KEY))||CouponInjection.currentState},updateState:function(prop,value){var state=CouponInjection.storage.getCurrentState();state[prop]=value,localStorage.setItem(CouponInjection.storage.KEY,JSON.stringify(state))},clearState:function(){localStorage.removeItem(CouponInjection.storage.KEY)}},model:{coupons:[]}}).currentState=CouponInjection.storage.getCurrentState(),CouponWorkerFactory={construct:function(merchantWorker,extCode){var worker=null;switch(merchantWorker.testerType){case CouponInjection.WORKER_TYPE_ASYNC:worker=new AsyncCouponWorker(extCode);break;case CouponInjection.WORKER_TYPE_POSTBACK:worker=new PostbackCouponWorker(extCode);break;case CouponInjection.WORKER_TYPE_API:worker=new APICouponWorker(extCode)}return worker.init(merchantWorker),worker}},CouponWorkerBase=function(elementIds,customFuncs){var self=this;this.originalAmount=0,this.pollInterval=500,this.pollTimeoutCounter=12,this.reloadIfNoCouponsApplied=!0,this.waitFor=function(func){var d=$.Deferred(),loopCount=0;return function poll(){func(loopCount)?d.resolve():loopCount===self.pollTimeoutCounter?d.reject():(loopCount++,setTimeout(poll,self.pollInterval))}(),d.promise()},this.calculateTotal=function(el){var el=el||$(elementIds.bagTotalId),total=-1;return 0<el.length&&(el=$.trim(el.text()).replace(/\\$|,/g,\"\"),total=parseFloat(el)),{total:total}},this.calculateTotalAsync=function(el,dom){var d=$.Deferred(),el=this.calculateTotal(el);return el.dom=dom,d.resolve(el),d.promise()},this.waitForRemoveCoupon=function(fnIsRemoveFinished){var d=$.Deferred();return this.waitFor(fnIsRemoveFinished).done(function(){d.resolve()}).fail(function(){d.reject({type:\"waitFor remove\",action:\"removeCoupon()\",error:\"couponRemoveId not found\"})}),d.promise()},this.waitForApplyPromoCode=function(code,fnIsApplyFinished){var d=$.Deferred();return this.waitFor(fnIsApplyFinished).done(function(){d.resolve()}).fail(function(){d.reject({action:\"applyPromoCode(code)\",message:\"Coupon code \"+code,type:\"waitFor apply\",error:\"error in waitForApplyPromoCode\"})}),d.promise()},this.checkCouponError=function(fnCouponHasError){var d=$.Deferred();return setTimeout(function(){var hasError=fnCouponHasError();d.resolve(hasError)},2e3),d.promise()},this.getFirst=function(selector,fnCondition){for(var elements=$(selector),first=null,i=0;i<elements.length;i++){var el=elements.eq(i);if(fnCondition(el)){first=el;break}}return first},this.getFirstVisible=function(selector){return this.getFirst(selector,function(el){return el.is(\":visible\")})},this.triggerEvent=function(element,eventName){var evt=document.createEvent(\"HTMLEvents\");evt.initEvent(eventName,!0,!1),element.dispatchEvent(evt)},this.setReactCouponCode=function(element,code){Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,\"value\").set.call(element,code)},this.onReady=function(callback){\"function\"==typeof callback&&callback()},this.addGlobalCSS=function(cssString,elementId){var head=document.head||document.getElementsByTagName(\"head\")[0],style=document.createElement(\"style\");style.type=\"text/css\",style.dataset.extid=elementId,style.styleSheet?style.styleSheet.cssText=cssString:style.appendChild(document.createTextNode(cssString)),head.appendChild(style)},this.removeGlobalCSS=function(elementId){document.querySelectorAll(\"style[data-extid=\"+elementId+\"]\").forEach(function(el){el.remove()})},this.checkInitialState=function(extCode){setTimeout(function(){!function(extCode){var elInput,elButton,elRemove;customFuncs&&\"function\"==typeof customFuncs.checkInitialElements?this.waitFor(customFuncs.checkInitialElements).then(function(){var e=new CustomEvent(\"initialElementsChecked\",{detail:{extCode:extCode,passed:!0}});document.dispatchEvent(e)}).catch(function(){var e=new CustomEvent(\"initialElementsChecked\",{detail:{extCode:extCode,passed:!1}}),e=(document.dispatchEvent(e),\"\");\"function\"==typeof customFuncs.getMissingElements&&(e=customFuncs.getMissingElements()),0<$(elementIds.doNotApplyCouponsId).length||this.broadcastError(extCode,\"Initial elements check failed. Missing: \"+e)}):this.waitFor(function(){return elInput=0<$(elementIds.couponApplyId).length,elButton=0<$(elementIds.couponApplyButtonId).length||0<$(elementIds.couponApplyButtonSelector).length,elRemove=0<$(elementIds.couponRemoveId).length,elDoNotApplyCoupons=0<$(elementIds.doNotApplyCouponsId).length,elRemove||elDoNotApplyCoupons||elInput&&elButton}).then(function(){var e=new CustomEvent(\"initialElementsChecked\",{detail:{extCode:extCode,passed:!elDoNotApplyCoupons}});document.dispatchEvent(e)}).catch(function(){var e=new CustomEvent(\"initialElementsChecked\",{detail:{extCode:extCode,passed:!1}});if(document.dispatchEvent(e),!elDoNotApplyCoupons){var k,missing=[],elements={couponInput:elInput,applyCoupon:elButton,removeCoupon:elRemove};for(k in elements)elements[k]||missing.push(k);this.broadcastError(extCode,\"Initial elements check failed. Missing: \"+missing.toString())}})}(extCode)},1e3)},this.broadcastInitialTotal=function(extCode,total){extCode=new CustomEvent(\"initialTotal\",{detail:{extCode:extCode,total:total.total}});document.dispatchEvent(extCode)},this.broadcastError=function(extCode,message){extCode=new CustomEvent(\"couponInjectionError\",{detail:{extCode:extCode,message:message}});document.dispatchEvent(extCode)}};","coupon-worker-postback":"PostbackCouponWorker=function(extCode){var couponCodes,workerState,self=this,merchantWorker=null,savedAmountArray=[];function processFinalResult(){for(var maxSavingAmount=0,maxSavingCodeIndex=0,couponResults=[],j=0,j=0;j<savedAmountArray.length;j++){var obj=savedAmountArray[j],savings=obj.savedAmount,succeeded=0<savings;couponResults.push({code:obj.coupon.couponCode,savedAmount:succeeded?savings:0,succeeded:succeeded}),maxSavingAmount<savings&&(maxSavingAmount=savings,maxSavingCodeIndex=j)}var startProcessCoupon,logCouponResults=new CustomEvent(\"logCouponResults\",{detail:{couponResults:couponResults,extCode:self.extCode}});document.dispatchEvent(logCouponResults),0<maxSavingAmount?(logCouponResults=savedAmountArray[maxSavingCodeIndex],CouponInjection.storage.updateState(\"maxCoupon\",logCouponResults),startProcessCoupon=new CustomEvent(\"startProcessCoupon\",{detail:{coupon:logCouponResults.coupon,extCode:self.extCode}}),document.dispatchEvent(startProcessCoupon),merchantWorker.applyPromoCode(logCouponResults.coupon.couponCode)):(startProcessCoupon=merchantWorker.calculateTotal(),logCouponResults=new CustomEvent(\"showFinalResult\",{detail:{success:!1,total:startProcessCoupon,extCode:self.extCode}}),document.dispatchEvent(logCouponResults))}this.extCode=extCode,this.init=function(worker){merchantWorker=worker,self.merchantWorker=worker,checkInitialState(this.extCode)},this.logInfo=function(info){return\"logInfo test function\"},this.hideMerchantOverlay=function(){return\"function\"==typeof merchantWorker.hideMerchantOverlay?merchantWorker.hideMerchantOverlay():null},this.revertMerchantOverlay=function(){return\"function\"==typeof merchantWorker.revertMerchantOverlay?merchantWorker.revertMerchantOverlay():null},this.process=function(state,model){try{var maxSavingCoupon,finalTotal,showFinalResult,initialPrice;if((state=state||CouponInjection.storage.getCurrentState()).savings&&(savedAmountArray=state.savings),workerState=state,activeModel=model,couponCodes=model.coupons,merchantId=model.merchantId,state.currentIndex>=couponCodes.length)return merchantWorker.couponApplied()?(maxSavingCoupon=workerState.maxCoupon,finalTotal=merchantWorker.calculateTotal(),showFinalResult=new CustomEvent(\"showFinalResult\",{detail:{couponCode:maxSavingCoupon.coupon.couponCode,amount:maxSavingCoupon.savedAmount,total:finalTotal,success:!0,extCode:self.extCode}}),void document.dispatchEvent(showFinalResult)):void processFinalResult();if(!1===state.initialized)broadcastInitialTotal(self.extCode,merchantWorker.calculateTotal()),merchantWorker.couponApplied()?(CouponInjection.storage.updateState(\"preRemove\",!0),merchantWorker.removeCoupon()):(initialPrice=merchantWorker.calculateTotal(),CouponInjection.storage.updateState(\"originalTotal\",initialPrice.total),CouponInjection.storage.updateState(\"initialized\",!0),startProcessCoupon=new CustomEvent(\"startProcessCoupon\",{detail:{coupon:couponCodes[0],extCode:self.extCode}}),document.dispatchEvent(startProcessCoupon),merchantWorker.applyPromoCode(couponCodes[0].couponCode).then(function(){}).fail(function(){CouponInjection.storage.updateState(\"currentIndex\",state.currentIndex+1)}));else{var currentTotal=merchantWorker.calculateTotal();if(state.currentIndex<couponCodes.length&&(!function(currentTotal){var saved=workerState.originalTotal-currentTotal.total,currentTotal={coupon:couponCodes[workerState.currentIndex],total:currentTotal.total,savedAmount:saved},saved=new CustomEvent(\"saveCouponResult\",{detail:{message:0<saved?\"success\":\"failure\",result:currentTotal,extCode:self.extCode}});savedAmountArray.push(currentTotal),CouponInjection.storage.updateState(\"savings\",savedAmountArray),document.dispatchEvent(saved)}(currentTotal),CouponInjection.storage.updateState(\"currentIndex\",state.currentIndex+1),state.currentIndex++),merchantWorker.couponApplied())merchantWorker.removeCoupon();else if(merchantWorker.couponHasError()){if(state.currentIndex>=couponCodes.length)return void processFinalResult();var startProcessCoupon=new CustomEvent(\"startProcessCoupon\",{detail:{coupon:couponCodes[state.currentIndex],extCode:self.extCode}});document.dispatchEvent(startProcessCoupon),merchantWorker.applyPromoCode(couponCodes[state.currentIndex].couponCode)}else{startProcessCoupon=new CustomEvent(\"startProcessCoupon\",{detail:{coupon:couponCodes[state.currentIndex],extCode:self.extCode}});document.dispatchEvent(startProcessCoupon),merchantWorker.applyPromoCode(couponCodes[state.currentIndex].couponCode)}}}catch(err){broadcastError(self.extCode,err.message)}}};"},"templates":{"apply-promocover":"{\n  \"if:!visible:selector(couponInput)\": {\n    \"click:selector(promoCover)\": {\n      \"wait-for:visible:selector(couponInput)\": true\n    }\n  },\n  \"apply:selector(couponInput):react\": {\n    \"click:selector(couponApply)\": {\n      \"wait-for:couponApplied\": true\n    }\n  }\n}\n","apply-react":"{\n  \"apply:selector(couponInput):react\": {\n      \"click:selector(couponApply)\": {\n          \"wait-for:couponApplied\": true\n      }\n  }\n}","http-submit-form-coupon-input":"{\r\n    \"http-submit-form\": {\r\n        \"input\": \"selector(couponInput)\",\r\n        \"value\": \"[code]\",\r\n\t\t\"append\": [\r\n                \"selector(couponApply)\"\r\n            ],\r\n        \"success\": {\r\n            \"set-dom\": \"[data]\"\r\n        }\r\n    }\r\n}","http-submit-form-remove":"{\r\n  \"if:exists:selector(couponRemove)\": {\r\n    \"http-submit-form\": {\r\n      \"input\": \"selector(couponRemove)\",\r\n      \"success\": {\r\n        \"set-dom\": \"[data]\"\r\n      }\r\n    }\r\n  }\r\n}","pre-check":"{\r\n    \"if:!visible:selector(couponInput)\": {\r\n        \"click:selector(promoCover)\": {\r\n            \"wait-for:visible:selector(couponInput)\": true\r\n        }\r\n    }\r\n}"}}